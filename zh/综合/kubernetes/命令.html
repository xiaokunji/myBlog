<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>å‘½ä»¤ | ç±³äºŒ</title><meta name=keywords content=" 1. kubectl ä½¿ç”¨æŒ‡å—, 2. ç®€å•éƒ¨ç½², 2.1 éƒ¨ç½² Pod, 2.1.1 pod çš„yamlæ–‡ä»¶, 2.1.2 æ‰§è¡Œ kubectl å‘½ä»¤éƒ¨ç½², 2.2 éƒ¨ç½² Deployment, 2.2.1  Deployment çš„ yaml æ–‡ä»¶, 2.2.2 æ‰§è¡Œ kubectl å‘½ä»¤éƒ¨ç½²"><meta name=description content="     "><meta name=author content="xkj"><link rel=canonical href=https://xiaokunji.com/zh/%E7%BB%BC%E5%90%88/kubernetes/%E5%91%BD%E4%BB%A4.html><link crossorigin=anonymous href=/assets/css/stylesheet.b3faf608c544858ba700943ffe182cb647f38432d29a07d73234965beacb26f6.css integrity="sha256-s/r2CMVEhYunAJQ//hgstkfzhDLSmgfXMjSWW+rLJvY=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://xiaokunji.com/img/Q.svg><link rel=icon type=image/png sizes=16x16 href=https://xiaokunji.com/img/Q.svg><link rel=icon type=image/png sizes=32x32 href=https://xiaokunji.com/img/Q.svg><link rel=apple-touch-icon href=https://xiaokunji.com/Q.svg><link rel=mask-icon href=https://xiaokunji.com/Q.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://xiaokunji.com/zh/%E7%BB%BC%E5%90%88/kubernetes/%E5%91%BD%E4%BB%A4.html><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="å‘½ä»¤"><meta property="og:description" content="     "><meta property="og:type" content="article"><meta property="og:url" content="https://xiaokunji.com/zh/%E7%BB%BC%E5%90%88/kubernetes/%E5%91%BD%E4%BB%A4.html"><meta property="article:section" content="ç»¼åˆ"><meta property="article:published_time" content="2023-08-22T00:00:00+00:00"><meta property="article:modified_time" content="2023-08-30T16:27:33+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="å‘½ä»¤"><meta name=twitter:description content="     "><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":4,"name":"å‘½ä»¤","item":"https://xiaokunji.com/zh/%E7%BB%BC%E5%90%88/kubernetes/%E5%91%BD%E4%BB%A4.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"å‘½ä»¤","name":"å‘½ä»¤","description":"     ","keywords":[" 1. kubectl ä½¿ç”¨æŒ‡å—"," 2. ç®€å•éƒ¨ç½²"," 2.1 éƒ¨ç½² Pod"," 2.1.1 pod çš„yamlæ–‡ä»¶"," 2.1.2 æ‰§è¡Œ kubectl å‘½ä»¤éƒ¨ç½²"," 2.2 éƒ¨ç½² Deployment"," 2.2.1  Deployment çš„ yaml æ–‡ä»¶"," 2.2.2 æ‰§è¡Œ kubectl å‘½ä»¤éƒ¨ç½²"],"articleBody":"[toc]\n1. kubectl ä½¿ç”¨æŒ‡å— kubectl æ˜¯ Kubernetes è‡ªå¸¦çš„å®¢æˆ·ç«¯ï¼Œå¯ä»¥ç”¨å®ƒæ¥ç›´æ¥æ“ä½œ Kubernetesé›†ç¾¤ã€‚Kubectl çš„é…ç½®æ–‡ä»¶åœ¨$HOME/.kube ç›®å½•ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½® KUBECONFIG ç¯å¢ƒå˜é‡æˆ–è®¾ç½®å‘½ä»¤å‚æ•°â€“kubeconfig æ¥æŒ‡å®šå…¶ä»–ä½ç½®çš„ kubeconfig æ–‡ä»¶ã€‚\nkubectl å¹¶ä¸éœ€è¦ kubectl å®‰è£…åœ¨ K8S é›†ç¾¤çš„ä»»ä½• Node ä¸Šï¼Œä½†æ˜¯ï¼Œéœ€è¦ç¡®ä¿å®‰è£… kubectl çš„æœºå™¨å’Œ K8S çš„é›†ç¾¤èƒ½å¤Ÿè¿›è¡Œç½‘ç»œäº’é€šã€‚\nä»ç”¨æˆ·è§’åº¦æ¥è¯´ï¼Œkubectl å°±æ˜¯æ§åˆ¶ Kubernetes çš„é©¾é©¶èˆ±ï¼Œå®ƒå…è®¸ä½ æ‰§è¡Œæ‰€æœ‰å¯èƒ½çš„ Kubernetes æ“ä½œï¼›ä»æŠ€æœ¯è§’åº¦æ¥çœ‹ï¼Œkubectl å°±æ˜¯ Kubernetes API çš„ä¸€ä¸ªå®¢æˆ·ç«¯è€Œå·²ã€‚\nä½¿ç”¨ä»¥ä¸‹è¯­æ³• kubectl ä»ç»ˆç«¯çª—å£è¿è¡Œå‘½ä»¤ï¼š kubectl [command] [TYPE] [NAME] [flags]\ncommandï¼šæŒ‡å®šè¦å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºæ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚ createã€getã€describeã€deleteã€‚ TYPEï¼šæŒ‡å®š**èµ„æºç±»å‹ **ã€‚èµ„æºç±»å‹ä¸åŒºåˆ†å¤§å°å†™ï¼Œå¯ä»¥æŒ‡å®šå•æ•°ã€å¤æ•°æˆ–ç¼©å†™å½¢å¼ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤è¾“å‡ºç›¸åŒçš„ç»“æœ: kubectl get pod pod1 kubectl get pods pod1 kubectl get po pod1 NAMEï¼šæŒ‡å®šèµ„æºçš„åç§°ã€‚åç§°åŒºåˆ†å¤§å°å†™ã€‚å¦‚æœçœç•¥åç§°ï¼Œåˆ™æ˜¾ç¤ºæ‰€æœ‰èµ„æºçš„è¯¦ç»†ä¿¡æ¯ kubectl get podsã€‚\nflags: æŒ‡å®šå¯é€‰çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ -s æˆ– -server å‚æ•°æŒ‡å®š Kubernetes API æœåŠ¡å™¨çš„åœ°å€å’Œç«¯å£ã€‚\nåœ¨å¯¹å¤šä¸ªèµ„æºæ‰§è¡Œæ“ä½œæ—¶ï¼Œæ‚¨å¯ä»¥æŒ‰ç±»å‹å’Œåç§°æŒ‡å®šæ¯ä¸ªèµ„æºï¼Œæˆ–æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼š\nè¦æŒ‰ç±»å‹å’Œåç§°æŒ‡å®šèµ„æºï¼š kubectl get pod pod1 è¦å¯¹æ‰€æœ‰ç±»å‹ç›¸åŒçš„èµ„æºè¿›è¡Œåˆ†ç»„ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼šTYPE name1 name2 ã€‚ ä¾‹å­ï¼škubectl get pod example-pod1 example-pod2 åˆ†åˆ«æŒ‡å®šå¤šä¸ªèµ„æºç±»å‹ï¼šTYPE1/name1 TYPE1/name2 TYPE2/name3 TYPE4/name4ã€‚ ä¾‹å­ï¼škubectl get pod/example-pod1 replicationcontroller/example-rc1 ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶æŒ‡å®šèµ„æºï¼š-f file1 -f file2 -f file3 ä½¿ç”¨ YAML è€Œä¸æ˜¯ JSON å› ä¸º YAML æ›´å®¹æ˜“ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯ç”¨äºé…ç½®æ–‡ä»¶æ—¶ã€‚ ä¾‹å­ï¼škubectl get -f pod.yaml 2. ç®€å•éƒ¨ç½² 2.1 éƒ¨ç½² Pod é€šè¿‡ kubectl éƒ¨ç½² Pod çš„åŠæ³•åˆ†ä¸ºä¸¤æ­¥ï¼š\nå‡†å¤‡ Pod çš„ yaml æ–‡ä»¶ï¼›\næ‰§è¡Œ kubectl å‘½ä»¤éƒ¨ç½²\n2.1.1 pod çš„yamlæ–‡ä»¶ apiVersion: v1 kind: Pod metadata: name: memory-demo namespace: mem-example spec: containers: - name: memory-demo-ctr image: polinux/stress resources: limits: memory: \"200Mi\" requests: memory: \"100Mi\" command: [\"stress\"] args: [\"--vm\", \"1\", \"--vm-bytes\", \"150M\", \"--vm-hang\", \"1\"] volumeMounts: - name: redis-storage mountPath: /data/redis volumes: - name: redis-storage emptyDir: {} apiVersionè®°å½• K8S çš„ API Server ç‰ˆæœ¬ï¼Œç°åœ¨çœ‹åˆ°çš„éƒ½æ˜¯v1ï¼Œç”¨æˆ·ä¸ç”¨ç®¡ã€‚\nkindè®°å½•è¯¥ yaml çš„å¯¹è±¡ï¼Œæ¯”å¦‚è¿™æ˜¯ä¸€ä»½ Pod çš„ yaml é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆå€¼å†…å®¹å°±æ˜¯Podã€‚\nmetadataè®°å½•äº† Pod è‡ªèº«çš„å…ƒæ•°æ®ï¼Œæ¯”å¦‚è¿™ä¸ª Pod çš„åå­—ã€è¿™ä¸ª Pod å±äºå“ªä¸ª namespace\nspecè®°å½•äº† Pod å†…éƒ¨æ‰€æœ‰çš„èµ„æºçš„è¯¦ç»†ä¿¡æ¯ï¼Œçœ‹æ‡‚è¿™ä¸ªå¾ˆé‡è¦ï¼š\ncontainersè®°å½•äº† Pod å†…çš„å®¹å™¨ä¿¡æ¯ï¼Œ\ncontainersåŒ…æ‹¬äº†ï¼šnameå®¹å™¨åï¼Œimageå®¹å™¨çš„é•œåƒåœ°å€ï¼Œresourceså®¹å™¨éœ€è¦çš„ CPUã€å†…å­˜ã€GPU ç­‰èµ„æºï¼Œcommandå®¹å™¨çš„å…¥å£å‘½ä»¤ï¼Œargså®¹å™¨çš„å…¥å£å‚æ•°ï¼ŒvolumeMountså®¹å™¨è¦æŒ‚è½½çš„ Pod æ•°æ®å·ç­‰ã€‚limitsæ˜¯ K8S ä¸ºè¯¥å®¹å™¨è‡³å¤šåˆ†é…çš„èµ„æºé…é¢ï¼›è€Œrequestsåˆ™æ˜¯ K8S ä¸ºè¯¥å®¹å™¨è‡³å°‘åˆ†é…çš„èµ„æºé…é¢\nvolumesè®°å½•äº† Pod å†…çš„æ•°æ®å·ä¿¡æ¯ï¼Œåæ–‡ä¼šè¯¦ç»†ä»‹ç» Pod çš„æ•°æ®å·ã€‚\n2.1.2 æ‰§è¡Œ kubectl å‘½ä»¤éƒ¨ç½² æœ‰äº† Pod çš„ yaml æ–‡ä»¶ä¹‹åï¼Œå°±å¯ä»¥ç”¨ kubectl éƒ¨ç½²äº†ï¼Œå‘½ä»¤éå¸¸ç®€å•ï¼škubectl create -f ${POD_YAML}ã€‚\n2.2 éƒ¨ç½² Deployment 2.2.1 Deployment çš„ yaml æ–‡ä»¶ apiVersion: extensions/v1beta1 kind: Deployment metadata: name: rss-site namespace: mem-example spec: replicas: 2 template: metadata: labels: app: web spec: containers: - name: memory-demo-ctr image: polinux/stress resources: limits: emory: \"200Mi\" requests: memory: \"100Mi\" command: [\"stress\"] args: [\"--vm\", \"1\", \"--vm-bytes\", \"150M\", \"--vm-hang\", \"1\"] volumeMounts: - name: redis-storage mountPath: /data/redis volumes: - name: redis-storage emptyDir: {} metadataåŒ Pod çš„ yamlï¼Œè¿™é‡Œæä¸€ç‚¹ï¼šå¦‚æœæ²¡æœ‰æŒ‡æ˜ namespaceï¼Œé‚£ä¹ˆå°±æ˜¯ç”¨ kubectl é»˜è®¤çš„ namespaceï¼ˆå¦‚æœ kubectl é…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰æŒ‡æ˜ namespaceï¼Œé‚£ä¹ˆå°±æ˜¯ default ç©ºé—´ï¼‰ã€‚\nspecï¼Œå¯ä»¥çœ‹åˆ° Deployment çš„specå­—æ®µæ˜¯åœ¨ Pod çš„specå†…å®¹å¤–â€œåŒ…äº†ä¸€å±‚â€ï¼Œé‚£å°±æ¥çœ‹ Deployment æœ‰å“ªäº›éœ€è¦æ³¨æ„çš„ï¼š\nreplicasã€‚å‰¯æœ¬ä¸ªæ•°ã€‚ä¹Ÿå°±æ˜¯è¯¥ Deployment éœ€è¦èµ·å¤šå°‘ä¸ªç›¸åŒçš„ Podï¼Œå¦‚æœç”¨æˆ·æˆåŠŸåœ¨ K8S ä¸­é…ç½®äº† nï¼ˆn\u003e1ï¼‰ä¸ªï¼Œé‚£ä¹ˆ Deployment ä¼šç¡®ä¿åœ¨é›†ç¾¤ä¸­å§‹ç»ˆæœ‰ n ä¸ªæœåŠ¡åœ¨è¿è¡Œã€‚\ntemplateã€‚\nmetadataï¼Œæ–°æ‰‹åŒå­¦å…ˆä¸ç®¡è¿™è¾¹çš„ä¿¡æ¯ã€‚ specï¼Œä¼šå‘ç°è¿™å®Œå®Œå…¨å…¨æ˜¯ä¸Šæ–‡æåˆ°çš„ Pod çš„specå†…å®¹ï¼Œåœ¨è¿™é‡Œå†™æ˜äº† Deployment ä¸‹å±ç®¡ç†çš„æ¯ä¸ª Pod çš„å…·ä½“å†…å®¹ã€‚ 2.2.2 æ‰§è¡Œ kubectl å‘½ä»¤éƒ¨ç½² Deployment çš„éƒ¨ç½²åŠæ³•åŒ Podï¼škubectl create -f ${DEPLOYMENT_YAML}ã€‚ç”±æ­¤å¯è§ï¼ŒK8S ä¼šæ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„kindå­—æ®µæ¥åˆ¤æ–­å…·ä½“è¦åˆ›å»ºçš„æ˜¯ä»€ä¹ˆèµ„æºã€‚\néƒ¨ç½²å®Œ deployment ä¹‹åï¼Œå¯ä»¥æŸ¥çœ‹åˆ°è‡ªåŠ¨åˆ›å»ºäº† ReplicaSet å’Œ Podï¼Œ\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nä»åå­—ä¸Šå¯ä»¥çœ‹å‡º,deploymentå’Œ replicaSetè¿˜æœ‰Podä¸‰è€…çš„åå­—æ˜¯ä¸€ä¸ªç´¯åŠ çš„æ–¹å¼, æ‰€ä»¥çœ‹podçš„åç§°, å¯ä»¥çœ‹åˆ°deploymentå’ŒreplicaSetçš„åå­—æ˜¯ä»€ä¹ˆ\nå‘½ä»¤è¡Œå·¥å…· (kubectl) | Kubernetes Kubernetes å…¥é—¨\u0026è¿›é˜¶å®æˆ˜ - çŸ¥ä¹ (zhihu.com) ","wordCount":"1744","inLanguage":"zh","datePublished":"2023-08-22T00:00:00Z","dateModified":"2023-08-30T16:27:33.871737268Z","author":{"@type":"Person","name":"xkj"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xiaokunji.com/zh/%E7%BB%BC%E5%90%88/kubernetes/%E5%91%BD%E4%BB%A4.html"},"publisher":{"@type":"Organization","name":"ç±³äºŒ","logo":{"@type":"ImageObject","url":"https://xiaokunji.com/img/Q.svg"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xiaokunji.com/zh/ accesskey=h title="ç±³äºŒ (Alt + H)"><img src=https://xiaokunji.com/img/Q.svg alt aria-label=logo height=35>ç±³äºŒ</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://xiaokunji.com/en/ title=English aria-label=English>English</a></li></ul></div></div><ul id=menu><li><a href=https://xiaokunji.com/zh/ title=ğŸ ä¸»é¡µ><span>ğŸ ä¸»é¡µ</span></a></li><li><a href=https://xiaokunji.com/zh/search.html title="ğŸ”æœç´¢ (Alt + /)" accesskey=/><span>ğŸ”æœç´¢</span></a></li><li><a href=https://xiaokunji.com/zh/post.html title=ğŸ“šæ–‡ç« ><span>ğŸ“šæ–‡ç« </span></a></li><li><a href=https://xiaokunji.com/zh/archives.html title=â±æ—¶é—´è½´><span>â±æ—¶é—´è½´</span></a></li><li><a href=https://xiaokunji.com/zh/tags.html title=ğŸ”–æ ‡ç­¾><span>ğŸ”–æ ‡ç­¾</span></a></li><li><a href=https://xiaokunji.com/zh/categories.html title=ğŸ“–åˆ†ç±»><span>ğŸ“–åˆ†ç±»</span></a></li><li><a href=https://xiaokunji.com/zh/links.html title=ğŸ¤å‹é“¾><span>ğŸ¤å‹é“¾</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><nav aria-label=breadcrumb><ul><a href=https://xiaokunji.com/zh/>ğŸ </a> <span>></span>
<a href=https://xiaokunji.com/zh/%E7%BB%BC%E5%90%88.html>ç»¼åˆ</a> <span>></span>
<a href=https://xiaokunji.com/zh/%E7%BB%BC%E5%90%88/kubernetes.html>Kubernetes</a> <span>></span></ul></nav><h1 class=post-title>å‘½ä»¤</h1><div class=post-description></div><div class=post-meta>åˆ›å»º:&nbsp;<span title='2023-08-22 00:00:00 +0000 UTC'>2023-08-22</span>&nbsp;Â·&nbsp;æ›´æ–°:&nbsp;2023-08-30&nbsp;Â·&nbsp;4 åˆ†é’Ÿ&nbsp;Â·&nbsp;xkj
&nbsp;|&nbsp;åˆ†ç±»: &nbsp;<ul class=post-categories-meta><a href=https://xiaokunji.com/zh/categories/%E7%BB%BC%E5%90%88.html>ç»¼åˆ</a></ul><span id=busuanzi_container_page_pv>&nbsp;| è®¿é—®: <span id=busuanzi_value_page_pv></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#1-kubectl-%e4%bd%bf%e7%94%a8%e6%8c%87%e5%8d%97 aria-label="1. kubectl ä½¿ç”¨æŒ‡å—">1. kubectl ä½¿ç”¨æŒ‡å—</a></li><li><a href=#2-%e7%ae%80%e5%8d%95%e9%83%a8%e7%bd%b2 aria-label="2. ç®€å•éƒ¨ç½²">2. ç®€å•éƒ¨ç½²</a><ul><li><a href=#21-%e9%83%a8%e7%bd%b2-pod aria-label="2.1 éƒ¨ç½² Pod">2.1 éƒ¨ç½² Pod</a><ul><li><a href=#211-pod-%e7%9a%84yaml%e6%96%87%e4%bb%b6 aria-label="2.1.1 pod çš„yamlæ–‡ä»¶">2.1.1 pod çš„yamlæ–‡ä»¶</a></li><li><a href=#212-%e6%89%a7%e8%a1%8c-kubectl-%e5%91%bd%e4%bb%a4%e9%83%a8%e7%bd%b2 aria-label="2.1.2 æ‰§è¡Œ kubectl å‘½ä»¤éƒ¨ç½²">2.1.2 æ‰§è¡Œ kubectl å‘½ä»¤éƒ¨ç½²</a></li></ul></li><li><a href=#22-%e9%83%a8%e7%bd%b2-deployment aria-label="2.2 éƒ¨ç½² Deployment">2.2 éƒ¨ç½² Deployment</a><ul><li><a href=#221--deployment-%e7%9a%84-yaml-%e6%96%87%e4%bb%b6 aria-label="2.2.1  Deployment çš„ yaml æ–‡ä»¶">2.2.1 Deployment çš„ yaml æ–‡ä»¶</a></li><li><a href=#222-%e6%89%a7%e8%a1%8c-kubectl-%e5%91%bd%e4%bb%a4%e9%83%a8%e7%bd%b2 aria-label="2.2.2 æ‰§è¡Œ kubectl å‘½ä»¤éƒ¨ç½²">2.2.2 æ‰§è¡Œ kubectl å‘½ä»¤éƒ¨ç½²</a></li></ul></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>[toc]</p><h1 id=1-kubectl-ä½¿ç”¨æŒ‡å—>1. kubectl ä½¿ç”¨æŒ‡å—<a hidden class=anchor aria-hidden=true href=#1-kubectl-ä½¿ç”¨æŒ‡å—>#</a></h1><p>kubectl æ˜¯ Kubernetes è‡ªå¸¦çš„å®¢æˆ·ç«¯ï¼Œå¯ä»¥ç”¨å®ƒæ¥ç›´æ¥æ“ä½œ Kubernetesé›†ç¾¤ã€‚Kubectl çš„é…ç½®æ–‡ä»¶åœ¨$HOME/.kube ç›®å½•ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½® KUBECONFIG ç¯å¢ƒå˜é‡æˆ–è®¾ç½®å‘½ä»¤å‚æ•°&ndash;kubeconfig æ¥æŒ‡å®šå…¶ä»–ä½ç½®çš„ kubeconfig æ–‡ä»¶ã€‚</p><p>kubectl å¹¶ä¸éœ€è¦ kubectl å®‰è£…åœ¨ K8S é›†ç¾¤çš„ä»»ä½• Node ä¸Šï¼Œä½†æ˜¯ï¼Œéœ€è¦ç¡®ä¿å®‰è£… kubectl çš„æœºå™¨å’Œ K8S çš„é›†ç¾¤èƒ½å¤Ÿè¿›è¡Œç½‘ç»œäº’é€šã€‚</p><p>ä»ç”¨æˆ·è§’åº¦æ¥è¯´ï¼Œkubectl å°±æ˜¯æ§åˆ¶ Kubernetes çš„é©¾é©¶èˆ±ï¼Œå®ƒå…è®¸ä½ æ‰§è¡Œæ‰€æœ‰å¯èƒ½çš„ Kubernetes æ“ä½œï¼›ä»æŠ€æœ¯è§’åº¦æ¥çœ‹ï¼Œkubectl å°±æ˜¯ Kubernetes API çš„ä¸€ä¸ªå®¢æˆ·ç«¯è€Œå·²ã€‚</p><p>ä½¿ç”¨ä»¥ä¸‹è¯­æ³• <code>kubectl</code> ä»ç»ˆç«¯çª—å£è¿è¡Œå‘½ä»¤ï¼š
<code>kubectl [command] [TYPE] [NAME] [flags]</code></p><ul><li><code>command</code>ï¼šæŒ‡å®šè¦å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºæ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚ <code>create</code>ã€<code>get</code>ã€<code>describe</code>ã€<code>delete</code>ã€‚</li><li><code>TYPE</code>ï¼šæŒ‡å®š**<a href=https://kubernetes.io/zh/docs/reference/kubectl/overview/#resource-types target=_blank rel=noopener>èµ„æºç±»å‹</a>
**ã€‚èµ„æºç±»å‹ä¸åŒºåˆ†å¤§å°å†™ï¼Œå¯ä»¥æŒ‡å®šå•æ•°ã€å¤æ•°æˆ–ç¼©å†™å½¢å¼ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤è¾“å‡ºç›¸åŒçš„ç»“æœ:</li></ul><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl get pod pod1
</span></span><span style=display:flex><span>kubectl get pods pod1
</span></span><span style=display:flex><span>kubectl get po pod1
</span></span></code></pre></div><ul><li><p><code>NAME</code>ï¼šæŒ‡å®šèµ„æºçš„åç§°ã€‚åç§°åŒºåˆ†å¤§å°å†™ã€‚å¦‚æœçœç•¥åç§°ï¼Œåˆ™æ˜¾ç¤ºæ‰€æœ‰èµ„æºçš„è¯¦ç»†ä¿¡æ¯ <code>kubectl get pods</code>ã€‚</p></li><li><p><code>flags</code>: æŒ‡å®šå¯é€‰çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ <code>-s</code> æˆ– <code>-server</code> å‚æ•°æŒ‡å®š Kubernetes API æœåŠ¡å™¨çš„åœ°å€å’Œç«¯å£ã€‚</p></li></ul><p>åœ¨å¯¹å¤šä¸ªèµ„æºæ‰§è¡Œæ“ä½œæ—¶ï¼Œæ‚¨å¯ä»¥æŒ‰ç±»å‹å’Œåç§°æŒ‡å®šæ¯ä¸ªèµ„æºï¼Œæˆ–æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼š</p><ul><li>è¦æŒ‰ç±»å‹å’Œåç§°æŒ‡å®šèµ„æºï¼š <code>kubectl get pod pod1</code></li><li>è¦å¯¹æ‰€æœ‰ç±»å‹ç›¸åŒçš„èµ„æºè¿›è¡Œåˆ†ç»„ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š<code>TYPE name1 name2 </code>ã€‚
ä¾‹å­ï¼š<code>kubectl get pod example-pod1 example-pod2</code></li><li>åˆ†åˆ«æŒ‡å®šå¤šä¸ªèµ„æºç±»å‹ï¼š<code>TYPE1/name1 TYPE1/name2 TYPE2/name3 TYPE4/name4</code>ã€‚
ä¾‹å­ï¼š<code>kubectl get pod/example-pod1 replicationcontroller/example-rc1</code></li><li>ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶æŒ‡å®šèµ„æºï¼š<code>-f file1 -f file2 -f file3</code></li><li><a href=https://kubernetes.io/zh/docs/concepts/configuration/overview/*#general-config-tips target=_blank rel=noopener>ä½¿ç”¨ YAML è€Œä¸æ˜¯ JSON</a>
å› ä¸º YAML æ›´å®¹æ˜“ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯ç”¨äºé…ç½®æ–‡ä»¶æ—¶ã€‚
ä¾‹å­ï¼š<code>kubectl get -f pod.yaml</code></li></ul><h1 id=2-ç®€å•éƒ¨ç½²>2. ç®€å•éƒ¨ç½²<a hidden class=anchor aria-hidden=true href=#2-ç®€å•éƒ¨ç½²>#</a></h1><h2 id=21-éƒ¨ç½²-pod>2.1 éƒ¨ç½² Pod<a hidden class=anchor aria-hidden=true href=#21-éƒ¨ç½²-pod>#</a></h2><p>é€šè¿‡ kubectl éƒ¨ç½² Pod çš„åŠæ³•åˆ†ä¸ºä¸¤æ­¥ï¼š</p><ol><li><p>å‡†å¤‡ Pod çš„ yaml æ–‡ä»¶ï¼›</p></li><li><p>æ‰§è¡Œ kubectl å‘½ä»¤éƒ¨ç½²</p></li></ol><h3 id=211-pod-çš„yamlæ–‡ä»¶>2.1.1 pod çš„yamlæ–‡ä»¶<a hidden class=anchor aria-hidden=true href=#211-pod-çš„yamlæ–‡ä»¶>#</a></h3><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#7ee787>apiVersion</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>v1</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>kind</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>Pod</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>metadata</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>memory-demo</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>namespace</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>mem-example</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681></span><span style=color:#7ee787>spec</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>containers</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span>- <span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>memory-demo-ctr</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>image</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>polinux/stress</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>resources</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>limits</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>memory</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;200Mi&#34;</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>requests</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>        </span><span style=color:#7ee787>memory</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;100Mi&#34;</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>command</span>:<span style=color:#6e7681> </span>[<span style=color:#a5d6ff>&#34;stress&#34;</span>]<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>args</span>:<span style=color:#6e7681> </span>[<span style=color:#a5d6ff>&#34;--vm&#34;</span>,<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;1&#34;</span>,<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;--vm-bytes&#34;</span>,<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;150M&#34;</span>,<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;--vm-hang&#34;</span>,<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;1&#34;</span>]<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>volumeMounts</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span>- <span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>redis-storage</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>mountPath</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>/data/redis</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span><span style=color:#7ee787>volumes</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>  </span>- <span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>redis-storage</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>    </span><span style=color:#7ee787>emptyDir</span>:<span style=color:#6e7681> </span>{}<span style=color:#6e7681>
</span></span></span></code></pre></div><ul><li><p><code>apiVersion</code>è®°å½• K8S çš„ API Server ç‰ˆæœ¬ï¼Œç°åœ¨çœ‹åˆ°çš„éƒ½æ˜¯<code>v1</code>ï¼Œç”¨æˆ·ä¸ç”¨ç®¡ã€‚</p></li><li><p><code>kind</code>è®°å½•è¯¥ yaml çš„å¯¹è±¡ï¼Œæ¯”å¦‚è¿™æ˜¯ä¸€ä»½ Pod çš„ yaml é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆå€¼å†…å®¹å°±æ˜¯<code>Pod</code>ã€‚</p></li><li><p><code>metadata</code>è®°å½•äº† Pod è‡ªèº«çš„å…ƒæ•°æ®ï¼Œæ¯”å¦‚è¿™ä¸ª Pod çš„åå­—ã€è¿™ä¸ª Pod å±äºå“ªä¸ª namespace</p></li><li><p><code>spec</code>è®°å½•äº† Pod å†…éƒ¨æ‰€æœ‰çš„èµ„æºçš„è¯¦ç»†ä¿¡æ¯ï¼Œçœ‹æ‡‚è¿™ä¸ªå¾ˆé‡è¦ï¼š</p></li><li><ul><li><p><code>containers</code>è®°å½•äº† Pod å†…çš„å®¹å™¨ä¿¡æ¯ï¼Œ</p><p><code>containers</code>åŒ…æ‹¬äº†ï¼š<code>name</code>å®¹å™¨åï¼Œ<code>image</code>å®¹å™¨çš„é•œåƒåœ°å€ï¼Œ<code>resources</code>å®¹å™¨éœ€è¦çš„ CPUã€å†…å­˜ã€GPU ç­‰èµ„æºï¼Œ<code>command</code>å®¹å™¨çš„å…¥å£å‘½ä»¤ï¼Œ<code>args</code>å®¹å™¨çš„å…¥å£å‚æ•°ï¼Œ<code>volumeMounts</code>å®¹å™¨è¦æŒ‚è½½çš„ Pod æ•°æ®å·ç­‰ã€‚<code>limits</code>æ˜¯ K8S ä¸ºè¯¥å®¹å™¨è‡³å¤šåˆ†é…çš„èµ„æºé…é¢ï¼›è€Œ<code>requests</code>åˆ™æ˜¯ K8S ä¸ºè¯¥å®¹å™¨è‡³å°‘åˆ†é…çš„èµ„æºé…é¢</p></li><li><p><code>volumes</code>è®°å½•äº† Pod å†…çš„æ•°æ®å·ä¿¡æ¯ï¼Œåæ–‡ä¼šè¯¦ç»†ä»‹ç» Pod çš„æ•°æ®å·ã€‚</p></li></ul></li></ul><h3 id=212-æ‰§è¡Œ-kubectl-å‘½ä»¤éƒ¨ç½²>2.1.2 æ‰§è¡Œ kubectl å‘½ä»¤éƒ¨ç½²<a hidden class=anchor aria-hidden=true href=#212-æ‰§è¡Œ-kubectl-å‘½ä»¤éƒ¨ç½²>#</a></h3><p>æœ‰äº† Pod çš„ yaml æ–‡ä»¶ä¹‹åï¼Œå°±å¯ä»¥ç”¨ kubectl éƒ¨ç½²äº†ï¼Œå‘½ä»¤éå¸¸ç®€å•ï¼š<code>kubectl create -f ${POD_YAML}</code>ã€‚</p><p><img loading=lazy src=.%5c%e5%91%bd%e4%bb%a4.assets%0b2-3ca4f40582d40e56a57511e8785de3b2_r.jpg alt=img></p><h2 id=22-éƒ¨ç½²-deployment>2.2 éƒ¨ç½² Deployment<a hidden class=anchor aria-hidden=true href=#22-éƒ¨ç½²-deployment>#</a></h2><h3 id=221--deployment-çš„-yaml-æ–‡ä»¶>2.2.1 Deployment çš„ yaml æ–‡ä»¶<a hidden class=anchor aria-hidden=true href=#221--deployment-çš„-yaml-æ–‡ä»¶>#</a></h3><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#7ee787>apiVersion</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>extensions/v1beta1</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681> </span><span style=color:#7ee787>kind</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>Deployment</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681> </span><span style=color:#7ee787>metadata</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>   </span><span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>rss-site</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>   </span><span style=color:#7ee787>namespace</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>mem-example</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681> </span><span style=color:#7ee787>spec</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>   </span><span style=color:#7ee787>replicas</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>2</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>   </span><span style=color:#7ee787>template</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>     </span><span style=color:#7ee787>metadata</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>       </span><span style=color:#7ee787>labels</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>         </span><span style=color:#7ee787>app</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>web</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>     </span><span style=color:#7ee787>spec</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>      </span><span style=color:#7ee787>containers</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>       </span>- <span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>memory-demo-ctr</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>         </span><span style=color:#7ee787>image</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>polinux/stress</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>         </span><span style=color:#7ee787>resources</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>         </span><span style=color:#7ee787>limits</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>           </span><span style=color:#7ee787>emory</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;200Mi&#34;</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>         </span><span style=color:#7ee787>requests</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>           </span><span style=color:#7ee787>memory</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;100Mi&#34;</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>         </span><span style=color:#7ee787>command</span>:<span style=color:#6e7681> </span>[<span style=color:#a5d6ff>&#34;stress&#34;</span>]<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>         </span><span style=color:#7ee787>args</span>:<span style=color:#6e7681> </span>[<span style=color:#a5d6ff>&#34;--vm&#34;</span>,<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;1&#34;</span>,<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;--vm-bytes&#34;</span>,<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;150M&#34;</span>,<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;--vm-hang&#34;</span>,<span style=color:#6e7681> </span><span style=color:#a5d6ff>&#34;1&#34;</span>]<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>         </span><span style=color:#7ee787>volumeMounts</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>         </span>- <span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>redis-storage</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>           </span><span style=color:#7ee787>mountPath</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>/data/redis</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>     </span><span style=color:#7ee787>volumes</span>:<span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>     </span>- <span style=color:#7ee787>name</span>:<span style=color:#6e7681> </span><span style=color:#a5d6ff>redis-storage</span><span style=color:#6e7681>
</span></span></span><span style=display:flex><span><span style=color:#6e7681>       </span><span style=color:#7ee787>emptyDir</span>:<span style=color:#6e7681> </span>{}<span style=color:#6e7681>
</span></span></span></code></pre></div><ul><li><p><code>metadata</code>åŒ Pod çš„ yamlï¼Œè¿™é‡Œæä¸€ç‚¹ï¼šå¦‚æœæ²¡æœ‰æŒ‡æ˜ namespaceï¼Œé‚£ä¹ˆå°±æ˜¯ç”¨ kubectl é»˜è®¤çš„ namespaceï¼ˆå¦‚æœ kubectl é…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰æŒ‡æ˜ namespaceï¼Œé‚£ä¹ˆå°±æ˜¯ default ç©ºé—´ï¼‰ã€‚</p></li><li><p><code>spec</code>ï¼Œå¯ä»¥çœ‹åˆ° Deployment çš„<code>spec</code>å­—æ®µæ˜¯åœ¨ Pod çš„<code>spec</code>å†…å®¹å¤–â€œåŒ…äº†ä¸€å±‚â€ï¼Œé‚£å°±æ¥çœ‹ Deployment æœ‰å“ªäº›éœ€è¦æ³¨æ„çš„ï¼š</p></li><li><ul><li><p><code>replicas</code>ã€‚å‰¯æœ¬ä¸ªæ•°ã€‚ä¹Ÿå°±æ˜¯è¯¥ Deployment éœ€è¦èµ·å¤šå°‘ä¸ªç›¸åŒçš„ Podï¼Œ<strong>å¦‚æœç”¨æˆ·æˆåŠŸåœ¨ K8S ä¸­é…ç½®äº† nï¼ˆn>1ï¼‰ä¸ªï¼Œé‚£ä¹ˆ Deployment ä¼šç¡®ä¿åœ¨é›†ç¾¤ä¸­å§‹ç»ˆæœ‰ n ä¸ªæœåŠ¡åœ¨è¿è¡Œ</strong>ã€‚</p></li><li><p><code>template</code>ã€‚</p></li><li><ul><li><code>metadata</code>ï¼Œæ–°æ‰‹åŒå­¦å…ˆä¸ç®¡è¿™è¾¹çš„ä¿¡æ¯ã€‚</li><li><code>spec</code>ï¼Œä¼šå‘ç°è¿™å®Œå®Œå…¨å…¨æ˜¯ä¸Šæ–‡æåˆ°çš„ Pod çš„<code>spec</code>å†…å®¹ï¼Œåœ¨è¿™é‡Œå†™æ˜äº† Deployment ä¸‹å±ç®¡ç†çš„æ¯ä¸ª Pod çš„å…·ä½“å†…å®¹ã€‚</li></ul></li></ul></li></ul><h3 id=222-æ‰§è¡Œ-kubectl-å‘½ä»¤éƒ¨ç½²>2.2.2 æ‰§è¡Œ kubectl å‘½ä»¤éƒ¨ç½²<a hidden class=anchor aria-hidden=true href=#222-æ‰§è¡Œ-kubectl-å‘½ä»¤éƒ¨ç½²>#</a></h3><p>Deployment çš„éƒ¨ç½²åŠæ³•åŒ Podï¼š<code>kubectl create -f ${DEPLOYMENT_YAML}</code>ã€‚ç”±æ­¤å¯è§ï¼Œ<strong>K8S ä¼šæ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„<code>kind</code>å­—æ®µæ¥åˆ¤æ–­å…·ä½“è¦åˆ›å»ºçš„æ˜¯ä»€ä¹ˆèµ„æº</strong>ã€‚</p><p><strong>éƒ¨ç½²å®Œ deployment ä¹‹åï¼Œå¯ä»¥æŸ¥çœ‹åˆ°è‡ªåŠ¨åˆ›å»ºäº† ReplicaSet å’Œ Pod</strong>ï¼Œ</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img loading=lazy src=.%5c%e5%91%bd%e4%bb%a4.assets%0b2-904c600a9d2e18911ee342efcbcca6bb_r.jpg alt=img></p><p>ä»åå­—ä¸Šå¯ä»¥çœ‹å‡º,deploymentå’Œ replicaSetè¿˜æœ‰Podä¸‰è€…çš„åå­—æ˜¯ä¸€ä¸ªç´¯åŠ çš„æ–¹å¼, æ‰€ä»¥çœ‹podçš„åç§°, å¯ä»¥çœ‹åˆ°deploymentå’ŒreplicaSetçš„åå­—æ˜¯ä»€ä¹ˆ</p><p><a href=https://kubernetes.io/zh-cn/docs/reference/kubectl/ target=_blank rel=noopener>å‘½ä»¤è¡Œå·¥å…· (kubectl) | Kubernetes</a></p><p><a href=https://zhuanlan.zhihu.com/p/339008746 target=_blank rel=noopener>Kubernetes å…¥é—¨&è¿›é˜¶å®æˆ˜ - çŸ¥ä¹ (zhihu.com)</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://xiaokunji.com/zh/tags/kubernetes.html>Kubernetes</a></li><li><a href=https://xiaokunji.com/zh/tags/%E7%BB%BC%E5%90%88.html>ç»¼åˆ</a></li></ul><nav class=paginav><a class=prev href=https://xiaokunji.com/zh/%E7%BB%BC%E5%90%88/elk/elasticsearch/%E5%91%BD%E4%BB%A4.html><span class=title>Â« ä¸Šä¸€é¡µ</span><br><span>å‘½ä»¤</span></a>
<a class=next href=https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/java%E5%9F%BA%E7%A1%80/jvm/%E5%86%85%E5%AD%98%E5%8C%BA%E5%9F%9F.html><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>å†…å­˜åŒºåŸŸ</span></a></nav></footer></article></main><footer class=footer><span>Copyright
&copy;
-2023
<a href=https://xiaokunji.com/zh/ style=color:#939393>ç±³äºŒ</a>
All Rights Reserved</span>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<span id=busuanzi_container><span class="fa fa-user">ç”¨æˆ·æ•°:</span><span id=busuanzi_value_site_uv></span>
<span class="fa fa-eye">è®¿é—®æ•°:</span><span id=busuanzi_value_site_pv></span></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="å¤åˆ¶";function s(){t.innerHTML="å·²å¤åˆ¶ï¼",setTimeout(()=>{t.innerHTML="å¤åˆ¶"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>