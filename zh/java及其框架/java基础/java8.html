<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>java8 | ç±³äºŒ</title><meta name=keywords content=" ä»‹ç», 1. æ¡ˆä¾‹, 1.1 åŸºæœ¬ä½¿ç”¨, 1.2 å…¶ä»–åº”ç”¨, 2. é«˜é˜¶ä½¿ç”¨, 2.1 å—æ£€å‡½æ•°å¼æ¥å£:, 2.2  æ ¹æ®ç±»ä¸­æŸä¸ªå­—æ®µå»é‡ä»¥åŠåˆ†é¡µå¤„ç†, 2.3 è‡ªå®šä¹‰Collector"><meta name=description content="     "><meta name=author content="xkj"><link rel=canonical href=https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/java%E5%9F%BA%E7%A1%80/java8.html><link crossorigin=anonymous href=/assets/css/stylesheet.b3faf608c544858ba700943ffe182cb647f38432d29a07d73234965beacb26f6.css integrity="sha256-s/r2CMVEhYunAJQ//hgstkfzhDLSmgfXMjSWW+rLJvY=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://xiaokunji.com/img/Q.svg><link rel=icon type=image/png sizes=16x16 href=https://xiaokunji.com/img/Q.svg><link rel=icon type=image/png sizes=32x32 href=https://xiaokunji.com/img/Q.svg><link rel=apple-touch-icon href=https://xiaokunji.com/Q.svg><link rel=mask-icon href=https://xiaokunji.com/Q.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/java%E5%9F%BA%E7%A1%80/java8.html><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="java8"><meta property="og:description" content="     "><meta property="og:type" content="article"><meta property="og:url" content="https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/java%E5%9F%BA%E7%A1%80/java8.html"><meta property="article:section" content="javaåŠå…¶æ¡†æ¶"><meta property="article:published_time" content="2023-08-22T00:00:00+00:00"><meta property="article:modified_time" content="2023-09-01T16:11:13+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="java8"><meta name=twitter:description content="     "><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":4,"name":"java8","item":"https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/java%E5%9F%BA%E7%A1%80/java8.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"java8","name":"java8","description":"     ","keywords":[" ä»‹ç»"," 1. æ¡ˆä¾‹"," 1.1 åŸºæœ¬ä½¿ç”¨"," 1.2 å…¶ä»–åº”ç”¨"," 2. é«˜é˜¶ä½¿ç”¨"," 2.1 å—æ£€å‡½æ•°å¼æ¥å£:"," 2.2  æ ¹æ®ç±»ä¸­æŸä¸ªå­—æ®µå»é‡ä»¥åŠåˆ†é¡µå¤„ç†"," 2.3 è‡ªå®šä¹‰Collector"],"articleBody":"[TOC]\nä»‹ç» streamçš„ä¼˜åŠ¿:\nå¦‚è¡¨1-1ä¸­æ‰€ç¤ºï¼ŒStreamä¸­çš„æ“ä½œå¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼šä¸­é—´æ“ä½œä¸ç»“æŸæ“ä½œï¼Œ\nä¸­é—´æ“ä½œåªæ˜¯å¯¹æ“ä½œè¿›è¡Œäº†è®°å½•ï¼Œåªæœ‰ç»“æŸæ“ä½œæ‰ä¼šè§¦å‘å®é™…çš„è®¡ç®—ï¼ˆå³æƒ°æ€§æ±‚å€¼ï¼‰ï¼Œè¿™ä¹Ÿæ˜¯Streamåœ¨è¿­ä»£å¤§é›†åˆæ—¶é«˜æ•ˆçš„åŸå› ä¹‹ä¸€ã€‚\nä¸­é—´æ“ä½œåˆå¯ä»¥åˆ†ä¸ºæ— çŠ¶æ€ï¼ˆStatelessï¼‰æ“ä½œä¸æœ‰çŠ¶æ€ï¼ˆStatefulï¼‰æ“ä½œï¼Œå‰è€…æ˜¯æŒ‡å…ƒç´ çš„å¤„ç†ä¸å—ä¹‹å‰å…ƒç´ çš„å½±å“ï¼›åè€…æ˜¯æŒ‡è¯¥æ“ä½œåªæœ‰æ‹¿åˆ°æ‰€æœ‰å…ƒç´ ä¹‹åæ‰èƒ½ç»§ç»­ä¸‹å»ã€‚\nç»“æŸæ“ä½œåˆå¯ä»¥åˆ†ä¸ºçŸ­è·¯ä¸éçŸ­è·¯æ“ä½œï¼Œè¿™ä¸ªåº”è¯¥å¾ˆå¥½ç†è§£ï¼Œå‰è€…æ˜¯æŒ‡é‡åˆ°æŸäº›ç¬¦åˆæ¡ä»¶çš„å…ƒç´ å°±å¯ä»¥å¾—åˆ°æœ€ç»ˆç»“æœï¼›è€Œåè€…æ˜¯æŒ‡å¿…é¡»å¤„ç†æ‰€æœ‰å…ƒç´ æ‰èƒ½å¾—åˆ°æœ€ç»ˆç»“æœã€‚\næ¥è‡ª http://www.cnblogs.com/Dorae/p/7779246.html å¤§æ¦‚æ€»ç»“ä¸€ä¸‹: æµå¼è¿­ä»£é›†åˆæ“ä½œ,ä¸­é—´æ“ä½œä¸ä¼šå®é™…è®¡ç®—,è€Œä¸”ä¼šå¹¶è¡Œå¤„ç†,(ä¸€ä¸ªæ•°æ®ä¼šåŒæ—¶è¢«å¤„ç†),ç­‰åˆ°äº†ç»“æŸæ“ä½œæ‰ä¼šè§¦å‘æ“ä½œ(å’Œsparkå¾ˆåƒ),java8çš„foreachè¿˜æœ‰å¹¶å‘å¤„ç†,åœ¨æ•°æ®é‡å¾ˆå¤§æ—¶foreachå’Œæµå¼çš„ä¼˜åŠ¿æ‰ä¼šä½“ç°\n1. æ¡ˆä¾‹ å‡½æ•°å¼æ¥å£(å¯¼è¯»): é‚£äº›åœ°æ–¹å¯ä»¥ç”¨,çœ‹æµçš„å…¥å‚å°±è¡Œäº†\nFunction =\u003e å‡½æ•°,æœ‰è¾“å…¥æœ‰è¾“å‡º å‚å…¥å‚æ•°T , è¿”å› R (ç”¨å¾—å¤š)\npredicate =\u003e è°“è¯/åˆ¤å®š, æœ‰è¾“å…¥,è¿”å›å¸ƒå°”å€¼,ä¸»è¦ä½œä¸ºä¸€ä¸ªè°“è¯æ¼”ç®—æ¨å¯¼çœŸå‡å€¼å­˜åœ¨ (ç”¨å¾—å¤š)\nconsumer =\u003e è°“è¯/æ¶ˆè´¹,æœ‰è¾“å…¥æ— è¾“å‡º,\nsupplier =\u003e æä¾›, æ— è¾“å…¥æœ‰è¾“å‡º,\n(ç‰¹æ®Š) Operator =\u003e ç»§æ‰¿äº BiFunction ,æ‰€ä»¥ä¹Ÿå±äºfunction, ç®—å­OperatoråŒ…æ‹¬ï¼šUnaryOperatorå’ŒBinaryOperatorã€‚åˆ†åˆ«å¯¹åº”å•å…ƒç®—å­å’ŒäºŒå…ƒç®—å­ã€‚å…¶ä¸­BinaryOperator å¯ç”¨äºreduce\næ¥è‡ª https://blog.csdn.net/lz710117239/article/details/76192629 æ¥è‡ª http://www.sohu.com/a/123958799_465959 1.1 åŸºæœ¬ä½¿ç”¨ // Function =\u003e å°±æ˜¯ä¸€ä¸ªå‡½æ•°,æœ‰è¾“å…¥è¾“å‡º // æ¥æ”¶ä¸€ä¸ªå‚æ•° Function\u003cInteger, Integer\u003e add = x -\u003e x + 1; System.out.println(add.apply(4)); // è¾“å‡º: 5 // æ¥æ”¶ä¸¤ä¸ªå‚æ•° BiFunction\u003cString, Integer, Person\u003e addxy2Str = (x, y) -\u003e new Person(x, y); System.out.println(addxy2Str.apply(\"xkj\", 6)); // è¾“å‡º: å¯¹è±¡ä¿¡æ¯ String nameStr=\"xkj,xkq,xkk,qoo\"; List\u003cString\u003e nameList = Arrays.asList(nameStr.split(\",\")); List\u003cPerson\u003e personList = new ArrayList\u003c\u003e(); Person p1=new Person(\"xkj\", 4); personList.add(p1); // PredicateÂ =\u003e å¯ä»¥ç”¨æ¥è¿‡æ»¤,æŸ¥æ‰¾ //åŠŸèƒ½:æ‰¾åˆ°å« xkj çš„å­—ç¬¦ä¸²Â =\u003eÂ è¿”å›é›†åˆÂ || è¿”å›å¸ƒå°” Predicate\u003cString\u003e isConxkj= n-\u003en.contains(\"xkj\"); List\u003cString\u003e xkjInfo = nameList.stream().filter(isConxkj).collect(Collectors.toList());//æŒ‰ isConxkj è¿‡æ»¤ boolean isHaveXkj = nameList.stream().anyMatch(isConxkj); // æŒ‰isConxkj æ‰¾åˆ°ä»»æ„ä¸€ä¸ªå°±è¡Œ System.out.println(xkjInfo); // è¾“å‡ºÂ :Â xkj System.out.println(isHaveXkj); // è¾“å‡º: true // Consumer =\u003e åªæœ‰å…¥å‚æ²¡æœ‰è¿”å‚,å¯ä»¥åšä¸€äº›æ•°æ®å¤„ç† å¯ä»¥ç”¨åœ¨forEachä¸­ç»™listä¿®æ”¹å±æ€§å€¼, Consumer\u003cPerson\u003e addPrefix = p-\u003ep.setAge(30);; personList.forEach(System.out::println);//ä¿®æ”¹å‰Â // è¾“å‡º:Person [name=xkj, age=4] personList.stream().forEach(addPrefix); personList.forEach(System.out::println);//ä¿®æ”¹åÂ // è¾“å‡º : Person [name=xkj, age=30] //Supplier =\u003e å¯ä»¥ç”¨æ¥å–é…ç½®ä¿¡æ¯(è¿˜æ˜¯å®šä¹‰å˜é‡æ¥çˆ½),è¿˜æœ‰newå¯¹è±¡(æˆ‘æ„Ÿè§‰è¿˜æ˜¯ç›´æ¥newçˆ½å¿«)Â (æš‚æ—¶ä¸çŸ¥é“åœºæ™¯) Supplier\u003cPerson\u003e person=Person::new; Person p = person.get(); // æ¯ä¸ªgetéƒ½æ˜¯ä¸ªæ–°çš„å¯¹è±¡ System.out.println(p);Â //è¾“å‡º: Person [name=null, age=0] /** * åˆ¤æ–­è¯­å¥æ˜¯å¦æ­£ç¡®æ‰§è¡Œ,è¿”å›è¯­å¥çš„è¿”å›å€¼,æŠ¥é”™åˆ™ä¸ºnull * æ¯”å¦‚,ä¼ å…¥æ ¼å¼åŒ–æ—¶é—´è¯­å¥,ç¡®å®šæ—¶é—´æ˜¯å¦åˆæ³• */ public static \u003cT\u003e T of(Supplier\u003c? extends T\u003e supplier) { try { return supplier.get(); } catch (Throwable t) { return null; } } @Test public void testCollect() { initInfo(); Predicate\u003cString\u003e isConxkj= n-\u003en.contains(\"xk\"); //æŒ‰ isConxkj è®¡æ•° Long xkjCount = nameList.stream().filter(isConxkj).collect(Collectors.counting()); System.out.println(xkjCount); //æŒ‰ isConxkj åˆ†åŒºå¹¶å¯¹ç»“æœè®¡æ•° (å»æ‰åé¢çš„è®¡æ•°å‡½æ•°,å°±å¯ä»¥å¾—åˆ°å…·ä½“çš„å€¼) Map\u003cBoolean, Long\u003e xkjCountMap = nameList.stream().collect(Collectors.partitioningBy(n-\u003en.contains(\"xk\"),Collectors.counting())); System.out.println(xkjCountMap); //æŒ‰ isConxkj è¿‡æ»¤,å¾—åˆ°çš„ç»“æœç”¨,è¿æ¥ String xkJoin = nameList.stream().filter(isConxkj).collect(Collectors.joining(\",\")); System.out.println(xkJoin); //æŒ‰ isConxkj è¿‡æ»¤,å¾—åˆ°çš„ç»“æœç”¨,è¿æ¥ Map\u003cObject, Object\u003e xkMap = nameList.stream().filter(isConxkj).collect(Collectors.toMap(k-\u003ek+\"_zz\", v-\u003ev)); System.out.println(xkMap); //æŒ‰ åå­—map,personä¸ºval Map\u003cObject, Person\u003e xkMapByName = personList.stream().collect(Collectors.toMap(p-\u003ep.getName(),p-\u003ep)); System.out.println(xkMapByName); //åˆ†ç»„åå»æœ€å¤§å€¼ Map\u003cInteger, Optional\u003cUsers\u003e\u003e collect = users.stream().collect(Collectors.groupingBy(Users::getAge, Collectors.maxBy(Comparator.comparing(Users::getId)))); // https://www.jianshu.com/p/21b20c375599 æ›´å¤šä½¿ç”¨åˆ†ç»„ // https://cloud.tencent.com/developer/article/1863390 // æŒ‰å¹´é¾„åˆ†ç»„ Map\u003cInteger, List\u003cPerson\u003e\u003e groupMapByAge = personList.stream().collect(Collectors.groupingBy(p-\u003ep.getAge())); System.out.println(groupMapByAge); // ç”¨mapæ“ä½œæ•°å€¼ç±»å‹æ—¶æ˜¯æœ‰è£…ç®±å¤„ç†çš„,å¤šå°‘æœ‰æŸè€—,ç”¨mapToLongå°±æ˜¯å°†å€¼å˜æˆåŸºæœ¬ç±»å‹,ç„¶åç”¨boxedå˜æˆæ™®é€šæµ Long decrease = ageList.stream().mapToLong(a-\u003ea).boxed().reduce((x,y)-\u003ex-y).orElse(0L); System.out.println(decrease); // åˆå¹¶list List\u003cServiceOrder\u003e serviceOrderList = new ArrayList\u003c\u003e(); List\u003cString\u003e projectNoAll = serviceOrderList.stream().flatMap(s-\u003es.getProjectNos().stream()).collect(Collectors.toList()); List\u003cAClass\u003e unionResult = Stream.of(serviceOrderList, serviceOrderList).flatMap(Collection::stream).collect(Collectors.toList()); @Test public void testMR() { initInfo(); BinaryOperator\u003cString\u003e lk = (x, y) -\u003e x + y; Optional\u003cString\u003e reduceStr = nameList.stream().map(n -\u003e n).reduce(lk);//å°†æ‰€æœ‰çš„å€¼æ‹¼èµ·æ¥ System.out.println(reduceStr.get()); } T reduce(T identity, BinaryOperator accumulator)\nç›¸å¯¹äºä¸€ä¸ªå‚æ•°çš„æ–¹æ³•æ¥è¯´ï¼Œå®ƒå¤šäº†ä¸€ä¸ªTç±»å‹çš„å‚æ•°ï¼›å®é™…ä¸Šå°±ç›¸å½“äºéœ€è¦è®¡ç®—çš„å€¼åœ¨Streamçš„åŸºç¡€ä¸Šå¤šäº†ä¸€ä¸ªåˆå§‹åŒ–çš„å€¼ eg.\nStream\u003cString\u003e s = Stream.of(\"test\", \"t1\", \"t2\", \"teeeee\", \"aaaa\", \"taaa\"); System.out.println(s.reduce(\"[value]:\", (s1, s2) -\u003e s1.concat(s2))); // [value]:testt1t2teeeeeaaaataaa æ¥è‡ª https://blog.csdn.net/icarusliu/article/details/79504602 1.2 å…¶ä»–åº”ç”¨ json æ ¼å¼åŒ–ä½¿ç”¨, å€¼ä¸ä¸ºnullçš„æ‰è¾“å‡º\nreturn JSON.toJSONString(val,(PropertyFilter)((obj, name, value) -\u003e value != null)); // NameFilter: å¤„ç†nameå­—æ®µ,(æ¯”å¦‚å¯¹nameåŠ ä¸ªåç¼€) // ValueFilter: å¤„ç†valueå­—æ®µ,(æ¯”å¦‚å¯¹valueåŠ ä¸ªåç¼€) // PropertyFilter: å¤„ç†objå­—æ®µ 2. é«˜é˜¶ä½¿ç”¨ 2.1 å—æ£€å‡½æ•°å¼æ¥å£: package com.gree.ecommerce.utils.function; import java.util.Optional; /** * (æ£€æŸ¥)æŠ›å‡ºlambdaä¸­å¼‚å¸¸æƒ…å†µ * * @author A80080 * @createDate 2021/4/21 */ public interface CheckFun { interface Function\u003cT, R\u003e { /** * Functionç±»å‹ * * @param function å¤„ç†å‡½æ•° * @param p å…¥å‚ * @return å¤„ç†ç»“æœ, æŠ¥é”™è¿”å› Optional.empty(); * @author A80080 * @createDate 2021/4/21 */ static \u003cT, R\u003e Optional\u003cR\u003e tryOf(Function\u003cT, R\u003e function, T p) { try { return Optional.ofNullable(function.apply(p)); } catch (Throwable t) { return Optional.empty(); } } /** * å‚ç…§ java.util.function.Function * * @param t å…¥å‚ * @return R ç±»å‹æ•°æ® * @throws Exception å¼‚å¸¸ * @author A80080 * @createDate 2021/4/21 */ R apply(T t) throws Exception; } interface Supplier\u003cT\u003e { /** * Supplier ç±»å‹ * * @param supplier å¤„ç†å‡½æ•° * @return è¿”å›è¯­å¥çš„è¿”å›å€¼(optional), æŠ¥é”™åˆ™ä¸ºOptional.empty() * @author A80080 */ static \u003cT\u003e Optional\u003cT\u003e tryOf(CheckFun.Supplier\u003c? extends T\u003e supplier) { try { return Optional.ofNullable(supplier.get()); } catch (Throwable t) { return Optional.empty(); } } /** * å‚ç…§ java.util.function.Supplier * * @return T ç±»å‹ * @throws Exception å¼‚å¸¸ * @author A80080 * @createDate 2021/4/21 */ T get() throws Exception; } interface Consumer\u003cT\u003e { /** * consumer ç±»å‹ * æŠ¥é”™å°†å¿½ç•¥ * * @param consumer å¤„ç†å‡½æ•° * @param p å…¥å‚ * @author A80080 * @createDate 2021/4/21 */ static \u003cT\u003e void tryOf(CheckFun.Consumer\u003cT\u003e consumer, T p) { try { consumer.accept(p); } catch (Throwable ignored) { } } /** * å‚ç…§ java.util.function.Consumer * * @param t å…¥å‚ * @throws Exception å¼‚å¸¸ * @author A80080 * @createDate 2021/4/21 */ void accept(T t) throws Exception; } interface Predicate\u003cT\u003e { /** * Predicateç±»å‹ * * @param predicate å¤„ç†å‡½æ•° * @param p å…¥å‚ * @return å¤„ç†ç»“æœ, æŠ¥é”™è¿”å› false * @author A80080 * @createDate 2021/4/21 */ static \u003cT\u003e boolean tryOf(CheckFun.Predicate\u003cT\u003e predicate, T p) { try { return predicate.test(p); } catch (Throwable t) { return false; } } /** * å‚ç…§ java.util.function.Predicate * * @param t å…¥å‚ * @return boolean * @throws Exception å¼‚å¸¸ * @author A80080 * @createDate 2021/4/21 */ boolean test(T t) throws Exception; } } // ä½¿ç”¨æ¡ˆä¾‹ @Test public void test() { Stream.of(\"uNameCookie\", \"uidCookie\", \"loginNameCookie\", \"loginStatusCookie\", \"mobileLoginTokenCookie\") .filter(c-\u003e!CheckFun.Predicate.tryOf(a-\u003eURLEncoder.encode(c, \"utf-8\").equals(\"\"),c)) .peek(c -\u003e c.concat(CheckFun.Supplier.tryOf(() -\u003e URLEncoder.encode(c, \"utf-8\")).orElse(c))) .map(c -\u003e c.concat(CheckFun.Function.tryOf(a -\u003e URLEncoder.encode(a, \"utf-8\"), c).orElse(c))) .peek(c -\u003e CheckFun.Consumer.tryOf(x -\u003e c.concat(URLEncoder.encode(x, \"utf-8\")), c)) .forEach(System.out::println); } 2.2 æ ¹æ®ç±»ä¸­æŸä¸ªå­—æ®µå»é‡ä»¥åŠåˆ†é¡µå¤„ç† // æ ¹æ®ç±»ä¸­æŸä¸ªå­—æ®µå»é‡ @Test public void should_return_2_because_distinct_by_age() { userList = userList.stream() .filter(distinctByKey(User::getName)) .collect(Collectors.toList()); userList.forEach(System.out::println); assertEquals(2, userList.size()); } private static \u003cT, R\u003e Predicate\u003cT\u003e distinctByKey(Function\u003cT, R\u003e keyExtractor) { Set\u003cR\u003e seen = ConcurrentHashMap.newKeySet(); return t -\u003e seen.add(keyExtractor.apply(t)); } // é“¾æ¥ï¼šhttps://hacpai.com/article/1545321970124 divideBatchHandler(nameList,System.out::println); } /** * è¿ç”¨åœºæ™¯:å½“æ•°æ®é‡è¿‡å¤§,éœ€è¦åˆ†æ‰¹å¤„ç†æ—¶ * @author xkj * @param dataList éœ€è¦å¤„ç†çš„æ•°æ® * @param consumer å¤„ç†å‡½æ•° * @since */ public \u003cT\u003e void divideBatchHandler(List\u003cT\u003e dataList, Consumer\u003cList\u003cT\u003e\u003e consumer) { Optional.ofNullable(dataList).ifPresent(list -\u003e IntStream.range(0, list.size()) .mapToObj(i -\u003e new AbstractMap.SimpleImmutableEntry\u003c\u003e(i, list.get(i)))// ç»™æ•°æ®ç¼–å· .collect(Collectors.groupingBy( e -\u003e e.getKey() / 10, Collectors.mapping(Map.Entry::getValue, Collectors.toList()))) // æŒ‰ç¼–å·åˆ†æ‰¹å¹¶åˆå¹¶ç¼–å·å¯¹åº”çš„å€¼ .values() .parallelStream()// å¹¶è¡Œå¤„ç† .forEach(consumer) // æ‰§è¡Œå¤„ç†å‡½æ•° ); } 2.3 è‡ªå®šä¹‰Collector Collectorä¸»è¦åŒ…å«äº”ä¸ªå‚æ•°ï¼Œå®ƒçš„è¡Œä¸ºä¹Ÿæ˜¯ç”±è¿™äº”ä¸ªå‚æ•°æ¥å®šä¹‰çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\nCollectorå®ç°çš„ä¸‰ä¸ªæ³›å‹å…·ä½“æ˜¯ä»€ä¹ˆï¼š\nTï¼ˆè¾“å…¥çš„å…ƒç´ ç±»å‹ï¼‰ï¼šT Aï¼ˆç´¯ç§¯ç»“æœçš„å®¹å™¨ç±»å‹ï¼‰ï¼š Rï¼ˆæœ€ç»ˆç”Ÿæˆçš„ç»“æœç±»å‹ï¼‰ï¼š public interface Collector\u003cT, A, R\u003e { // supplierå‚æ•°ç”¨äºç”Ÿæˆç»“æœå®¹å™¨ï¼Œå®¹å™¨ç±»å‹ä¸ºA Supplier\u003cA\u003e supplier(); // accumulatorç”¨äºæ¶ˆè´¹å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯å½’çº³å…ƒç´ ï¼Œè¿™é‡Œçš„Tå°±æ˜¯å…ƒç´ ï¼Œå®ƒä¼šå°†æµä¸­çš„å…ƒç´ ä¸€ä¸ªä¸€ä¸ªä¸ç»“æœå®¹å™¨Aå‘ç”Ÿæ“ä½œ BiConsumer\u003cA, T\u003e accumulator(); // combinerç”¨äºä¸¤ä¸ªä¸¤ä¸ªåˆå¹¶å¹¶è¡Œæ‰§è¡Œçš„çº¿ç¨‹çš„æ‰§è¡Œç»“æœï¼Œå°†å…¶åˆå¹¶ä¸ºä¸€ä¸ªæœ€ç»ˆç»“æœA BinaryOperator\u003cA\u003e combiner(); // finisherç”¨äºå°†ä¹‹å‰æ•´åˆå®Œçš„ç»“æœRè½¬æ¢æˆä¸ºA Function\u003cA, R\u003e finisher(); // characteristicsè¡¨ç¤ºå½“å‰Collectorçš„ç‰¹å¾å€¼ï¼Œè¿™æ˜¯ä¸ªä¸å¯å˜Set Set\u003cCharacteristics\u003e characteristics(); } æšä¸¾å¸¸é‡Characteristics ä¸­å…±æœ‰ä¸‰ä¸ªç‰¹å¾å€¼ï¼Œå®ƒä»¬çš„å…·ä½“å«ä¹‰å¦‚ä¸‹ï¼š\nCONCURRENTï¼šè¡¨ç¤ºç»“æœå®¹å™¨åªæœ‰ä¸€ä¸ªï¼ˆå³ä½¿æ˜¯åœ¨å¹¶è¡Œæµçš„æƒ…å†µä¸‹ï¼‰ã€‚åªæœ‰åœ¨å¹¶è¡Œæµä¸”æ”¶é›†å™¨ä¸å…·å¤‡æ­¤ç‰¹æ€§çš„æƒ…å†µä¸‹ï¼Œcombiner()è¿”å›çš„lambdaè¡¨è¾¾å¼æ‰ä¼šæ‰§è¡Œï¼ˆä¸­é—´ç»“æœå®¹å™¨åªæœ‰ä¸€ä¸ªå°±æ— éœ€åˆå¹¶ï¼‰ã€‚è®¾ç½®æ­¤ç‰¹æ€§æ—¶æ„å‘³ç€å¤šä¸ªçº¿ç¨‹å¯ä»¥å¯¹åŒä¸€ä¸ªç»“æœå®¹å™¨è°ƒç”¨ï¼Œå› æ­¤ç»“æœå®¹å™¨å¿…é¡»æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚\nUNORDEREDï¼šè¡¨ç¤ºæµä¸­çš„å…ƒç´ æ— åºã€‚\nIDENTITY_FINISHï¼šè¡¨ç¤ºä¸­é—´ç»“æœå®¹å™¨ç±»å‹ä¸æœ€ç»ˆç»“æœç±»å‹ä¸€è‡´ã€‚è®¾ç½®æ­¤ç‰¹æ€§æ—¶finiser()æ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨ã€‚\n/** è¯¥æ¡ˆä¾‹ä½œç”¨: å¯¹é›†åˆå…ƒç´  æ±‚å’Œå¹¶è½¬æˆå­—ç¬¦ä¸² */ @Test public void Test(){ // 1. ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸´æ—¶å€¼çš„å®¹å™¨ // 2. ç¬¬äºŒä¸ªå‚æ•°æ˜¯æŠŠå…¥å‚æ”¾åˆ°å®¹å™¨ä¸­ // 3. ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æŠŠç¬¬äºŒæ­¥çš„å€¼åšä¸€ä¸ªç»“åˆæ”¾åˆ°å®¹å™¨ä¸­ // 4. ç¬¬å››ä¸ªå‚æ•°æŠŠå®¹å™¨ä¸­çš„å€¼è½¬åŒ–æˆç»“æœç±»å‹ // 5. ç¬¬äº”ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªç‰¹å¾å€¼ BiConsumer\u003cList\u003cLong\u003e, Long\u003e accumulator = (x, y) -\u003e { x.add(y); return; }; BinaryOperator\u003cList\u003cLong\u003e\u003e combiner = (x, y) -\u003e { x.addAll(y); return x; }; Function\u003cList\u003cLong\u003e, String\u003e func = x -\u003e String.valueOf(x.stream().mapToLong(y-\u003e y).sum()); Collector\u003cLong, List\u003cLong\u003e, String\u003e longSupplier = Collector.of(ArrayList::new, accumulator, combiner,func, Collector.Characteristics.UNORDERED); String collect = Stream.of(1, 1, 2, 2) .map(Long::new) .collect(longSupplier); System.out.println(\"collect = \" + collect); } java8æ–°ç‰¹æ€§(å››) Collectorï¼ˆæ”¶é›†å™¨ï¼‰_æˆæµå¹´çš„åšå®¢-CSDNåšå®¢_collector JavaåŸºç¡€ç³»åˆ—-Collectorå’ŒCollectors - ç®€ä¹¦ (jianshu.com) ","wordCount":"3170","inLanguage":"zh","datePublished":"2023-08-22T00:00:00Z","dateModified":"2023-09-01T16:11:13.270466518Z","author":{"@type":"Person","name":"xkj"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/java%E5%9F%BA%E7%A1%80/java8.html"},"publisher":{"@type":"Organization","name":"ç±³äºŒ","logo":{"@type":"ImageObject","url":"https://xiaokunji.com/img/Q.svg"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xiaokunji.com/zh/ accesskey=h title="ç±³äºŒ (Alt + H)"><img src=https://xiaokunji.com/img/Q.svg alt aria-label=logo height=35>ç±³äºŒ</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://xiaokunji.com/en/ title=English aria-label=English>English</a></li></ul></div></div><ul id=menu><li><a href=https://xiaokunji.com/zh/ title=ğŸ ä¸»é¡µ><span>ğŸ ä¸»é¡µ</span></a></li><li><a href=https://xiaokunji.com/zh/search.html title="ğŸ”æœç´¢ (Alt + /)" accesskey=/><span>ğŸ”æœç´¢</span></a></li><li><a href=https://xiaokunji.com/zh/post.html title=ğŸ“šæ–‡ç« ><span>ğŸ“šæ–‡ç« </span></a></li><li><a href=https://xiaokunji.com/zh/archives.html title=â±æ—¶é—´è½´><span>â±æ—¶é—´è½´</span></a></li><li><a href=https://xiaokunji.com/zh/tags.html title=ğŸ”–æ ‡ç­¾><span>ğŸ”–æ ‡ç­¾</span></a></li><li><a href=https://xiaokunji.com/zh/categories.html title=ğŸ“–åˆ†ç±»><span>ğŸ“–åˆ†ç±»</span></a></li><li><a href=https://xiaokunji.com/zh/links.html title=ğŸ¤å‹é“¾><span>ğŸ¤å‹é“¾</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><nav aria-label=breadcrumb><ul><a href=https://xiaokunji.com/zh/>ğŸ </a> <span>></span>
<a href=https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6.html>javaåŠå…¶æ¡†æ¶</a> <span>></span>
<a href=https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/java%E5%9F%BA%E7%A1%80.html>javaåŸºç¡€</a> <span>></span></ul></nav><h1 class=post-title>java8</h1><div class=post-description></div><div class=post-meta>åˆ›å»º:&nbsp;<span title='2023-08-22 00:00:00 +0000 UTC'>2023-08-22</span>&nbsp;Â·&nbsp;æ›´æ–°:&nbsp;2023-09-01&nbsp;Â·&nbsp;7 åˆ†é’Ÿ&nbsp;Â·&nbsp;xkj
&nbsp;|&nbsp;åˆ†ç±»: &nbsp;<ul class=post-categories-meta><a href=https://xiaokunji.com/zh/categories/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6.html>javaåŠå…¶æ¡†æ¶</a></ul><span id=busuanzi_container_page_pv>&nbsp;| è®¿é—®: <span id=busuanzi_value_page_pv></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#%e4%bb%8b%e7%bb%8d aria-label=ä»‹ç»>ä»‹ç»</a></li><li><a href=#1-%e6%a1%88%e4%be%8b aria-label="1. æ¡ˆä¾‹">1. æ¡ˆä¾‹</a><ul><li><a href=#11-%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8 aria-label="1.1 åŸºæœ¬ä½¿ç”¨">1.1 åŸºæœ¬ä½¿ç”¨</a></li><li><a href=#12-%e5%85%b6%e4%bb%96%e5%ba%94%e7%94%a8 aria-label="1.2 å…¶ä»–åº”ç”¨">1.2 å…¶ä»–åº”ç”¨</a></li></ul></li><li><a href=#2-%e9%ab%98%e9%98%b6%e4%bd%bf%e7%94%a8 aria-label="2. é«˜é˜¶ä½¿ç”¨">2. é«˜é˜¶ä½¿ç”¨</a><ul><li><a href=#21-%e5%8f%97%e6%a3%80%e5%87%bd%e6%95%b0%e5%bc%8f%e6%8e%a5%e5%8f%a3 aria-label="2.1 å—æ£€å‡½æ•°å¼æ¥å£:">2.1 å—æ£€å‡½æ•°å¼æ¥å£:</a></li><li><a href=#22--%e6%a0%b9%e6%8d%ae%e7%b1%bb%e4%b8%ad%e6%9f%90%e4%b8%aa%e5%ad%97%e6%ae%b5%e5%8e%bb%e9%87%8d%e4%bb%a5%e5%8f%8a%e5%88%86%e9%a1%b5%e5%a4%84%e7%90%86 aria-label="2.2  æ ¹æ®ç±»ä¸­æŸä¸ªå­—æ®µå»é‡ä»¥åŠåˆ†é¡µå¤„ç†">2.2 æ ¹æ®ç±»ä¸­æŸä¸ªå­—æ®µå»é‡ä»¥åŠåˆ†é¡µå¤„ç†</a></li><li><a href=#23-%e8%87%aa%e5%ae%9a%e4%b9%89collector aria-label="2.3 è‡ªå®šä¹‰Collector">2.3 è‡ªå®šä¹‰Collector</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>[TOC]</p><h1 id=ä»‹ç»>ä»‹ç»<a hidden class=anchor aria-hidden=true href=#ä»‹ç»>#</a></h1><p><strong>streamçš„ä¼˜åŠ¿:</strong></p><p><img loading=lazy src=https://gitee.com/xiaokunji/my-images/raw/master/myMD/java8-steam.png alt=image-20210429111143136></p><p>å¦‚è¡¨1-1ä¸­æ‰€ç¤ºï¼Œ<strong>Streamä¸­çš„æ“ä½œå¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»</strong>ï¼š<u>ä¸­é—´æ“ä½œä¸ç»“æŸæ“ä½œ</u>ï¼Œ</p><p>â€ƒâ€ƒä¸­é—´æ“ä½œåªæ˜¯å¯¹æ“ä½œè¿›è¡Œäº†è®°å½•ï¼Œåªæœ‰ç»“æŸæ“ä½œæ‰ä¼šè§¦å‘å®é™…çš„è®¡ç®—ï¼ˆå³æƒ°æ€§æ±‚å€¼ï¼‰ï¼Œè¿™ä¹Ÿæ˜¯Streamåœ¨è¿­ä»£å¤§é›†åˆæ—¶é«˜æ•ˆçš„åŸå› ä¹‹ä¸€ã€‚</p><p>â€ƒâ€ƒä¸­é—´æ“ä½œåˆå¯ä»¥åˆ†ä¸ºæ— çŠ¶æ€ï¼ˆStatelessï¼‰æ“ä½œä¸æœ‰çŠ¶æ€ï¼ˆStatefulï¼‰æ“ä½œï¼Œå‰è€…æ˜¯æŒ‡å…ƒç´ çš„å¤„ç†ä¸å—ä¹‹å‰å…ƒç´ çš„å½±å“ï¼›åè€…æ˜¯æŒ‡è¯¥æ“ä½œåªæœ‰æ‹¿åˆ°æ‰€æœ‰å…ƒç´ ä¹‹åæ‰èƒ½ç»§ç»­ä¸‹å»ã€‚</p><p>â€ƒâ€ƒç»“æŸæ“ä½œåˆå¯ä»¥åˆ†ä¸ºçŸ­è·¯ä¸éçŸ­è·¯æ“ä½œï¼Œè¿™ä¸ªåº”è¯¥å¾ˆå¥½ç†è§£ï¼Œå‰è€…æ˜¯æŒ‡é‡åˆ°æŸäº›ç¬¦åˆæ¡ä»¶çš„å…ƒç´ å°±å¯ä»¥å¾—åˆ°æœ€ç»ˆç»“æœï¼›è€Œåè€…æ˜¯æŒ‡å¿…é¡»å¤„ç†æ‰€æœ‰å…ƒç´ æ‰èƒ½å¾—åˆ°æœ€ç»ˆç»“æœã€‚</p><blockquote><p>æ¥è‡ª <a href=http://www.cnblogs.com/Dorae/p/7779246.html target=_blank rel=noopener>http://www.cnblogs.com/Dorae/p/7779246.html</a></p></blockquote><p>å¤§æ¦‚æ€»ç»“ä¸€ä¸‹: <u>æµå¼è¿­ä»£é›†åˆæ“ä½œ,ä¸­é—´æ“ä½œä¸ä¼šå®é™…è®¡ç®—,è€Œä¸”ä¼šå¹¶è¡Œå¤„ç†,(ä¸€ä¸ªæ•°æ®ä¼šåŒæ—¶è¢«å¤„ç†),ç­‰åˆ°äº†ç»“æŸæ“ä½œæ‰ä¼šè§¦å‘æ“ä½œ(å’Œsparkå¾ˆåƒ),java8çš„foreachè¿˜æœ‰å¹¶å‘å¤„ç†,åœ¨æ•°æ®é‡å¾ˆå¤§æ—¶foreachå’Œæµå¼çš„ä¼˜åŠ¿æ‰ä¼šä½“ç°</u></p><p><img loading=lazy src=https://github.com/xiaokunji/MyImagesBed/blob/master/mdImagesimage-20210824141738190.png alt=img></p><h1 id=1-æ¡ˆä¾‹>1. æ¡ˆä¾‹<a hidden class=anchor aria-hidden=true href=#1-æ¡ˆä¾‹>#</a></h1><p>å‡½æ•°å¼æ¥å£(å¯¼è¯»): é‚£äº›åœ°æ–¹å¯ä»¥ç”¨,çœ‹æµçš„å…¥å‚å°±è¡Œäº†</p><ol><li><p>Function => å‡½æ•°,æœ‰è¾“å…¥æœ‰è¾“å‡º å‚å…¥å‚æ•°T , è¿”å› R (ç”¨å¾—å¤š)</p></li><li><p>predicate => è°“è¯/åˆ¤å®š, æœ‰è¾“å…¥,è¿”å›å¸ƒå°”å€¼,ä¸»è¦ä½œä¸ºä¸€ä¸ªè°“è¯æ¼”ç®—æ¨å¯¼çœŸå‡å€¼å­˜åœ¨ (ç”¨å¾—å¤š)</p></li><li><p>consumer => è°“è¯/æ¶ˆè´¹,æœ‰è¾“å…¥æ— è¾“å‡º,</p></li><li><p>supplier => æä¾›, æ— è¾“å…¥æœ‰è¾“å‡º,</p></li><li><p>(ç‰¹æ®Š) Operator => ç»§æ‰¿äº BiFunction ,æ‰€ä»¥ä¹Ÿå±äºfunction, ç®—å­OperatoråŒ…æ‹¬ï¼šUnaryOperatorå’ŒBinaryOperatorã€‚åˆ†åˆ«å¯¹åº”å•å…ƒç®—å­å’ŒäºŒå…ƒç®—å­ã€‚å…¶ä¸­BinaryOperator å¯ç”¨äºreduce</p><blockquote><p>æ¥è‡ª <a href=https://blog.csdn.net/lz710117239/article/details/76192629 target=_blank rel=noopener>https://blog.csdn.net/lz710117239/article/details/76192629</a></p><p>æ¥è‡ª <a href=http://www.sohu.com/a/123958799_465959 target=_blank rel=noopener>http://www.sohu.com/a/123958799_465959</a></p></blockquote></li></ol><h2 id=11-åŸºæœ¬ä½¿ç”¨>1.1 åŸºæœ¬ä½¿ç”¨<a hidden class=anchor aria-hidden=true href=#11-åŸºæœ¬ä½¿ç”¨>#</a></h2><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Â Â Â Â Â Â Â Â <span style=color:#8b949e;font-style:italic>// Function =&gt; å°±æ˜¯ä¸€ä¸ªå‡½æ•°,æœ‰è¾“å…¥è¾“å‡º
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â <span style=color:#8b949e;font-style:italic>// æ¥æ”¶ä¸€ä¸ªå‚æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â Function<span style=color:#ff7b72;font-weight:700>&lt;</span>Integer<span style=color:#ff7b72;font-weight:700>,</span> Integer<span style=color:#ff7b72;font-weight:700>&gt;</span> add <span style=color:#ff7b72;font-weight:700>=</span> x <span style=color:#ff7b72;font-weight:700>-&gt;</span> x <span style=color:#ff7b72;font-weight:700>+</span> 1<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>.</span>println<span style=color:#ff7b72;font-weight:700>(</span>add<span style=color:#ff7b72;font-weight:700>.</span>apply<span style=color:#ff7b72;font-weight:700>(</span>4<span style=color:#ff7b72;font-weight:700>));</span> <span style=color:#8b949e;font-style:italic>// è¾“å‡º: 5
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â <span style=color:#8b949e;font-style:italic>// æ¥æ”¶ä¸¤ä¸ªå‚æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â BiFunction<span style=color:#ff7b72;font-weight:700>&lt;</span>String<span style=color:#ff7b72;font-weight:700>,</span> Integer<span style=color:#ff7b72;font-weight:700>,</span> Person<span style=color:#ff7b72;font-weight:700>&gt;</span> addxy2Str <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72;font-weight:700>(</span>x<span style=color:#ff7b72;font-weight:700>,</span> y<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#ff7b72>new</span> Person<span style=color:#ff7b72;font-weight:700>(</span>x<span style=color:#ff7b72;font-weight:700>,</span> y<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>.</span>println<span style=color:#ff7b72;font-weight:700>(</span>addxy2Str<span style=color:#ff7b72;font-weight:700>.</span>apply<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;xkj&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> 6<span style=color:#ff7b72;font-weight:700>));</span> <span style=color:#8b949e;font-style:italic>// è¾“å‡º: å¯¹è±¡ä¿¡æ¯
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â String nameStr<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;xkj,xkq,xkk,qoo&#34;</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â List<span style=color:#ff7b72;font-weight:700>&lt;</span>String<span style=color:#ff7b72;font-weight:700>&gt;</span> nameList <span style=color:#ff7b72;font-weight:700>=</span> Arrays<span style=color:#ff7b72;font-weight:700>.</span>asList<span style=color:#ff7b72;font-weight:700>(</span>nameStr<span style=color:#ff7b72;font-weight:700>.</span>split<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;,&#34;</span><span style=color:#ff7b72;font-weight:700>));</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â List<span style=color:#ff7b72;font-weight:700>&lt;</span>Person<span style=color:#ff7b72;font-weight:700>&gt;</span> personList <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> ArrayList<span style=color:#ff7b72;font-weight:700>&lt;&gt;();</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â Person p1<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#ff7b72>new</span> Person<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;xkj&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> 4<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â personList<span style=color:#ff7b72;font-weight:700>.</span>add<span style=color:#ff7b72;font-weight:700>(</span>p1<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â 
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â <span style=color:#8b949e;font-style:italic>// PredicateÂ Â =&gt; å¯ä»¥ç”¨æ¥è¿‡æ»¤,æŸ¥æ‰¾
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â <span style=color:#8b949e;font-style:italic>//åŠŸèƒ½:æ‰¾åˆ°å« xkj çš„å­—ç¬¦ä¸²Â Â =&gt;Â Â è¿”å›é›†åˆÂ Â || è¿”å›å¸ƒå°”
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â Predicate<span style=color:#ff7b72;font-weight:700>&lt;</span>String<span style=color:#ff7b72;font-weight:700>&gt;</span> isConxkj<span style=color:#ff7b72;font-weight:700>=</span> n<span style=color:#ff7b72;font-weight:700>-&gt;</span>n<span style=color:#ff7b72;font-weight:700>.</span>contains<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;xkj&#34;</span><span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â List<span style=color:#ff7b72;font-weight:700>&lt;</span>String<span style=color:#ff7b72;font-weight:700>&gt;</span> xkjInfo <span style=color:#ff7b72;font-weight:700>=</span> nameList<span style=color:#ff7b72;font-weight:700>.</span>stream<span style=color:#ff7b72;font-weight:700>().</span>filter<span style=color:#ff7b72;font-weight:700>(</span>isConxkj<span style=color:#ff7b72;font-weight:700>).</span>collect<span style=color:#ff7b72;font-weight:700>(</span>Collectors<span style=color:#ff7b72;font-weight:700>.</span>toList<span style=color:#ff7b72;font-weight:700>());</span><span style=color:#8b949e;font-style:italic>//æŒ‰ isConxkj è¿‡æ»¤
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â <span style=color:#ff7b72>boolean</span> isHaveXkj <span style=color:#ff7b72;font-weight:700>=</span> nameList<span style=color:#ff7b72;font-weight:700>.</span>stream<span style=color:#ff7b72;font-weight:700>().</span>anyMatch<span style=color:#ff7b72;font-weight:700>(</span>isConxkj<span style=color:#ff7b72;font-weight:700>);</span> <span style=color:#8b949e;font-style:italic>// æŒ‰isConxkj æ‰¾åˆ°ä»»æ„ä¸€ä¸ªå°±è¡Œ
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>.</span>println<span style=color:#ff7b72;font-weight:700>(</span>xkjInfo<span style=color:#ff7b72;font-weight:700>);</span> <span style=color:#8b949e;font-style:italic>// è¾“å‡ºÂ :Â  xkj
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>.</span>println<span style=color:#ff7b72;font-weight:700>(</span>isHaveXkj<span style=color:#ff7b72;font-weight:700>);</span> <span style=color:#8b949e;font-style:italic>// è¾“å‡º: true
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â 
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â <span style=color:#8b949e;font-style:italic>// Consumer =&gt; åªæœ‰å…¥å‚æ²¡æœ‰è¿”å‚,å¯ä»¥åšä¸€äº›æ•°æ®å¤„ç† å¯ä»¥ç”¨åœ¨forEachä¸­ç»™listä¿®æ”¹å±æ€§å€¼, 
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â Consumer<span style=color:#ff7b72;font-weight:700>&lt;</span>Person<span style=color:#ff7b72;font-weight:700>&gt;</span> addPrefix <span style=color:#ff7b72;font-weight:700>=</span> p<span style=color:#ff7b72;font-weight:700>-&gt;</span>p<span style=color:#ff7b72;font-weight:700>.</span>setAge<span style=color:#ff7b72;font-weight:700>(</span>30<span style=color:#ff7b72;font-weight:700>);;</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â personList<span style=color:#ff7b72;font-weight:700>.</span>forEach<span style=color:#ff7b72;font-weight:700>(</span>System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>::</span>println<span style=color:#ff7b72;font-weight:700>);</span><span style=color:#8b949e;font-style:italic>//ä¿®æ”¹å‰Â Â // è¾“å‡º:Person [name=xkj, age=4]
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â personList<span style=color:#ff7b72;font-weight:700>.</span>stream<span style=color:#ff7b72;font-weight:700>().</span>forEach<span style=color:#ff7b72;font-weight:700>(</span>addPrefix<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â personList<span style=color:#ff7b72;font-weight:700>.</span>forEach<span style=color:#ff7b72;font-weight:700>(</span>System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>::</span>println<span style=color:#ff7b72;font-weight:700>);</span><span style=color:#8b949e;font-style:italic>//ä¿®æ”¹åÂ Â // è¾“å‡º : Person [name=xkj, age=30]
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â 
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â 
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â <span style=color:#8b949e;font-style:italic>//Supplier =&gt; å¯ä»¥ç”¨æ¥å–é…ç½®ä¿¡æ¯(è¿˜æ˜¯å®šä¹‰å˜é‡æ¥çˆ½),è¿˜æœ‰newå¯¹è±¡(æˆ‘æ„Ÿè§‰è¿˜æ˜¯ç›´æ¥newçˆ½å¿«)Â Â (æš‚æ—¶ä¸çŸ¥é“åœºæ™¯)
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â Supplier<span style=color:#ff7b72;font-weight:700>&lt;</span>Person<span style=color:#ff7b72;font-weight:700>&gt;</span> person<span style=color:#ff7b72;font-weight:700>=</span>Person<span style=color:#ff7b72;font-weight:700>::</span><span style=color:#ff7b72>new</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â Person p <span style=color:#ff7b72;font-weight:700>=</span> person<span style=color:#ff7b72;font-weight:700>.</span>get<span style=color:#ff7b72;font-weight:700>();</span> <span style=color:#8b949e;font-style:italic>// æ¯ä¸ªgetéƒ½æ˜¯ä¸ªæ–°çš„å¯¹è±¡
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>.</span>println<span style=color:#ff7b72;font-weight:700>(</span>p<span style=color:#ff7b72;font-weight:700>);</span>Â Â <span style=color:#8b949e;font-style:italic>//è¾“å‡º: Person [name=null, age=0]
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>* åˆ¤æ–­è¯­å¥æ˜¯å¦æ­£ç¡®æ‰§è¡Œ,è¿”å›è¯­å¥çš„è¿”å›å€¼,æŠ¥é”™åˆ™ä¸ºnull
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>* æ¯”å¦‚,ä¼ å…¥æ ¼å¼åŒ–æ—¶é—´è¯­å¥,ç¡®å®šæ—¶é—´æ˜¯å¦åˆæ³•
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>*/</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>public</span> <span style=color:#ff7b72>static</span> <span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>&gt;</span> T <span style=color:#d2a8ff;font-weight:700>of</span><span style=color:#ff7b72;font-weight:700>(</span>Supplier<span style=color:#ff7b72;font-weight:700>&lt;?</span> <span style=color:#ff7b72>extends</span> T<span style=color:#ff7b72;font-weight:700>&gt;</span> supplier<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>try</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>return</span> supplier<span style=color:#ff7b72;font-weight:700>.</span>get<span style=color:#ff7b72;font-weight:700>();</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>}</span> <span style=color:#ff7b72>catch</span> <span style=color:#ff7b72;font-weight:700>(</span>Throwable t<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>return</span> <span style=color:#79c0ff>null</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>@Test</span>
</span></span><span style=display:flex><span>Â Â Â Â <span style=color:#ff7b72>public</span> <span style=color:#ff7b72>void</span> <span style=color:#d2a8ff;font-weight:700>testCollect</span><span style=color:#ff7b72;font-weight:700>()</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â initInfo<span style=color:#ff7b72;font-weight:700>();</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â Predicate<span style=color:#ff7b72;font-weight:700>&lt;</span>String<span style=color:#ff7b72;font-weight:700>&gt;</span> isConxkj<span style=color:#ff7b72;font-weight:700>=</span> n<span style=color:#ff7b72;font-weight:700>-&gt;</span>n<span style=color:#ff7b72;font-weight:700>.</span>contains<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;xk&#34;</span><span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â <span style=color:#8b949e;font-style:italic>//æŒ‰ isConxkj è®¡æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â Long xkjCount <span style=color:#ff7b72;font-weight:700>=</span> nameList<span style=color:#ff7b72;font-weight:700>.</span>stream<span style=color:#ff7b72;font-weight:700>().</span>filter<span style=color:#ff7b72;font-weight:700>(</span>isConxkj<span style=color:#ff7b72;font-weight:700>).</span>collect<span style=color:#ff7b72;font-weight:700>(</span>Collectors<span style=color:#ff7b72;font-weight:700>.</span>counting<span style=color:#ff7b72;font-weight:700>());</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>.</span>println<span style=color:#ff7b72;font-weight:700>(</span>xkjCount<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â 
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â <span style=color:#8b949e;font-style:italic>//æŒ‰ isConxkj åˆ†åŒºå¹¶å¯¹ç»“æœè®¡æ•°  (å»æ‰åé¢çš„è®¡æ•°å‡½æ•°,å°±å¯ä»¥å¾—åˆ°å…·ä½“çš„å€¼)
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â Map<span style=color:#ff7b72;font-weight:700>&lt;</span>Boolean<span style=color:#ff7b72;font-weight:700>,</span> Long<span style=color:#ff7b72;font-weight:700>&gt;</span> xkjCountMap <span style=color:#ff7b72;font-weight:700>=</span> nameList<span style=color:#ff7b72;font-weight:700>.</span>stream<span style=color:#ff7b72;font-weight:700>().</span>collect<span style=color:#ff7b72;font-weight:700>(</span>Collectors<span style=color:#ff7b72;font-weight:700>.</span>partitioningBy<span style=color:#ff7b72;font-weight:700>(</span>n<span style=color:#ff7b72;font-weight:700>-&gt;</span>n<span style=color:#ff7b72;font-weight:700>.</span>contains<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;xk&#34;</span><span style=color:#ff7b72;font-weight:700>),</span>Collectors<span style=color:#ff7b72;font-weight:700>.</span>counting<span style=color:#ff7b72;font-weight:700>()));</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>.</span>println<span style=color:#ff7b72;font-weight:700>(</span>xkjCountMap<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â 
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â <span style=color:#8b949e;font-style:italic>//æŒ‰ isConxkj è¿‡æ»¤,å¾—åˆ°çš„ç»“æœç”¨,è¿æ¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â String xkJoin <span style=color:#ff7b72;font-weight:700>=</span> nameList<span style=color:#ff7b72;font-weight:700>.</span>stream<span style=color:#ff7b72;font-weight:700>().</span>filter<span style=color:#ff7b72;font-weight:700>(</span>isConxkj<span style=color:#ff7b72;font-weight:700>).</span>collect<span style=color:#ff7b72;font-weight:700>(</span>Collectors<span style=color:#ff7b72;font-weight:700>.</span>joining<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;,&#34;</span><span style=color:#ff7b72;font-weight:700>));</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>.</span>println<span style=color:#ff7b72;font-weight:700>(</span>xkJoin<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â 
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â <span style=color:#8b949e;font-style:italic>//æŒ‰ isConxkj è¿‡æ»¤,å¾—åˆ°çš„ç»“æœç”¨,è¿æ¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â Map<span style=color:#ff7b72;font-weight:700>&lt;</span>Object<span style=color:#ff7b72;font-weight:700>,</span> Object<span style=color:#ff7b72;font-weight:700>&gt;</span> xkMap <span style=color:#ff7b72;font-weight:700>=</span> nameList<span style=color:#ff7b72;font-weight:700>.</span>stream<span style=color:#ff7b72;font-weight:700>().</span>filter<span style=color:#ff7b72;font-weight:700>(</span>isConxkj<span style=color:#ff7b72;font-weight:700>).</span>collect<span style=color:#ff7b72;font-weight:700>(</span>Collectors<span style=color:#ff7b72;font-weight:700>.</span>toMap<span style=color:#ff7b72;font-weight:700>(</span>k<span style=color:#ff7b72;font-weight:700>-&gt;</span>k<span style=color:#ff7b72;font-weight:700>+</span><span style=color:#a5d6ff>&#34;_zz&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> v<span style=color:#ff7b72;font-weight:700>-&gt;</span>v<span style=color:#ff7b72;font-weight:700>));</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>.</span>println<span style=color:#ff7b72;font-weight:700>(</span>xkMap<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â 
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â <span style=color:#8b949e;font-style:italic>//æŒ‰ åå­—map,personä¸ºval
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â Map<span style=color:#ff7b72;font-weight:700>&lt;</span>Object<span style=color:#ff7b72;font-weight:700>,</span> Person<span style=color:#ff7b72;font-weight:700>&gt;</span> xkMapByName <span style=color:#ff7b72;font-weight:700>=</span> personList<span style=color:#ff7b72;font-weight:700>.</span>stream<span style=color:#ff7b72;font-weight:700>().</span>collect<span style=color:#ff7b72;font-weight:700>(</span>Collectors<span style=color:#ff7b72;font-weight:700>.</span>toMap<span style=color:#ff7b72;font-weight:700>(</span>p<span style=color:#ff7b72;font-weight:700>-&gt;</span>p<span style=color:#ff7b72;font-weight:700>.</span>getName<span style=color:#ff7b72;font-weight:700>(),</span>p<span style=color:#ff7b72;font-weight:700>-&gt;</span>p<span style=color:#ff7b72;font-weight:700>));</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>.</span>println<span style=color:#ff7b72;font-weight:700>(</span>xkMapByName<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â 
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>//åˆ†ç»„åå»æœ€å¤§å€¼
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    Map<span style=color:#ff7b72;font-weight:700>&lt;</span>Integer<span style=color:#ff7b72;font-weight:700>,</span> Optional<span style=color:#ff7b72;font-weight:700>&lt;</span>Users<span style=color:#ff7b72;font-weight:700>&gt;&gt;</span> collect <span style=color:#ff7b72;font-weight:700>=</span> users<span style=color:#ff7b72;font-weight:700>.</span>stream<span style=color:#ff7b72;font-weight:700>().</span>collect<span style=color:#ff7b72;font-weight:700>(</span>Collectors<span style=color:#ff7b72;font-weight:700>.</span>groupingBy<span style=color:#ff7b72;font-weight:700>(</span>Users<span style=color:#ff7b72;font-weight:700>::</span>getAge<span style=color:#ff7b72;font-weight:700>,</span> Collectors<span style=color:#ff7b72;font-weight:700>.</span>maxBy<span style=color:#ff7b72;font-weight:700>(</span>Comparator<span style=color:#ff7b72;font-weight:700>.</span>comparing<span style=color:#ff7b72;font-weight:700>(</span>Users<span style=color:#ff7b72;font-weight:700>::</span>getId<span style=color:#ff7b72;font-weight:700>))));</span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// https://www.jianshu.com/p/21b20c375599 æ›´å¤šä½¿ç”¨åˆ†ç»„
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#8b949e;font-style:italic>// https://cloud.tencent.com/developer/article/1863390
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#8b949e;font-style:italic>// æŒ‰å¹´é¾„åˆ†ç»„
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    Map<span style=color:#ff7b72;font-weight:700>&lt;</span>Integer<span style=color:#ff7b72;font-weight:700>,</span> List<span style=color:#ff7b72;font-weight:700>&lt;</span>Person<span style=color:#ff7b72;font-weight:700>&gt;&gt;</span> groupMapByAge <span style=color:#ff7b72;font-weight:700>=</span> personList<span style=color:#ff7b72;font-weight:700>.</span>stream<span style=color:#ff7b72;font-weight:700>().</span>collect<span style=color:#ff7b72;font-weight:700>(</span>Collectors<span style=color:#ff7b72;font-weight:700>.</span>groupingBy<span style=color:#ff7b72;font-weight:700>(</span>p<span style=color:#ff7b72;font-weight:700>-&gt;</span>p<span style=color:#ff7b72;font-weight:700>.</span>getAge<span style=color:#ff7b72;font-weight:700>()));</span>
</span></span><span style=display:flex><span>    System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>.</span>println<span style=color:#ff7b72;font-weight:700>(</span>groupMapByAge<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// ç”¨mapæ“ä½œæ•°å€¼ç±»å‹æ—¶æ˜¯æœ‰è£…ç®±å¤„ç†çš„,å¤šå°‘æœ‰æŸè€—,ç”¨mapToLongå°±æ˜¯å°†å€¼å˜æˆåŸºæœ¬ç±»å‹,ç„¶åç”¨boxedå˜æˆæ™®é€šæµ
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    Long decrease  <span style=color:#ff7b72;font-weight:700>=</span> ageList<span style=color:#ff7b72;font-weight:700>.</span>stream<span style=color:#ff7b72;font-weight:700>().</span>mapToLong<span style=color:#ff7b72;font-weight:700>(</span>a<span style=color:#ff7b72;font-weight:700>-&gt;</span>a<span style=color:#ff7b72;font-weight:700>).</span>boxed<span style=color:#ff7b72;font-weight:700>().</span>reduce<span style=color:#ff7b72;font-weight:700>((</span>x<span style=color:#ff7b72;font-weight:700>,</span>y<span style=color:#ff7b72;font-weight:700>)-&gt;</span>x<span style=color:#ff7b72;font-weight:700>-</span>y<span style=color:#ff7b72;font-weight:700>).</span>orElse<span style=color:#ff7b72;font-weight:700>(</span>0L<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>    System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>.</span>println<span style=color:#ff7b72;font-weight:700>(</span>decrease<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// åˆå¹¶list
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    List<span style=color:#ff7b72;font-weight:700>&lt;</span>ServiceOrder<span style=color:#ff7b72;font-weight:700>&gt;</span> serviceOrderList <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72>new</span> ArrayList<span style=color:#ff7b72;font-weight:700>&lt;&gt;();</span>
</span></span><span style=display:flex><span>    List<span style=color:#ff7b72;font-weight:700>&lt;</span>String<span style=color:#ff7b72;font-weight:700>&gt;</span> projectNoAll <span style=color:#ff7b72;font-weight:700>=</span> serviceOrderList<span style=color:#ff7b72;font-weight:700>.</span>stream<span style=color:#ff7b72;font-weight:700>().</span>flatMap<span style=color:#ff7b72;font-weight:700>(</span>s<span style=color:#ff7b72;font-weight:700>-&gt;</span>s<span style=color:#ff7b72;font-weight:700>.</span>getProjectNos<span style=color:#ff7b72;font-weight:700>().</span>stream<span style=color:#ff7b72;font-weight:700>()).</span>collect<span style=color:#ff7b72;font-weight:700>(</span>Collectors<span style=color:#ff7b72;font-weight:700>.</span>toList<span style=color:#ff7b72;font-weight:700>());</span>
</span></span><span style=display:flex><span>    List<span style=color:#ff7b72;font-weight:700>&lt;</span>AClass<span style=color:#ff7b72;font-weight:700>&gt;</span> unionResult <span style=color:#ff7b72;font-weight:700>=</span> Stream<span style=color:#ff7b72;font-weight:700>.</span>of<span style=color:#ff7b72;font-weight:700>(</span>serviceOrderList<span style=color:#ff7b72;font-weight:700>,</span> serviceOrderList<span style=color:#ff7b72;font-weight:700>).</span>flatMap<span style=color:#ff7b72;font-weight:700>(</span>Collection<span style=color:#ff7b72;font-weight:700>::</span>stream<span style=color:#ff7b72;font-weight:700>).</span>collect<span style=color:#ff7b72;font-weight:700>(</span>Collectors<span style=color:#ff7b72;font-weight:700>.</span>toList<span style=color:#ff7b72;font-weight:700>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>@Test</span>
</span></span><span style=display:flex><span>Â Â Â Â <span style=color:#ff7b72>public</span> <span style=color:#ff7b72>void</span> <span style=color:#d2a8ff;font-weight:700>testMR</span><span style=color:#ff7b72;font-weight:700>()</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â initInfo<span style=color:#ff7b72;font-weight:700>();</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â BinaryOperator<span style=color:#ff7b72;font-weight:700>&lt;</span>String<span style=color:#ff7b72;font-weight:700>&gt;</span> lk <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72;font-weight:700>(</span>x<span style=color:#ff7b72;font-weight:700>,</span> y<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>-&gt;</span> x <span style=color:#ff7b72;font-weight:700>+</span> y<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>Â Â Â Â Â Â Â Â Optional<span style=color:#ff7b72;font-weight:700>&lt;</span>String<span style=color:#ff7b72;font-weight:700>&gt;</span> reduceStr <span style=color:#ff7b72;font-weight:700>=</span> nameList<span style=color:#ff7b72;font-weight:700>.</span>stream<span style=color:#ff7b72;font-weight:700>().</span>map<span style=color:#ff7b72;font-weight:700>(</span>n <span style=color:#ff7b72;font-weight:700>-&gt;</span> n<span style=color:#ff7b72;font-weight:700>).</span>reduce<span style=color:#ff7b72;font-weight:700>(</span>lk<span style=color:#ff7b72;font-weight:700>);</span><span style=color:#8b949e;font-style:italic>//å°†æ‰€æœ‰çš„å€¼æ‹¼èµ·æ¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>Â Â Â Â Â Â Â Â System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>.</span>println<span style=color:#ff7b72;font-weight:700>(</span>reduceStr<span style=color:#ff7b72;font-weight:700>.</span>get<span style=color:#ff7b72;font-weight:700>());</span>
</span></span><span style=display:flex><span>Â Â Â Â <span style=color:#ff7b72;font-weight:700>}</span>
</span></span></code></pre></div><p><code>T reduce(T identity, BinaryOperator&lt;T> accumulator)</code></p><p>ç›¸å¯¹äºä¸€ä¸ªå‚æ•°çš„æ–¹æ³•æ¥è¯´ï¼Œå®ƒå¤šäº†ä¸€ä¸ªTç±»å‹çš„å‚æ•°ï¼›å®é™…ä¸Šå°±ç›¸å½“äºéœ€è¦è®¡ç®—çš„å€¼åœ¨Streamçš„åŸºç¡€ä¸Šå¤šäº†ä¸€ä¸ªåˆå§‹åŒ–çš„å€¼
eg.</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Stream<span style=color:#ff7b72;font-weight:700>&lt;</span>String<span style=color:#ff7b72;font-weight:700>&gt;</span> s <span style=color:#ff7b72;font-weight:700>=</span> Stream<span style=color:#ff7b72;font-weight:700>.</span>of<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;test&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;t1&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;t2&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;teeeee&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;aaaa&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;taaa&#34;</span><span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>.</span>println<span style=color:#ff7b72;font-weight:700>(</span>s<span style=color:#ff7b72;font-weight:700>.</span>reduce<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;[value]:&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#ff7b72;font-weight:700>(</span>s1<span style=color:#ff7b72;font-weight:700>,</span> s2<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>-&gt;</span> s1<span style=color:#ff7b72;font-weight:700>.</span>concat<span style=color:#ff7b72;font-weight:700>(</span>s2<span style=color:#ff7b72;font-weight:700>)));</span>    <span style=color:#8b949e;font-style:italic>// [value]:testt1t2teeeeeaaaataaa
</span></span></span></code></pre></div><blockquote><p>æ¥è‡ª <a href=https://blog.csdn.net/icarusliu/article/details/79504602 target=_blank rel=noopener>https://blog.csdn.net/icarusliu/article/details/79504602</a></p></blockquote><h2 id=12-å…¶ä»–åº”ç”¨>1.2 å…¶ä»–åº”ç”¨<a hidden class=anchor aria-hidden=true href=#12-å…¶ä»–åº”ç”¨>#</a></h2><p>json æ ¼å¼åŒ–ä½¿ç”¨, å€¼ä¸ä¸ºnullçš„æ‰è¾“å‡º</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#ff7b72>return</span> JSON<span style=color:#ff7b72;font-weight:700>.</span>toJSONString<span style=color:#ff7b72;font-weight:700>(</span>val<span style=color:#ff7b72;font-weight:700>,(</span>PropertyFilter<span style=color:#ff7b72;font-weight:700>)((</span>obj<span style=color:#ff7b72;font-weight:700>,</span> name<span style=color:#ff7b72;font-weight:700>,</span> value<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>-&gt;</span> value <span style=color:#ff7b72;font-weight:700>!=</span> <span style=color:#79c0ff>null</span><span style=color:#ff7b72;font-weight:700>));</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// NameFilter: å¤„ç†nameå­—æ®µ,(æ¯”å¦‚å¯¹nameåŠ ä¸ªåç¼€)
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ValueFilter: å¤„ç†valueå­—æ®µ,(æ¯”å¦‚å¯¹valueåŠ ä¸ªåç¼€)
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// PropertyFilter: å¤„ç†objå­—æ®µ
</span></span></span></code></pre></div><h1 id=2-é«˜é˜¶ä½¿ç”¨>2. é«˜é˜¶ä½¿ç”¨<a hidden class=anchor aria-hidden=true href=#2-é«˜é˜¶ä½¿ç”¨>#</a></h1><h2 id=21-å—æ£€å‡½æ•°å¼æ¥å£>2.1 å—æ£€å‡½æ•°å¼æ¥å£:<a hidden class=anchor aria-hidden=true href=#21-å—æ£€å‡½æ•°å¼æ¥å£>#</a></h2><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#ff7b72>package</span> <span style=color:#ff7b72>com.gree.ecommerce.utils.function</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>java.util.Optional</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic> * (æ£€æŸ¥)æŠ›å‡ºlambdaä¸­å¼‚å¸¸æƒ…å†µ
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic> *
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic> * @author A80080
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic> * @createDate 2021/4/21
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic> */</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>public</span> <span style=color:#ff7b72>interface</span> <span style=color:#f0883e;font-weight:700>CheckFun</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>interface</span> <span style=color:#f0883e;font-weight:700>Function</span><span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>,</span> R<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * Functionç±»å‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         *
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @param function å¤„ç†å‡½æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @param p        å…¥å‚
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @return å¤„ç†ç»“æœ, æŠ¥é”™è¿”å› Optional.empty();
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @author A80080
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @createDate 2021/4/21
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         */</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>static</span> <span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>,</span> R<span style=color:#ff7b72;font-weight:700>&gt;</span> Optional<span style=color:#ff7b72;font-weight:700>&lt;</span>R<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#d2a8ff;font-weight:700>tryOf</span><span style=color:#ff7b72;font-weight:700>(</span>Function<span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>,</span> R<span style=color:#ff7b72;font-weight:700>&gt;</span> function<span style=color:#ff7b72;font-weight:700>,</span> T p<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>try</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>return</span> Optional<span style=color:#ff7b72;font-weight:700>.</span>ofNullable<span style=color:#ff7b72;font-weight:700>(</span>function<span style=color:#ff7b72;font-weight:700>.</span>apply<span style=color:#ff7b72;font-weight:700>(</span>p<span style=color:#ff7b72;font-weight:700>));</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72;font-weight:700>}</span> <span style=color:#ff7b72>catch</span> <span style=color:#ff7b72;font-weight:700>(</span>Throwable t<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>return</span> Optional<span style=color:#ff7b72;font-weight:700>.</span>empty<span style=color:#ff7b72;font-weight:700>();</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * å‚ç…§ java.util.function.Function
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         *
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @param t å…¥å‚
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @return R ç±»å‹æ•°æ®
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @throws Exception å¼‚å¸¸
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @author A80080
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @createDate 2021/4/21
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         */</span>
</span></span><span style=display:flex><span>        R <span style=color:#d2a8ff;font-weight:700>apply</span><span style=color:#ff7b72;font-weight:700>(</span>T t<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72>throws</span> Exception<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>interface</span> <span style=color:#f0883e;font-weight:700>Supplier</span><span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * Supplier ç±»å‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         *
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @param supplier å¤„ç†å‡½æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @return è¿”å›è¯­å¥çš„è¿”å›å€¼(optional), æŠ¥é”™åˆ™ä¸ºOptional.empty()
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @author A80080
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         */</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>static</span> <span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>&gt;</span> Optional<span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#d2a8ff;font-weight:700>tryOf</span><span style=color:#ff7b72;font-weight:700>(</span>CheckFun<span style=color:#ff7b72;font-weight:700>.</span>Supplier<span style=color:#ff7b72;font-weight:700>&lt;?</span> <span style=color:#ff7b72>extends</span> T<span style=color:#ff7b72;font-weight:700>&gt;</span> supplier<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>try</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>return</span> Optional<span style=color:#ff7b72;font-weight:700>.</span>ofNullable<span style=color:#ff7b72;font-weight:700>(</span>supplier<span style=color:#ff7b72;font-weight:700>.</span>get<span style=color:#ff7b72;font-weight:700>());</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72;font-weight:700>}</span> <span style=color:#ff7b72>catch</span> <span style=color:#ff7b72;font-weight:700>(</span>Throwable t<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>return</span> Optional<span style=color:#ff7b72;font-weight:700>.</span>empty<span style=color:#ff7b72;font-weight:700>();</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * å‚ç…§ java.util.function.Supplier
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         *
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @return T ç±»å‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @throws Exception å¼‚å¸¸
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @author A80080
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @createDate 2021/4/21
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         */</span>
</span></span><span style=display:flex><span>        T <span style=color:#d2a8ff;font-weight:700>get</span><span style=color:#ff7b72;font-weight:700>()</span> <span style=color:#ff7b72>throws</span> Exception<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>interface</span> <span style=color:#f0883e;font-weight:700>Consumer</span><span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * consumer ç±»å‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * &lt;p&gt; æŠ¥é”™å°†å¿½ç•¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         *
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @param consumer å¤„ç†å‡½æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @param p        å…¥å‚
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @author A80080
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @createDate 2021/4/21
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         */</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>static</span> <span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#ff7b72>void</span> <span style=color:#d2a8ff;font-weight:700>tryOf</span><span style=color:#ff7b72;font-weight:700>(</span>CheckFun<span style=color:#ff7b72;font-weight:700>.</span>Consumer<span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>&gt;</span> consumer<span style=color:#ff7b72;font-weight:700>,</span> T p<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>try</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>                consumer<span style=color:#ff7b72;font-weight:700>.</span>accept<span style=color:#ff7b72;font-weight:700>(</span>p<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72;font-weight:700>}</span> <span style=color:#ff7b72>catch</span> <span style=color:#ff7b72;font-weight:700>(</span>Throwable ignored<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * å‚ç…§ java.util.function.Consumer
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         *
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @param t å…¥å‚
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @throws Exception å¼‚å¸¸
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @author A80080
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @createDate 2021/4/21
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         */</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>void</span> <span style=color:#d2a8ff;font-weight:700>accept</span><span style=color:#ff7b72;font-weight:700>(</span>T t<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72>throws</span> Exception<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>interface</span> <span style=color:#f0883e;font-weight:700>Predicate</span><span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * Predicateç±»å‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         *
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @param predicate å¤„ç†å‡½æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @param p         å…¥å‚
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @return å¤„ç†ç»“æœ, æŠ¥é”™è¿”å› false
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @author A80080
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @createDate 2021/4/21
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         */</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>static</span> <span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#ff7b72>boolean</span> <span style=color:#d2a8ff;font-weight:700>tryOf</span><span style=color:#ff7b72;font-weight:700>(</span>CheckFun<span style=color:#ff7b72;font-weight:700>.</span>Predicate<span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>&gt;</span> predicate<span style=color:#ff7b72;font-weight:700>,</span> T p<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>try</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>return</span> predicate<span style=color:#ff7b72;font-weight:700>.</span>test<span style=color:#ff7b72;font-weight:700>(</span>p<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72;font-weight:700>}</span> <span style=color:#ff7b72>catch</span> <span style=color:#ff7b72;font-weight:700>(</span>Throwable t<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#ff7b72>return</span> <span style=color:#79c0ff>false</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * å‚ç…§ java.util.function.Predicate
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         *
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @param t å…¥å‚
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @return boolean
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @throws Exception å¼‚å¸¸
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @author A80080
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         * @createDate 2021/4/21
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>         */</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>boolean</span> <span style=color:#d2a8ff;font-weight:700>test</span><span style=color:#ff7b72;font-weight:700>(</span>T t<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72>throws</span> Exception<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// ä½¿ç”¨æ¡ˆä¾‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#d2a8ff;font-weight:700>@Test</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>public</span> <span style=color:#ff7b72>void</span> <span style=color:#d2a8ff;font-weight:700>test</span><span style=color:#ff7b72;font-weight:700>()</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>    Stream<span style=color:#ff7b72;font-weight:700>.</span>of<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;uNameCookie&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;uidCookie&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;loginNameCookie&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;loginStatusCookie&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;mobileLoginTokenCookie&#34;</span><span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>.</span>filter<span style=color:#ff7b72;font-weight:700>(</span>c<span style=color:#ff7b72;font-weight:700>-&gt;!</span>CheckFun<span style=color:#ff7b72;font-weight:700>.</span>Predicate<span style=color:#ff7b72;font-weight:700>.</span>tryOf<span style=color:#ff7b72;font-weight:700>(</span>a<span style=color:#ff7b72;font-weight:700>-&gt;</span>URLEncoder<span style=color:#ff7b72;font-weight:700>.</span>encode<span style=color:#ff7b72;font-weight:700>(</span>c<span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;utf-8&#34;</span><span style=color:#ff7b72;font-weight:700>).</span>equals<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;&#34;</span><span style=color:#ff7b72;font-weight:700>),</span>c<span style=color:#ff7b72;font-weight:700>))</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>.</span>peek<span style=color:#ff7b72;font-weight:700>(</span>c <span style=color:#ff7b72;font-weight:700>-&gt;</span> c<span style=color:#ff7b72;font-weight:700>.</span>concat<span style=color:#ff7b72;font-weight:700>(</span>CheckFun<span style=color:#ff7b72;font-weight:700>.</span>Supplier<span style=color:#ff7b72;font-weight:700>.</span>tryOf<span style=color:#ff7b72;font-weight:700>(()</span> <span style=color:#ff7b72;font-weight:700>-&gt;</span> URLEncoder<span style=color:#ff7b72;font-weight:700>.</span>encode<span style=color:#ff7b72;font-weight:700>(</span>c<span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;utf-8&#34;</span><span style=color:#ff7b72;font-weight:700>)).</span>orElse<span style=color:#ff7b72;font-weight:700>(</span>c<span style=color:#ff7b72;font-weight:700>)))</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>.</span>map<span style=color:#ff7b72;font-weight:700>(</span>c <span style=color:#ff7b72;font-weight:700>-&gt;</span> c<span style=color:#ff7b72;font-weight:700>.</span>concat<span style=color:#ff7b72;font-weight:700>(</span>CheckFun<span style=color:#ff7b72;font-weight:700>.</span>Function<span style=color:#ff7b72;font-weight:700>.</span>tryOf<span style=color:#ff7b72;font-weight:700>(</span>a <span style=color:#ff7b72;font-weight:700>-&gt;</span> URLEncoder<span style=color:#ff7b72;font-weight:700>.</span>encode<span style=color:#ff7b72;font-weight:700>(</span>a<span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;utf-8&#34;</span><span style=color:#ff7b72;font-weight:700>),</span> c<span style=color:#ff7b72;font-weight:700>).</span>orElse<span style=color:#ff7b72;font-weight:700>(</span>c<span style=color:#ff7b72;font-weight:700>)))</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>.</span>peek<span style=color:#ff7b72;font-weight:700>(</span>c <span style=color:#ff7b72;font-weight:700>-&gt;</span> CheckFun<span style=color:#ff7b72;font-weight:700>.</span>Consumer<span style=color:#ff7b72;font-weight:700>.</span>tryOf<span style=color:#ff7b72;font-weight:700>(</span>x <span style=color:#ff7b72;font-weight:700>-&gt;</span> c<span style=color:#ff7b72;font-weight:700>.</span>concat<span style=color:#ff7b72;font-weight:700>(</span>URLEncoder<span style=color:#ff7b72;font-weight:700>.</span>encode<span style=color:#ff7b72;font-weight:700>(</span>x<span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;utf-8&#34;</span><span style=color:#ff7b72;font-weight:700>)),</span> c<span style=color:#ff7b72;font-weight:700>))</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>.</span>forEach<span style=color:#ff7b72;font-weight:700>(</span>System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>::</span>println<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=22--æ ¹æ®ç±»ä¸­æŸä¸ªå­—æ®µå»é‡ä»¥åŠåˆ†é¡µå¤„ç†>2.2 æ ¹æ®ç±»ä¸­æŸä¸ªå­—æ®µå»é‡ä»¥åŠåˆ†é¡µå¤„ç†<a hidden class=anchor aria-hidden=true href=#22--æ ¹æ®ç±»ä¸­æŸä¸ªå­—æ®µå»é‡ä»¥åŠåˆ†é¡µå¤„ç†>#</a></h2><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// æ ¹æ®ç±»ä¸­æŸä¸ªå­—æ®µå»é‡
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#d2a8ff;font-weight:700>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>public</span> <span style=color:#ff7b72>void</span> <span style=color:#d2a8ff;font-weight:700>should_return_2_because_distinct_by_age</span><span style=color:#ff7b72;font-weight:700>()</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>        userList <span style=color:#ff7b72;font-weight:700>=</span> userList<span style=color:#ff7b72;font-weight:700>.</span>stream<span style=color:#ff7b72;font-weight:700>()</span>
</span></span><span style=display:flex><span>                <span style=color:#ff7b72;font-weight:700>.</span>filter<span style=color:#ff7b72;font-weight:700>(</span>distinctByKey<span style=color:#ff7b72;font-weight:700>(</span>User<span style=color:#ff7b72;font-weight:700>::</span>getName<span style=color:#ff7b72;font-weight:700>))</span>
</span></span><span style=display:flex><span>                <span style=color:#ff7b72;font-weight:700>.</span>collect<span style=color:#ff7b72;font-weight:700>(</span>Collectors<span style=color:#ff7b72;font-weight:700>.</span>toList<span style=color:#ff7b72;font-weight:700>());</span>
</span></span><span style=display:flex><span>        userList<span style=color:#ff7b72;font-weight:700>.</span>forEach<span style=color:#ff7b72;font-weight:700>(</span>System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>::</span>println<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>        assertEquals<span style=color:#ff7b72;font-weight:700>(</span>2<span style=color:#ff7b72;font-weight:700>,</span> userList<span style=color:#ff7b72;font-weight:700>.</span>size<span style=color:#ff7b72;font-weight:700>());</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>private</span> <span style=color:#ff7b72>static</span> <span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>,</span> R<span style=color:#ff7b72;font-weight:700>&gt;</span> Predicate<span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#d2a8ff;font-weight:700>distinctByKey</span><span style=color:#ff7b72;font-weight:700>(</span>Function<span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>,</span> R<span style=color:#ff7b72;font-weight:700>&gt;</span> keyExtractor<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>        Set<span style=color:#ff7b72;font-weight:700>&lt;</span>R<span style=color:#ff7b72;font-weight:700>&gt;</span> seen <span style=color:#ff7b72;font-weight:700>=</span> ConcurrentHashMap<span style=color:#ff7b72;font-weight:700>.</span>newKeySet<span style=color:#ff7b72;font-weight:700>();</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> t <span style=color:#ff7b72;font-weight:700>-&gt;</span> seen<span style=color:#ff7b72;font-weight:700>.</span>add<span style=color:#ff7b72;font-weight:700>(</span>keyExtractor<span style=color:#ff7b72;font-weight:700>.</span>apply<span style=color:#ff7b72;font-weight:700>(</span>t<span style=color:#ff7b72;font-weight:700>));</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// é“¾æ¥ï¼šhttps://hacpai.com/article/1545321970124
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>
</span></span><span style=display:flex><span>divideBatchHandler<span style=color:#ff7b72;font-weight:700>(</span>nameList<span style=color:#ff7b72;font-weight:700>,</span>System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>::</span>println<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Â Â Â Â <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>     * è¿ç”¨åœºæ™¯:å½“æ•°æ®é‡è¿‡å¤§,éœ€è¦åˆ†æ‰¹å¤„ç†æ—¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>     * @author xkj
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>     * @param dataList éœ€è¦å¤„ç†çš„æ•°æ®
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>     * @param consumer  å¤„ç†å‡½æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>     * @since 
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>public</span> <span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#ff7b72>void</span> <span style=color:#d2a8ff;font-weight:700>divideBatchHandler</span><span style=color:#ff7b72;font-weight:700>(</span>List<span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>&gt;</span> dataList<span style=color:#ff7b72;font-weight:700>,</span> Consumer<span style=color:#ff7b72;font-weight:700>&lt;</span>List<span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>&gt;&gt;</span> consumer<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>        Optional<span style=color:#ff7b72;font-weight:700>.</span>ofNullable<span style=color:#ff7b72;font-weight:700>(</span>dataList<span style=color:#ff7b72;font-weight:700>).</span>ifPresent<span style=color:#ff7b72;font-weight:700>(</span>list <span style=color:#ff7b72;font-weight:700>-&gt;</span>
</span></span><span style=display:flex><span>                IntStream<span style=color:#ff7b72;font-weight:700>.</span>range<span style=color:#ff7b72;font-weight:700>(</span>0<span style=color:#ff7b72;font-weight:700>,</span> list<span style=color:#ff7b72;font-weight:700>.</span>size<span style=color:#ff7b72;font-weight:700>())</span>
</span></span><span style=display:flex><span>                        <span style=color:#ff7b72;font-weight:700>.</span>mapToObj<span style=color:#ff7b72;font-weight:700>(</span>i <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#ff7b72>new</span> AbstractMap<span style=color:#ff7b72;font-weight:700>.</span>SimpleImmutableEntry<span style=color:#ff7b72;font-weight:700>&lt;&gt;(</span>i<span style=color:#ff7b72;font-weight:700>,</span> list<span style=color:#ff7b72;font-weight:700>.</span>get<span style=color:#ff7b72;font-weight:700>(</span>i<span style=color:#ff7b72;font-weight:700>)))</span><span style=color:#8b949e;font-style:italic>// ç»™æ•°æ®ç¼–å·
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>                        <span style=color:#ff7b72;font-weight:700>.</span>collect<span style=color:#ff7b72;font-weight:700>(</span>Collectors<span style=color:#ff7b72;font-weight:700>.</span>groupingBy<span style=color:#ff7b72;font-weight:700>(</span>
</span></span><span style=display:flex><span>                                e <span style=color:#ff7b72;font-weight:700>-&gt;</span> e<span style=color:#ff7b72;font-weight:700>.</span>getKey<span style=color:#ff7b72;font-weight:700>()</span> <span style=color:#ff7b72;font-weight:700>/</span> 10<span style=color:#ff7b72;font-weight:700>,</span> 
</span></span><span style=display:flex><span>                                Collectors<span style=color:#ff7b72;font-weight:700>.</span>mapping<span style=color:#ff7b72;font-weight:700>(</span>Map<span style=color:#ff7b72;font-weight:700>.</span>Entry<span style=color:#ff7b72;font-weight:700>::</span>getValue<span style=color:#ff7b72;font-weight:700>,</span> Collectors<span style=color:#ff7b72;font-weight:700>.</span>toList<span style=color:#ff7b72;font-weight:700>())))</span> <span style=color:#8b949e;font-style:italic>// æŒ‰ç¼–å·åˆ†æ‰¹å¹¶åˆå¹¶ç¼–å·å¯¹åº”çš„å€¼
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>                        <span style=color:#ff7b72;font-weight:700>.</span>values<span style=color:#ff7b72;font-weight:700>()</span>
</span></span><span style=display:flex><span>                        <span style=color:#ff7b72;font-weight:700>.</span>parallelStream<span style=color:#ff7b72;font-weight:700>()</span><span style=color:#8b949e;font-style:italic>// å¹¶è¡Œå¤„ç†
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>                        <span style=color:#ff7b72;font-weight:700>.</span>forEach<span style=color:#ff7b72;font-weight:700>(</span>consumer<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#8b949e;font-style:italic>// æ‰§è¡Œå¤„ç†å‡½æ•°
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        <span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=23-è‡ªå®šä¹‰collector>2.3 è‡ªå®šä¹‰Collector<a hidden class=anchor aria-hidden=true href=#23-è‡ªå®šä¹‰collector>#</a></h2><p>Collectorä¸»è¦åŒ…å«äº”ä¸ªå‚æ•°ï¼Œå®ƒçš„è¡Œä¸ºä¹Ÿæ˜¯ç”±è¿™äº”ä¸ªå‚æ•°æ¥å®šä¹‰çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>Collectorå®ç°çš„ä¸‰ä¸ªæ³›å‹å…·ä½“æ˜¯ä»€ä¹ˆï¼š</p><ul><li>Tï¼ˆè¾“å…¥çš„å…ƒç´ ç±»å‹ï¼‰ï¼šT</li><li>Aï¼ˆç´¯ç§¯ç»“æœçš„å®¹å™¨ç±»å‹ï¼‰ï¼š</li><li>Rï¼ˆæœ€ç»ˆç”Ÿæˆçš„ç»“æœç±»å‹ï¼‰ï¼š</li></ul><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#ff7b72>public</span> <span style=color:#ff7b72>interface</span> <span style=color:#f0883e;font-weight:700>Collector</span><span style=color:#ff7b72;font-weight:700>&lt;</span>T<span style=color:#ff7b72;font-weight:700>,</span> A<span style=color:#ff7b72;font-weight:700>,</span> R<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// supplierå‚æ•°ç”¨äºç”Ÿæˆç»“æœå®¹å™¨ï¼Œå®¹å™¨ç±»å‹ä¸ºA
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    Supplier<span style=color:#ff7b72;font-weight:700>&lt;</span>A<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#d2a8ff;font-weight:700>supplier</span><span style=color:#ff7b72;font-weight:700>();</span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// accumulatorç”¨äºæ¶ˆè´¹å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯å½’çº³å…ƒç´ ï¼Œè¿™é‡Œçš„Tå°±æ˜¯å…ƒç´ ï¼Œå®ƒä¼šå°†æµä¸­çš„å…ƒç´ ä¸€ä¸ªä¸€ä¸ªä¸ç»“æœå®¹å™¨Aå‘ç”Ÿæ“ä½œ
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    BiConsumer<span style=color:#ff7b72;font-weight:700>&lt;</span>A<span style=color:#ff7b72;font-weight:700>,</span> T<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#d2a8ff;font-weight:700>accumulator</span><span style=color:#ff7b72;font-weight:700>();</span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// combinerç”¨äºä¸¤ä¸ªä¸¤ä¸ªåˆå¹¶å¹¶è¡Œæ‰§è¡Œçš„çº¿ç¨‹çš„æ‰§è¡Œç»“æœï¼Œå°†å…¶åˆå¹¶ä¸ºä¸€ä¸ªæœ€ç»ˆç»“æœA
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    BinaryOperator<span style=color:#ff7b72;font-weight:700>&lt;</span>A<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#d2a8ff;font-weight:700>combiner</span><span style=color:#ff7b72;font-weight:700>();</span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// finisherç”¨äºå°†ä¹‹å‰æ•´åˆå®Œçš„ç»“æœRè½¬æ¢æˆä¸ºA
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    Function<span style=color:#ff7b72;font-weight:700>&lt;</span>A<span style=color:#ff7b72;font-weight:700>,</span> R<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#d2a8ff;font-weight:700>finisher</span><span style=color:#ff7b72;font-weight:700>();</span>
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>// characteristicsè¡¨ç¤ºå½“å‰Collectorçš„ç‰¹å¾å€¼ï¼Œè¿™æ˜¯ä¸ªä¸å¯å˜Set
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    Set<span style=color:#ff7b72;font-weight:700>&lt;</span>Characteristics<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#d2a8ff;font-weight:700>characteristics</span><span style=color:#ff7b72;font-weight:700>();</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>}</span>
</span></span></code></pre></div><blockquote><p>æšä¸¾å¸¸é‡Characteristics ä¸­å…±æœ‰ä¸‰ä¸ªç‰¹å¾å€¼ï¼Œå®ƒä»¬çš„å…·ä½“å«ä¹‰å¦‚ä¸‹ï¼š</p><p>CONCURRENTï¼šè¡¨ç¤ºç»“æœå®¹å™¨åªæœ‰ä¸€ä¸ªï¼ˆå³ä½¿æ˜¯åœ¨å¹¶è¡Œæµçš„æƒ…å†µä¸‹ï¼‰ã€‚åªæœ‰åœ¨å¹¶è¡Œæµä¸”æ”¶é›†å™¨ä¸å…·å¤‡æ­¤ç‰¹æ€§çš„æƒ…å†µä¸‹ï¼Œcombiner()è¿”å›çš„lambdaè¡¨è¾¾å¼æ‰ä¼šæ‰§è¡Œï¼ˆä¸­é—´ç»“æœå®¹å™¨åªæœ‰ä¸€ä¸ªå°±æ— éœ€åˆå¹¶ï¼‰ã€‚è®¾ç½®æ­¤ç‰¹æ€§æ—¶æ„å‘³ç€å¤šä¸ªçº¿ç¨‹å¯ä»¥å¯¹åŒä¸€ä¸ªç»“æœå®¹å™¨è°ƒç”¨ï¼Œå› æ­¤ç»“æœå®¹å™¨å¿…é¡»æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>UNORDEREDï¼šè¡¨ç¤ºæµä¸­çš„å…ƒç´ æ— åºã€‚</p><p>IDENTITY_FINISHï¼šè¡¨ç¤ºä¸­é—´ç»“æœå®¹å™¨ç±»å‹ä¸æœ€ç»ˆç»“æœç±»å‹ä¸€è‡´ã€‚<strong>è®¾ç½®æ­¤ç‰¹æ€§æ—¶finiser()æ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨ã€‚</strong></p></blockquote><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8b949e;font-style:italic>/** è¯¥æ¡ˆä¾‹ä½œç”¨: å¯¹é›†åˆå…ƒç´  æ±‚å’Œå¹¶è½¬æˆå­—ç¬¦ä¸²
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>*/</span>
</span></span><span style=display:flex><span>    <span style=color:#d2a8ff;font-weight:700>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>public</span> <span style=color:#ff7b72>void</span> <span style=color:#d2a8ff;font-weight:700>Test</span><span style=color:#ff7b72;font-weight:700>(){</span>
</span></span><span style=display:flex><span>        <span style=color:#8b949e;font-style:italic>// 1. ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸´æ—¶å€¼çš„å®¹å™¨
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        <span style=color:#8b949e;font-style:italic>// 2. ç¬¬äºŒä¸ªå‚æ•°æ˜¯æŠŠå…¥å‚æ”¾åˆ°å®¹å™¨ä¸­
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        <span style=color:#8b949e;font-style:italic>// 3. ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æŠŠç¬¬äºŒæ­¥çš„å€¼åšä¸€ä¸ªç»“åˆæ”¾åˆ°å®¹å™¨ä¸­
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        <span style=color:#8b949e;font-style:italic>// 4. ç¬¬å››ä¸ªå‚æ•°æŠŠå®¹å™¨ä¸­çš„å€¼è½¬åŒ–æˆç»“æœç±»å‹
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>        <span style=color:#8b949e;font-style:italic>// 5. ç¬¬äº”ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªç‰¹å¾å€¼
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>
</span></span><span style=display:flex><span>        BiConsumer<span style=color:#ff7b72;font-weight:700>&lt;</span>List<span style=color:#ff7b72;font-weight:700>&lt;</span>Long<span style=color:#ff7b72;font-weight:700>&gt;,</span> Long<span style=color:#ff7b72;font-weight:700>&gt;</span> accumulator <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72;font-weight:700>(</span>x<span style=color:#ff7b72;font-weight:700>,</span> y<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>            x<span style=color:#ff7b72;font-weight:700>.</span>add<span style=color:#ff7b72;font-weight:700>(</span>y<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>return</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>};</span>
</span></span><span style=display:flex><span>        BinaryOperator<span style=color:#ff7b72;font-weight:700>&lt;</span>List<span style=color:#ff7b72;font-weight:700>&lt;</span>Long<span style=color:#ff7b72;font-weight:700>&gt;&gt;</span> combiner <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#ff7b72;font-weight:700>(</span>x<span style=color:#ff7b72;font-weight:700>,</span> y<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>-&gt;</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>            x<span style=color:#ff7b72;font-weight:700>.</span>addAll<span style=color:#ff7b72;font-weight:700>(</span>y<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>            <span style=color:#ff7b72>return</span> x<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72;font-weight:700>};</span>
</span></span><span style=display:flex><span>        Function<span style=color:#ff7b72;font-weight:700>&lt;</span>List<span style=color:#ff7b72;font-weight:700>&lt;</span>Long<span style=color:#ff7b72;font-weight:700>&gt;,</span> String<span style=color:#ff7b72;font-weight:700>&gt;</span> func <span style=color:#ff7b72;font-weight:700>=</span> x <span style=color:#ff7b72;font-weight:700>-&gt;</span> String<span style=color:#ff7b72;font-weight:700>.</span>valueOf<span style=color:#ff7b72;font-weight:700>(</span>x<span style=color:#ff7b72;font-weight:700>.</span>stream<span style=color:#ff7b72;font-weight:700>().</span>mapToLong<span style=color:#ff7b72;font-weight:700>(</span>y<span style=color:#ff7b72;font-weight:700>-&gt;</span> y<span style=color:#ff7b72;font-weight:700>).</span>sum<span style=color:#ff7b72;font-weight:700>());</span>
</span></span><span style=display:flex><span>        Collector<span style=color:#ff7b72;font-weight:700>&lt;</span>Long<span style=color:#ff7b72;font-weight:700>,</span> List<span style=color:#ff7b72;font-weight:700>&lt;</span>Long<span style=color:#ff7b72;font-weight:700>&gt;,</span> String<span style=color:#ff7b72;font-weight:700>&gt;</span> longSupplier <span style=color:#ff7b72;font-weight:700>=</span> Collector<span style=color:#ff7b72;font-weight:700>.</span>of<span style=color:#ff7b72;font-weight:700>(</span>ArrayList<span style=color:#ff7b72;font-weight:700>::</span><span style=color:#ff7b72>new</span><span style=color:#ff7b72;font-weight:700>,</span> accumulator<span style=color:#ff7b72;font-weight:700>,</span> combiner<span style=color:#ff7b72;font-weight:700>,</span>func<span style=color:#ff7b72;font-weight:700>,</span> Collector<span style=color:#ff7b72;font-weight:700>.</span>Characteristics<span style=color:#ff7b72;font-weight:700>.</span>UNORDERED<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        String collect <span style=color:#ff7b72;font-weight:700>=</span> Stream<span style=color:#ff7b72;font-weight:700>.</span>of<span style=color:#ff7b72;font-weight:700>(</span>1<span style=color:#ff7b72;font-weight:700>,</span> 1<span style=color:#ff7b72;font-weight:700>,</span> 2<span style=color:#ff7b72;font-weight:700>,</span> 2<span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>                <span style=color:#ff7b72;font-weight:700>.</span>map<span style=color:#ff7b72;font-weight:700>(</span>Long<span style=color:#ff7b72;font-weight:700>::</span><span style=color:#ff7b72>new</span><span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>                <span style=color:#ff7b72;font-weight:700>.</span>collect<span style=color:#ff7b72;font-weight:700>(</span>longSupplier<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>        System<span style=color:#ff7b72;font-weight:700>.</span>out<span style=color:#ff7b72;font-weight:700>.</span>println<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;collect = &#34;</span> <span style=color:#ff7b72;font-weight:700>+</span> collect<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>}</span>
</span></span></code></pre></div><p><a href=https://blog.csdn.net/xiliunian/article/details/88773718 target=_blank rel=noopener>java8æ–°ç‰¹æ€§(å››) Collectorï¼ˆæ”¶é›†å™¨ï¼‰_æˆæµå¹´çš„åšå®¢-CSDNåšå®¢_collector</a></p><p><a href=https://www.jianshu.com/p/7eaa0969b424 target=_blank rel=noopener>JavaåŸºç¡€ç³»åˆ—-Collectorå’ŒCollectors - ç®€ä¹¦ (jianshu.com)</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://xiaokunji.com/zh/tags/Java%E5%9F%BA%E7%A1%80.html>JavaåŸºç¡€</a></li><li><a href=https://xiaokunji.com/zh/tags/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6.html>javaåŠå…¶æ¡†æ¶</a></li></ul><nav class=paginav><a class=prev href=https://xiaokunji.com/zh/%E7%BB%BC%E5%90%88/%E4%B8%AA%E4%BA%BA%E5%B0%8F%E7%9F%A5%E8%AF%86/%E7%BD%91%E7%BB%9C/IO%E6%A8%A1%E5%9E%8B.html><span class=title>Â« ä¸Šä¸€é¡µ</span><br><span>IOæ¨¡å‹</span></a>
<a class=next href=https://xiaokunji.com/zh/%E7%BB%BC%E5%90%88/%E4%B8%AA%E4%BA%BA%E5%B0%8F%E7%9F%A5%E8%AF%86/java/javaEE.html><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>javaEE</span></a></nav></footer></article></main><footer class=footer><span>Copyright
&copy;
-2023
<a href=https://xiaokunji.com/zh/ style=color:#939393>ç±³äºŒ</a>
All Rights Reserved</span>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<span id=busuanzi_container><span class="fa fa-user">ç”¨æˆ·æ•°:</span><span id=busuanzi_value_site_uv></span>
<span class="fa fa-eye">è®¿é—®æ•°:</span><span id=busuanzi_value_site_pv></span></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="å¤åˆ¶";function s(){t.innerHTML="å·²å¤åˆ¶ï¼",setTimeout(()=>{t.innerHTML="å¤åˆ¶"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>