<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ä½¿ç”¨ | ç±³äºŒ</title><meta name=keywords content=" é…ç½®æ–‡ä»¶:   ,spring.datasource.type=com.alibaba.druid.pool.DruidDataSource     ,mybatisMapperæ–‡ä»¶é…ç½®åœ°å€,mybatisæ¡†æ¶çš„é…ç½®ä¸èµ·ä½œç”¨äº†, å¯åŠ¨ç±»:  , å®ä½“ç±», æ§åˆ¶ç±», ä¸šåŠ¡å±‚, daoå±‚, Mapperæ–‡ä»¶"><meta name=description content="     "><meta name=author content="xkj"><link rel=canonical href=https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/mybatis-plus/%E4%BD%BF%E7%94%A8/><link crossorigin=anonymous href=/assets/css/stylesheet.b3faf608c544858ba700943ffe182cb647f38432d29a07d73234965beacb26f6.css integrity="sha256-s/r2CMVEhYunAJQ//hgstkfzhDLSmgfXMjSWW+rLJvY=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://xiaokunji.com/img/Q.svg><link rel=icon type=image/png sizes=16x16 href=https://xiaokunji.com/img/Q.svg><link rel=icon type=image/png sizes=32x32 href=https://xiaokunji.com/img/Q.svg><link rel=apple-touch-icon href=https://xiaokunji.com/Q.svg><link rel=mask-icon href=https://xiaokunji.com/Q.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/mybatis-plus/%E4%BD%BF%E7%94%A8/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="ä½¿ç”¨"><meta property="og:description" content="     "><meta property="og:type" content="article"><meta property="og:url" content="https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/mybatis-plus/%E4%BD%BF%E7%94%A8/"><meta property="article:section" content="javaåŠå…¶æ¡†æ¶"><meta property="article:published_time" content="2023-08-22T00:00:00+00:00"><meta property="article:modified_time" content="2023-08-26T16:06:35+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="ä½¿ç”¨"><meta name=twitter:description content="     "><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":5,"name":"ä½¿ç”¨","item":"https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/mybatis-plus/%E4%BD%BF%E7%94%A8/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ä½¿ç”¨","name":"ä½¿ç”¨","description":"     ","keywords":[" é…ç½®æ–‡ä»¶:   ","spring.datasource.type=com.alibaba.druid.pool.DruidDataSource     ","mybatisMapperæ–‡ä»¶é…ç½®åœ°å€","mybatisæ¡†æ¶çš„é…ç½®ä¸èµ·ä½œç”¨äº†"," å¯åŠ¨ç±»:  "," å®ä½“ç±»"," æ§åˆ¶ç±»"," ä¸šåŠ¡å±‚"," daoå±‚"," Mapperæ–‡ä»¶"],"articleBody":"[toc]\nè¯¥æ–‡ç« åŒ…æ‹¬:\nä½¿ç”¨æä¾›çš„curd æ¡ä»¶æ„é€ å™¨ è‡ªå®šä¹‰sql åˆ†é¡µæ’ä»¶ sqlæ‰§è¡Œæ•ˆç‡æ’ä»¶ é…ç½®æ–‡ä»¶: application.properties\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver spring.datasource.url=jdbc:mysql://10.10.203.10:3306/jplatdvv?useUnicode=true\u0026characterEncoding=utf-8\u0026useSSL=false\u0026allowMultiQueries=true\u0026allowPublicKeyRetrieval=true spring.datasource.username=test spring.datasource.password=Jht123456 #spring.datasource.type=com.alibaba.druid.pool.DruidDataSource spring.datasource.initialSize=5 spring.datasource.minIdle=5 spring.datasource.maxActive=20 spring.datasource.maxWait=60000 #mybatisMapperæ–‡ä»¶é…ç½®åœ°å€ #mybatisæ¡†æ¶çš„é…ç½®ä¸èµ·ä½œç”¨äº† mybatis-plus.mapper-locations=classpath*:mapper/*Mapper.xml å¯åŠ¨ç±»: SpringBootTestMybatisPlusApplication.java\npackage com.example.demo; import org.springframework.boot.SpringApplication; import org.springframework.boot.autoconfigure.SpringBootApplication; import org.springframework.context.annotation.Bean; import org.springframework.transaction.annotation.EnableTransactionManagement; import com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor; import com.baomidou.mybatisplus.extension.plugins.PerformanceInterceptor; @SpringBootApplication @EnableTransactionManagement public class SpringBootTestMybatisPlusApplication { public static void main(String[] args) { SpringApplication.run(SpringBootTestMybatisPlusApplication.class, args); } /** * SQLæ‰§è¡Œæ•ˆç‡æ’ä»¶ */ @Bean // @Profile({\"dev\",\"test\"})// è®¾ç½® dev test ç¯å¢ƒå¼€å¯ public PerformanceInterceptor performanceInterceptor() { return new PerformanceInterceptor(); } /** * åˆ†é¡µæ’ä»¶ */ @Bean public PaginationInterceptor paginationInterceptor() { return new PaginationInterceptor(); } } å®ä½“ç±» package com.example.demo.entity; import com.baomidou.mybatisplus.annotation.TableField; import com.baomidou.mybatisplus.annotation.TableName; /** * ä½¿ç”¨å¸®åŠ©å®ä½“ç±» * * @author xkj * */ @TableName(value = \"jpf_help_info\") // æŒ‡å®šè¡¨å,é»˜è®¤ä½¿ç”¨ç±»å(é©¼å³°è½¬ä¸‹åˆ’çº¿) @Data public class HelpInfo { /** å¸®åŠ©ID */ private String id; /** å¸®åŠ©ç¼–ç  */ private String helpNo; /** å¸®åŠ©å†…å®¹ */ private String content; /** å¸®åŠ©æ ‡é¢˜ */ private String title; /** åˆ›å»ºäººID */ private String createId; /** åˆ›å»ºäººåç§° */ @TableField(exist=false) // æ ‡æ˜è¯¥å­—æ®µä¸æ˜¯æ•°æ®åº“å­—æ®µ,é»˜è®¤æ‰€æœ‰çš„å±æ€§éƒ½æ˜¯æ•°æ®åº“å­—æ®µ private String createName; /** ä¿®æ”¹äººID */ private String updateId; /** ä¿®æ”¹äººåç§° */ @TableField(exist=false) private String updateName; æ§åˆ¶ç±» package com.example.demo.web; import org.slf4j.Logger; import org.slf4j.LoggerFactory; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.util.StringUtils; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController; import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper; import com.baomidou.mybatisplus.core.metadata.IPage; import com.baomidou.mybatisplus.extension.plugins.pagination.Page; import com.example.demo.dao.HelpDao; import com.example.demo.entity.HelpInfo; @RequestMapping(\"test\") @RestController public class TestController { private static Logger logger = LoggerFactory.getLogger(TestController.class); @Autowired private HelpDao helpDao; @RequestMapping(\"helpPage\") public IPage\u003cHelpInfo\u003e getHelpPage(String content) { IPage\u003cHelpInfo\u003e page=new Page\u003c\u003e(1,4); QueryWrapper\u003cHelpInfo\u003e wrapper=new QueryWrapper\u003c\u003e(); wrapper.select(\"HELP_NO\",\"TITLE\",\"CONTENT\").eq(\"id\", \"1\"); wrapper.like(!StringUtils.isEmpty(content), \"CONTENT\", content); // é»˜è®¤ç”¨ and è¿æ¥ IPage\u003cHelpInfo\u003e helpInfos = helpDao.selectPage(page,wrapper); logger.info(\"è¿”å‚:{}\",helpInfos); return helpInfos; } @RequestMapping(\"helpOne\") public HelpInfo getHelpOne() { QueryWrapper\u003cHelpInfo\u003e wrapper=new QueryWrapper\u003c\u003e() ; wrapper.select(\"HELP_NO\",\"TITLE\",\"CONTENT\") .eq(\"id\", \"1\") .or() .eq(\"update_Id\", \"19\") //\t.apply(\"left join jpf_account\") // apply å…è®¸è‡ªå®šä¹‰sql .last(\"limit 1\");// last : æ— è§†javaä»£ç é¡ºåº,ä¼šç›´æ¥æ”¾åˆ°sqlæœ€åé¢ HelpInfo helpInfo = helpDao.selectOne(wrapper); logger.info(\"è¿”å‚:{}\",helpInfo); return helpInfo; } @RequestMapping(\"helpQuery\") public HelpInfo getHelpQuery() { QueryWrapper\u003cHelpInfo\u003e wrapper=new QueryWrapper\u003c\u003e() ; wrapper.eq(\"id\", \"1\").or().eq(\"update_Id\", \"19\").last(\"limit 1\"); logger.info(\"CustomSqlSegment:{}\",wrapper.getCustomSqlSegment());// sqlæ¡ä»¶, å¸¦where // CustomSqlSegment:WHERE id = #{ew.paramNameValuePairs.MPGENVAL1} OR update_Id = #{ew.paramNameValuePairs.MPGENVAL2} limit 1 logger.info(\"SqlSegment:{}\",wrapper.getSqlSegment());// sqlæ¡ä»¶, ä¸å¸¦where // SqlSegment:id = #{ew.paramNameValuePairs.MPGENVAL1} OR update_Id = #{ew.paramNameValuePairs.MPGENVAL2} limit 1 HelpInfo helpInfo = helpDao.getHelpQuery(wrapper); logger.info(\"è¿”å‚:{}\",helpInfo); return helpInfo; } @RequestMapping(\"helpQueryByMe\") public HelpInfo getHelpQueryByMe() { QueryWrapper\u003cHelpInfo\u003e wrapper=new QueryWrapper\u003c\u003e() ; wrapper.eq(\"id\", \"1\").or().eq(\"update_Id\", \"19\").last(\"limit 1\").select(\"HELP_NO\",\"TITLE\",\"CONTENT\"); String id=\"1\"; HelpInfo helpInfo = helpDao.getHelpQueryByMe(id); // å…è®¸å®Œå…¨è‡ªå®šä¹‰sql,å’Œmybatisä¸€æ ·ä½¿ç”¨(spring bootçš„é…ç½®ä¸ä¸€æ ·) logger.info(\"è¿”å‚:{}\",helpInfo); return helpInfo; } } ä¸šåŠ¡å±‚ // å¯ä»¥ä½¿ç”¨ ServiceImplç±»ä¸‹çš„æ–¹æ³•, æ›´å¤šçš„æ“ä½œæ•°æ®çš„æ“ä½œ @Service public class AccountServiceImpl extends ServiceImpl\u003cAccountMapper, JbpAccount\u003e implements AccountService { } daoå±‚ package com.example.demo.dao; import org.apache.ibatis.annotations.Mapper; import org.apache.ibatis.annotations.Param; import com.baomidou.mybatisplus.core.conditions.Wrapper; import com.baomidou.mybatisplus.core.mapper.BaseMapper; import com.example.demo.entity.HelpInfo; @Mapper public interface HelpDao extends BaseMapper\u003cHelpInfo\u003e { public HelpInfo getHelpQuery(@Param(\"ew\") Wrapper\u003cHelpInfo\u003e wrapper); public HelpInfo getHelpQueryByMe(@Param(\"id\") String id); } Mapperæ–‡ä»¶ \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e \u003c!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"\u003e ","wordCount":"905","inLanguage":"zh","datePublished":"2023-08-22T00:00:00Z","dateModified":"2023-08-26T16:06:35.611203724Z","author":{"@type":"Person","name":"xkj"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/mybatis-plus/%E4%BD%BF%E7%94%A8/"},"publisher":{"@type":"Organization","name":"ç±³äºŒ","logo":{"@type":"ImageObject","url":"https://xiaokunji.com/img/Q.svg"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xiaokunji.com/zh/ accesskey=h title="ç±³äºŒ (Alt + H)"><img src=https://xiaokunji.com/img/Q.svg alt aria-label=logo height=35>ç±³äºŒ</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://xiaokunji.com/en/ title=English aria-label=English>English</a></li></ul></div></div><ul id=menu><li><a href=https://xiaokunji.com/zh/ title=ğŸ ä¸»é¡µ><span>ğŸ ä¸»é¡µ</span></a></li><li><a href=https://xiaokunji.com/zh/search title="ğŸ”æœç´¢ (Alt + /)" accesskey=/><span>ğŸ”æœç´¢</span></a></li><li><a href=https://xiaokunji.com/zh/post title=ğŸ“šæ–‡ç« ><span>ğŸ“šæ–‡ç« </span></a></li><li><a href=https://xiaokunji.com/zh/archives/ title=â±æ—¶é—´è½´><span>â±æ—¶é—´è½´</span></a></li><li><a href=https://xiaokunji.com/zh/tags title=ğŸ”–æ ‡ç­¾><span>ğŸ”–æ ‡ç­¾</span></a></li><li><a href=https://xiaokunji.com/zh/categories title=ğŸ“–åˆ†ç±»><span>ğŸ“–åˆ†ç±»</span></a></li><li><a href=https://xiaokunji.com/zh/links title=ğŸ¤å‹é“¾><span>ğŸ¤å‹é“¾</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><nav aria-label=breadcrumb><ul><a href=https://xiaokunji.com/zh/>ç±³äºŒ</a> <span>></span>
<a href=https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/>javaåŠå…¶æ¡†æ¶</a> <span>></span>
<a href=https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/mybatis-plus/>MyBatis-Plus</a> <span>></span></ul></nav><h1 class=post-title>ä½¿ç”¨</h1><div class=post-description></div><div class=post-meta><span title='2023-08-22 00:00:00 +0000 UTC'>2023-08-22</span>&nbsp;Â·&nbsp;2 åˆ†é’Ÿ&nbsp;Â·&nbsp;xkj
&nbsp;|&nbsp;åˆ†ç±»: &nbsp;<ul class=post-categories-meta><a href=https://xiaokunji.com/zh/categories/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/>javaåŠå…¶æ¡†æ¶</a></ul><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<span id=busuanzi_container_page_pv>&nbsp;| è®¿é—®: <span id=busuanzi_value_page_pv></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6 aria-label=é…ç½®æ–‡ä»¶:>é…ç½®æ–‡ä»¶:</a></li><li><a href=#%e5%90%af%e5%8a%a8%e7%b1%bb aria-label=å¯åŠ¨ç±»:>å¯åŠ¨ç±»:</a></li><li><a href=#%e5%ae%9e%e4%bd%93%e7%b1%bb aria-label=å®ä½“ç±»>å®ä½“ç±»</a></li><li><a href=#%e6%8e%a7%e5%88%b6%e7%b1%bb aria-label=æ§åˆ¶ç±»>æ§åˆ¶ç±»</a></li><li><a href=#%e4%b8%9a%e5%8a%a1%e5%b1%82 aria-label=ä¸šåŠ¡å±‚>ä¸šåŠ¡å±‚</a></li><li><a href=#dao%e5%b1%82 aria-label=daoå±‚>daoå±‚</a></li><li><a href=#mapper%e6%96%87%e4%bb%b6 aria-label=Mapperæ–‡ä»¶>Mapperæ–‡ä»¶</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>[toc]</p><p>è¯¥æ–‡ç« åŒ…æ‹¬:</p><ul><li>ä½¿ç”¨æä¾›çš„curd</li><li>æ¡ä»¶æ„é€ å™¨</li><li>è‡ªå®šä¹‰sql</li><li>åˆ†é¡µæ’ä»¶</li><li>sqlæ‰§è¡Œæ•ˆç‡æ’ä»¶</li></ul><h1 id=é…ç½®æ–‡ä»¶>é…ç½®æ–‡ä»¶:<a hidden class=anchor aria-hidden=true href=#é…ç½®æ–‡ä»¶>#</a></h1><p>application.properties</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span>spring.datasource.driver-class-name<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>com.mysql.jdbc.Driver</span>
</span></span><span style=display:flex><span>spring.datasource.url<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>jdbc:mysql://10.10.203.10:3306/jplatdvv?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;allowMultiQueries=true&amp;allowPublicKeyRetrieval=true</span>
</span></span><span style=display:flex><span>spring.datasource.username<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>test</span>
</span></span><span style=display:flex><span>spring.datasource.password<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>Jht123456</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#spring.datasource.type=com.alibaba.druid.pool.DruidDataSource     </span>
</span></span><span style=display:flex><span>spring.datasource.initialSize<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>5    </span>
</span></span><span style=display:flex><span>spring.datasource.minIdle<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>5    </span>
</span></span><span style=display:flex><span>spring.datasource.maxActive<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>20       </span>
</span></span><span style=display:flex><span>spring.datasource.maxWait<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>60000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#mybatisMapperæ–‡ä»¶é…ç½®åœ°å€</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>#mybatisæ¡†æ¶çš„é…ç½®ä¸èµ·ä½œç”¨äº†</span>
</span></span><span style=display:flex><span>mybatis-plus.mapper-locations<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>classpath*:mapper/*Mapper.xml </span>
</span></span></code></pre></div><h1 id=å¯åŠ¨ç±»>å¯åŠ¨ç±»:<a hidden class=anchor aria-hidden=true href=#å¯åŠ¨ç±»>#</a></h1><p>SpringBootTestMybatisPlusApplication.java</p><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#ff7b72>package</span> <span style=color:#ff7b72>com.example.demo</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>org.springframework.boot.SpringApplication</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>org.springframework.boot.autoconfigure.SpringBootApplication</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>org.springframework.context.annotation.Bean</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>org.springframework.transaction.annotation.EnableTransactionManagement</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>com.baomidou.mybatisplus.extension.plugins.PaginationInterceptor</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>com.baomidou.mybatisplus.extension.plugins.PerformanceInterceptor</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>@SpringBootApplication</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>@EnableTransactionManagement</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>public</span> <span style=color:#ff7b72>class</span> <span style=color:#f0883e;font-weight:700>SpringBootTestMybatisPlusApplication</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>public</span> <span style=color:#ff7b72>static</span> <span style=color:#ff7b72>void</span> <span style=color:#d2a8ff;font-weight:700>main</span><span style=color:#ff7b72;font-weight:700>(</span>String<span style=color:#ff7b72;font-weight:700>[]</span> args<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>		SpringApplication<span style=color:#ff7b72;font-weight:700>.</span>run<span style=color:#ff7b72;font-weight:700>(</span>SpringBootTestMybatisPlusApplication<span style=color:#ff7b72;font-weight:700>.</span>class<span style=color:#ff7b72;font-weight:700>,</span> args<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	 <span style=color:#8b949e;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>     * SQLæ‰§è¡Œæ•ˆç‡æ’ä»¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#d2a8ff;font-weight:700>@Bean</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>//    @Profile({&#34;dev&#34;,&#34;test&#34;})// è®¾ç½® dev test ç¯å¢ƒå¼€å¯
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>    <span style=color:#ff7b72>public</span> PerformanceInterceptor <span style=color:#d2a8ff;font-weight:700>performanceInterceptor</span><span style=color:#ff7b72;font-weight:700>()</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>new</span> PerformanceInterceptor<span style=color:#ff7b72;font-weight:700>();</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#8b949e;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>     * åˆ†é¡µæ’ä»¶
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#d2a8ff;font-weight:700>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72>public</span> PaginationInterceptor <span style=color:#d2a8ff;font-weight:700>paginationInterceptor</span><span style=color:#ff7b72;font-weight:700>()</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#ff7b72>return</span> <span style=color:#ff7b72>new</span> PaginationInterceptor<span style=color:#ff7b72;font-weight:700>();</span>
</span></span><span style=display:flex><span>    <span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>}</span>
</span></span></code></pre></div><h1 id=å®ä½“ç±»>å®ä½“ç±»<a hidden class=anchor aria-hidden=true href=#å®ä½“ç±»>#</a></h1><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#ff7b72>package</span> <span style=color:#ff7b72>com.example.demo.entity</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>com.baomidou.mybatisplus.annotation.TableField</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>com.baomidou.mybatisplus.annotation.TableName</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>/**
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic> * ä½¿ç”¨å¸®åŠ©å®ä½“ç±»
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic> * 
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic> * @author xkj
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic> *
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic> */</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>@TableName</span><span style=color:#ff7b72;font-weight:700>(</span>value <span style=color:#ff7b72;font-weight:700>=</span> <span style=color:#a5d6ff>&#34;jpf_help_info&#34;</span><span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#8b949e;font-style:italic>// æŒ‡å®šè¡¨å,é»˜è®¤ä½¿ç”¨ç±»å(é©¼å³°è½¬ä¸‹åˆ’çº¿)
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#d2a8ff;font-weight:700>@Data</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>public</span> <span style=color:#ff7b72>class</span> <span style=color:#f0883e;font-weight:700>HelpInfo</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>/** å¸®åŠ©ID */</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>private</span> String id<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>/** å¸®åŠ©ç¼–ç  */</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>private</span> String helpNo<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>/** å¸®åŠ©å†…å®¹ */</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>private</span> String content<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>/** å¸®åŠ©æ ‡é¢˜ */</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>private</span> String title<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>/** åˆ›å»ºäººID */</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>private</span> String createId<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>/** åˆ›å»ºäººåç§° */</span>
</span></span><span style=display:flex><span>	<span style=color:#d2a8ff;font-weight:700>@TableField</span><span style=color:#ff7b72;font-weight:700>(</span>exist<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#79c0ff>false</span><span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#8b949e;font-style:italic>// æ ‡æ˜è¯¥å­—æ®µä¸æ˜¯æ•°æ®åº“å­—æ®µ,é»˜è®¤æ‰€æœ‰çš„å±æ€§éƒ½æ˜¯æ•°æ®åº“å­—æ®µ
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>	<span style=color:#ff7b72>private</span> String createName<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>/** ä¿®æ”¹äººID */</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>private</span> String updateId<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>	<span style=color:#8b949e;font-style:italic>/** ä¿®æ”¹äººåç§° */</span>
</span></span><span style=display:flex><span>	<span style=color:#d2a8ff;font-weight:700>@TableField</span><span style=color:#ff7b72;font-weight:700>(</span>exist<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#79c0ff>false</span><span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>private</span> String updateName<span style=color:#ff7b72;font-weight:700>;</span>
</span></span></code></pre></div><h1 id=æ§åˆ¶ç±»>æ§åˆ¶ç±»<a hidden class=anchor aria-hidden=true href=#æ§åˆ¶ç±»>#</a></h1><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#ff7b72>package</span> <span style=color:#ff7b72>com.example.demo.web</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>org.slf4j.Logger</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>org.slf4j.LoggerFactory</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>org.springframework.beans.factory.annotation.Autowired</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>org.springframework.util.StringUtils</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>org.springframework.web.bind.annotation.RequestMapping</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>org.springframework.web.bind.annotation.RestController</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>com.baomidou.mybatisplus.core.conditions.query.QueryWrapper</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>com.baomidou.mybatisplus.core.metadata.IPage</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>com.baomidou.mybatisplus.extension.plugins.pagination.Page</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>com.example.demo.dao.HelpDao</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>com.example.demo.entity.HelpInfo</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>@RequestMapping</span><span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;test&#34;</span><span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>@RestController</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>public</span> <span style=color:#ff7b72>class</span> <span style=color:#f0883e;font-weight:700>TestController</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>private</span> <span style=color:#ff7b72>static</span> Logger logger <span style=color:#ff7b72;font-weight:700>=</span> LoggerFactory<span style=color:#ff7b72;font-weight:700>.</span>getLogger<span style=color:#ff7b72;font-weight:700>(</span>TestController<span style=color:#ff7b72;font-weight:700>.</span>class<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#d2a8ff;font-weight:700>@Autowired</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>private</span> HelpDao helpDao<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#d2a8ff;font-weight:700>@RequestMapping</span><span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;helpPage&#34;</span><span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>public</span> IPage<span style=color:#ff7b72;font-weight:700>&lt;</span>HelpInfo<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#d2a8ff;font-weight:700>getHelpPage</span><span style=color:#ff7b72;font-weight:700>(</span>String content<span style=color:#ff7b72;font-weight:700>)</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>		IPage<span style=color:#ff7b72;font-weight:700>&lt;</span>HelpInfo<span style=color:#ff7b72;font-weight:700>&gt;</span> page<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#ff7b72>new</span> Page<span style=color:#ff7b72;font-weight:700>&lt;&gt;(</span>1<span style=color:#ff7b72;font-weight:700>,</span>4<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>		QueryWrapper<span style=color:#ff7b72;font-weight:700>&lt;</span>HelpInfo<span style=color:#ff7b72;font-weight:700>&gt;</span> wrapper<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#ff7b72>new</span> QueryWrapper<span style=color:#ff7b72;font-weight:700>&lt;&gt;();</span>
</span></span><span style=display:flex><span>		wrapper<span style=color:#ff7b72;font-weight:700>.</span>select<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;HELP_NO&#34;</span><span style=color:#ff7b72;font-weight:700>,</span><span style=color:#a5d6ff>&#34;TITLE&#34;</span><span style=color:#ff7b72;font-weight:700>,</span><span style=color:#a5d6ff>&#34;CONTENT&#34;</span><span style=color:#ff7b72;font-weight:700>).</span>eq<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;id&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;1&#34;</span><span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>		wrapper<span style=color:#ff7b72;font-weight:700>.</span>like<span style=color:#ff7b72;font-weight:700>(!</span>StringUtils<span style=color:#ff7b72;font-weight:700>.</span>isEmpty<span style=color:#ff7b72;font-weight:700>(</span>content<span style=color:#ff7b72;font-weight:700>),</span> <span style=color:#a5d6ff>&#34;CONTENT&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> content<span style=color:#ff7b72;font-weight:700>);</span> <span style=color:#8b949e;font-style:italic>// é»˜è®¤ç”¨ and è¿æ¥
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>		IPage<span style=color:#ff7b72;font-weight:700>&lt;</span>HelpInfo<span style=color:#ff7b72;font-weight:700>&gt;</span> helpInfos <span style=color:#ff7b72;font-weight:700>=</span> helpDao<span style=color:#ff7b72;font-weight:700>.</span>selectPage<span style=color:#ff7b72;font-weight:700>(</span>page<span style=color:#ff7b72;font-weight:700>,</span>wrapper<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>		logger<span style=color:#ff7b72;font-weight:700>.</span>info<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;è¿”å‚:{}&#34;</span><span style=color:#ff7b72;font-weight:700>,</span>helpInfos<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span> helpInfos<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#d2a8ff;font-weight:700>@RequestMapping</span><span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;helpOne&#34;</span><span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>public</span> HelpInfo <span style=color:#d2a8ff;font-weight:700>getHelpOne</span><span style=color:#ff7b72;font-weight:700>()</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>		QueryWrapper<span style=color:#ff7b72;font-weight:700>&lt;</span>HelpInfo<span style=color:#ff7b72;font-weight:700>&gt;</span> wrapper<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#ff7b72>new</span> QueryWrapper<span style=color:#ff7b72;font-weight:700>&lt;&gt;()</span> <span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>		wrapper<span style=color:#ff7b72;font-weight:700>.</span>select<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;HELP_NO&#34;</span><span style=color:#ff7b72;font-weight:700>,</span><span style=color:#a5d6ff>&#34;TITLE&#34;</span><span style=color:#ff7b72;font-weight:700>,</span><span style=color:#a5d6ff>&#34;CONTENT&#34;</span><span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>				<span style=color:#ff7b72;font-weight:700>.</span>eq<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;id&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;1&#34;</span><span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>				<span style=color:#ff7b72;font-weight:700>.</span>or<span style=color:#ff7b72;font-weight:700>()</span>
</span></span><span style=display:flex><span>				<span style=color:#ff7b72;font-weight:700>.</span>eq<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;update_Id&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;19&#34;</span><span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>//				.apply(&#34;left join jpf_account&#34;)  // apply å…è®¸è‡ªå®šä¹‰sql
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>				<span style=color:#ff7b72;font-weight:700>.</span>last<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;limit 1&#34;</span><span style=color:#ff7b72;font-weight:700>);</span><span style=color:#8b949e;font-style:italic>// last : æ— è§†javaä»£ç é¡ºåº,ä¼šç›´æ¥æ”¾åˆ°sqlæœ€åé¢
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>				
</span></span><span style=display:flex><span>		HelpInfo helpInfo <span style=color:#ff7b72;font-weight:700>=</span> helpDao<span style=color:#ff7b72;font-weight:700>.</span>selectOne<span style=color:#ff7b72;font-weight:700>(</span>wrapper<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>		logger<span style=color:#ff7b72;font-weight:700>.</span>info<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;è¿”å‚:{}&#34;</span><span style=color:#ff7b72;font-weight:700>,</span>helpInfo<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span> helpInfo<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#d2a8ff;font-weight:700>@RequestMapping</span><span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;helpQuery&#34;</span><span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>public</span> HelpInfo <span style=color:#d2a8ff;font-weight:700>getHelpQuery</span><span style=color:#ff7b72;font-weight:700>()</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>		QueryWrapper<span style=color:#ff7b72;font-weight:700>&lt;</span>HelpInfo<span style=color:#ff7b72;font-weight:700>&gt;</span> wrapper<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#ff7b72>new</span> QueryWrapper<span style=color:#ff7b72;font-weight:700>&lt;&gt;()</span> <span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>		wrapper<span style=color:#ff7b72;font-weight:700>.</span>eq<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;id&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;1&#34;</span><span style=color:#ff7b72;font-weight:700>).</span>or<span style=color:#ff7b72;font-weight:700>().</span>eq<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;update_Id&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;19&#34;</span><span style=color:#ff7b72;font-weight:700>).</span>last<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;limit 1&#34;</span><span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>		logger<span style=color:#ff7b72;font-weight:700>.</span>info<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;CustomSqlSegment:{}&#34;</span><span style=color:#ff7b72;font-weight:700>,</span>wrapper<span style=color:#ff7b72;font-weight:700>.</span>getCustomSqlSegment<span style=color:#ff7b72;font-weight:700>());</span><span style=color:#8b949e;font-style:italic>// sqlæ¡ä»¶, å¸¦where
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>		<span style=color:#8b949e;font-style:italic>// CustomSqlSegment:WHERE id = #{ew.paramNameValuePairs.MPGENVAL1} OR update_Id = #{ew.paramNameValuePairs.MPGENVAL2} limit 1
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>		logger<span style=color:#ff7b72;font-weight:700>.</span>info<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;SqlSegment:{}&#34;</span><span style=color:#ff7b72;font-weight:700>,</span>wrapper<span style=color:#ff7b72;font-weight:700>.</span>getSqlSegment<span style=color:#ff7b72;font-weight:700>());</span><span style=color:#8b949e;font-style:italic>// sqlæ¡ä»¶, ä¸å¸¦where
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>		<span style=color:#8b949e;font-style:italic>// SqlSegment:id = #{ew.paramNameValuePairs.MPGENVAL1} OR update_Id = #{ew.paramNameValuePairs.MPGENVAL2} limit 1
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>		HelpInfo helpInfo <span style=color:#ff7b72;font-weight:700>=</span> helpDao<span style=color:#ff7b72;font-weight:700>.</span>getHelpQuery<span style=color:#ff7b72;font-weight:700>(</span>wrapper<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>		logger<span style=color:#ff7b72;font-weight:700>.</span>info<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;è¿”å‚:{}&#34;</span><span style=color:#ff7b72;font-weight:700>,</span>helpInfo<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span> helpInfo<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#d2a8ff;font-weight:700>@RequestMapping</span><span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;helpQueryByMe&#34;</span><span style=color:#ff7b72;font-weight:700>)</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>public</span> HelpInfo <span style=color:#d2a8ff;font-weight:700>getHelpQueryByMe</span><span style=color:#ff7b72;font-weight:700>()</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>		QueryWrapper<span style=color:#ff7b72;font-weight:700>&lt;</span>HelpInfo<span style=color:#ff7b72;font-weight:700>&gt;</span> wrapper<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#ff7b72>new</span> QueryWrapper<span style=color:#ff7b72;font-weight:700>&lt;&gt;()</span> <span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>		wrapper<span style=color:#ff7b72;font-weight:700>.</span>eq<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;id&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;1&#34;</span><span style=color:#ff7b72;font-weight:700>).</span>or<span style=color:#ff7b72;font-weight:700>().</span>eq<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;update_Id&#34;</span><span style=color:#ff7b72;font-weight:700>,</span> <span style=color:#a5d6ff>&#34;19&#34;</span><span style=color:#ff7b72;font-weight:700>).</span>last<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;limit 1&#34;</span><span style=color:#ff7b72;font-weight:700>).</span>select<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;HELP_NO&#34;</span><span style=color:#ff7b72;font-weight:700>,</span><span style=color:#a5d6ff>&#34;TITLE&#34;</span><span style=color:#ff7b72;font-weight:700>,</span><span style=color:#a5d6ff>&#34;CONTENT&#34;</span><span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>		String id<span style=color:#ff7b72;font-weight:700>=</span><span style=color:#a5d6ff>&#34;1&#34;</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>		HelpInfo helpInfo <span style=color:#ff7b72;font-weight:700>=</span> helpDao<span style=color:#ff7b72;font-weight:700>.</span>getHelpQueryByMe<span style=color:#ff7b72;font-weight:700>(</span>id<span style=color:#ff7b72;font-weight:700>);</span> <span style=color:#8b949e;font-style:italic>// å…è®¸å®Œå…¨è‡ªå®šä¹‰sql,å’Œmybatisä¸€æ ·ä½¿ç”¨(spring bootçš„é…ç½®ä¸ä¸€æ ·)
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span>		logger<span style=color:#ff7b72;font-weight:700>.</span>info<span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;è¿”å‚:{}&#34;</span><span style=color:#ff7b72;font-weight:700>,</span>helpInfo<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>		<span style=color:#ff7b72>return</span> helpInfo<span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72;font-weight:700>}</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>}</span>
</span></span></code></pre></div><h1 id=ä¸šåŠ¡å±‚>ä¸šåŠ¡å±‚<a hidden class=anchor aria-hidden=true href=#ä¸šåŠ¡å±‚>#</a></h1><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#8b949e;font-style:italic>// å¯ä»¥ä½¿ç”¨ ServiceImplç±»ä¸‹çš„æ–¹æ³•, æ›´å¤šçš„æ“ä½œæ•°æ®çš„æ“ä½œ
</span></span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic></span><span style=color:#d2a8ff;font-weight:700>@Service</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>public</span> <span style=color:#ff7b72>class</span> <span style=color:#f0883e;font-weight:700>AccountServiceImpl</span> <span style=color:#ff7b72>extends</span> ServiceImpl<span style=color:#ff7b72;font-weight:700>&lt;</span>AccountMapper<span style=color:#ff7b72;font-weight:700>,</span> JbpAccount<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#ff7b72>implements</span> AccountService <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>}</span>
</span></span></code></pre></div><h1 id=daoå±‚>daoå±‚<a hidden class=anchor aria-hidden=true href=#daoå±‚>#</a></h1><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#ff7b72>package</span> <span style=color:#ff7b72>com.example.demo.dao</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>org.apache.ibatis.annotations.Mapper</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>org.apache.ibatis.annotations.Param</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>com.baomidou.mybatisplus.core.conditions.Wrapper</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>com.baomidou.mybatisplus.core.mapper.BaseMapper</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>import</span> <span style=color:#ff7b72>com.example.demo.entity.HelpInfo</span><span style=color:#ff7b72;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#d2a8ff;font-weight:700>@Mapper</span>
</span></span><span style=display:flex><span><span style=color:#ff7b72>public</span> <span style=color:#ff7b72>interface</span> <span style=color:#f0883e;font-weight:700>HelpDao</span> <span style=color:#ff7b72>extends</span> BaseMapper<span style=color:#ff7b72;font-weight:700>&lt;</span>HelpInfo<span style=color:#ff7b72;font-weight:700>&gt;</span> <span style=color:#ff7b72;font-weight:700>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>public</span> HelpInfo <span style=color:#d2a8ff;font-weight:700>getHelpQuery</span><span style=color:#ff7b72;font-weight:700>(</span><span style=color:#d2a8ff;font-weight:700>@Param</span><span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;ew&#34;</span><span style=color:#ff7b72;font-weight:700>)</span> Wrapper<span style=color:#ff7b72;font-weight:700>&lt;</span>HelpInfo<span style=color:#ff7b72;font-weight:700>&gt;</span> wrapper<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#ff7b72>public</span> HelpInfo <span style=color:#d2a8ff;font-weight:700>getHelpQueryByMe</span><span style=color:#ff7b72;font-weight:700>(</span><span style=color:#d2a8ff;font-weight:700>@Param</span><span style=color:#ff7b72;font-weight:700>(</span><span style=color:#a5d6ff>&#34;id&#34;</span><span style=color:#ff7b72;font-weight:700>)</span> String id<span style=color:#ff7b72;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff7b72;font-weight:700>}</span>
</span></span></code></pre></div><h1 id=mapperæ–‡ä»¶>Mapperæ–‡ä»¶<a hidden class=anchor aria-hidden=true href=#mapperæ–‡ä»¶>#</a></h1><div class=highlight><pre tabindex=0 style=color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#8b949e;font-weight:700;font-style:italic>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#8b949e;font-weight:700;font-style:italic>&lt;!DOCTYPE mapper PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34; &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span style=display:flex><span><span style=color:#7ee787>&lt;mapper</span> namespace=<span style=color:#a5d6ff>&#34;com.example.demo.dao.HelpDao&#34;</span><span style=color:#7ee787>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	 <span style=color:#7ee787>&lt;select</span> id=<span style=color:#a5d6ff>&#34;getHelpQuery&#34;</span> resultType=<span style=color:#a5d6ff>&#34;com.example.demo.entity.HelpInfo&#34;</span><span style=color:#7ee787>&gt;</span>
</span></span><span style=display:flex><span>	 	 SELECT * FROM jpf_help_info ${ew.customSqlSegment}
</span></span><span style=display:flex><span><span style=color:#8b949e;font-style:italic>&lt;!-- 	 	 customSqlSegment: mybatis-Plus æ¡†æ¶çš„ä¸€ä¸ªå˜é‡,é‡Œé¢æ˜¯å¸¦where çš„ sql, å¯çœ‹ä»£ç  --&gt;</span>
</span></span><span style=display:flex><span>	 <span style=color:#7ee787>&lt;/select&gt;</span>
</span></span><span style=display:flex><span>	 
</span></span><span style=display:flex><span>	 <span style=color:#7ee787>&lt;select</span> id=<span style=color:#a5d6ff>&#34;getHelpQueryByMe&#34;</span> resultType=<span style=color:#a5d6ff>&#34;com.example.demo.entity.HelpInfo&#34;</span><span style=color:#7ee787>&gt;</span>
</span></span><span style=display:flex><span>	 	SELECT * FROM jpf_help_info where id = #{id}
</span></span><span style=display:flex><span>	 <span style=color:#7ee787>&lt;/select&gt;</span>
</span></span><span style=display:flex><span><span style=color:#7ee787>&lt;/mapper&gt;</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://xiaokunji.com/zh/tags/mybatis-plus/>MyBatis-Plus</a></li><li><a href=https://xiaokunji.com/zh/tags/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/>javaåŠå…¶æ¡†æ¶</a></li></ul><nav class=paginav><a class=prev href=https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/dubbo/%E4%BD%BF%E7%94%A8/><span class=title>Â« ä¸Šä¸€é¡µ</span><br><span>ä½¿ç”¨</span></a>
<a class=next href=https://xiaokunji.com/zh/%E7%BB%BC%E5%90%88/%E4%B8%AA%E4%BA%BA%E5%B0%8F%E7%9F%A5%E8%AF%86/%E5%B7%A5%E5%85%B7%E7%AF%87/eclipse/%E4%BD%BF%E7%94%A8/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>ä½¿ç”¨</span></a></nav></footer></article></main><footer class=footer><span>Copyright
&copy;
-2023
<a href=https://xiaokunji.com/zh/ style=color:#939393>ç±³äºŒ</a>
All Rights Reserved</span>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<span id=busuanzi_container><span class="fa fa-user">ç”¨æˆ·æ•°:</span><span id=busuanzi_value_site_uv></span>
<span class="fa fa-eye">è®¿é—®æ•°:</span><span id=busuanzi_value_site_pv></span></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="å¤åˆ¶";function s(){t.innerHTML="å·²å¤åˆ¶ï¼",setTimeout(()=>{t.innerHTML="å¤åˆ¶"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>