<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ç¼“å­˜ | ç±³äºŒ</title><meta name=keywords content=" å‰è¨€, ä¸€çº§ç¼“å­˜, ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ, ç¦ç”¨ä¸€çº§ç¼“å­˜, äºŒçº§ç¼“å­˜, ç¦ç”¨äºŒçº§ç¼“å­˜"><meta name=description content="     "><meta name=author content="xkj"><link rel=canonical href=https://xiaokunji.github.io/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/mybatis/%E7%BC%93%E5%AD%98/><link crossorigin=anonymous href=/assets/css/stylesheet.4e0011f750c7441f57e7cdbfd7afb83ad2ac4efdcdb4adebee9988b40de3f85c.css integrity="sha256-TgAR91DHRB9X582/16+4OtKsTv3NtK3r7pmItA3j+Fw=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://xiaokunji.github.io/img/Q.svg><link rel=icon type=image/png sizes=16x16 href=https://xiaokunji.github.io/img/Q.svg><link rel=icon type=image/png sizes=32x32 href=https://xiaokunji.github.io/img/Q.svg><link rel=apple-touch-icon href=https://xiaokunji.github.io/Q.svg><link rel=mask-icon href=https://xiaokunji.github.io/Q.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://xiaokunji.github.io/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/mybatis/%E7%BC%93%E5%AD%98/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="ç¼“å­˜"><meta property="og:description" content="     "><meta property="og:type" content="article"><meta property="og:url" content="https://xiaokunji.github.io/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/mybatis/%E7%BC%93%E5%AD%98/"><meta property="article:section" content="javaåŠå…¶æ¡†æ¶"><meta property="article:published_time" content="2023-08-22T00:00:00+00:00"><meta property="article:modified_time" content="2023-08-22T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="ç¼“å­˜"><meta name=twitter:description content="     "><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":5,"name":"ç¼“å­˜","item":"https://xiaokunji.github.io/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/mybatis/%E7%BC%93%E5%AD%98/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ç¼“å­˜","name":"ç¼“å­˜","description":"     ","keywords":[" å‰è¨€"," ä¸€çº§ç¼“å­˜"," ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ"," ç¦ç”¨ä¸€çº§ç¼“å­˜"," äºŒçº§ç¼“å­˜"," ç¦ç”¨äºŒçº§ç¼“å­˜"],"articleBody":"[TOC]\nå‰è¨€ å’Œå¤§å¤šæ•°æŒä¹…åŒ–æ¡†æ¶ä¸€æ ·ï¼ŒMyBatis æä¾›äº†ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„æ”¯æŒã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒMyBatis åªå¼€å¯ä¸€çº§ç¼“å­˜ã€‚\nMyBatisæä¾›äº†ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜\nä¸€çº§ç¼“å­˜ï¼šä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼Œç”¨äºä¿å­˜ç”¨æˆ·åœ¨ä¸€æ¬¡ä¼šè¯è¿‡ç¨‹ä¸­æŸ¥è¯¢çš„ç»“æœï¼Œç”¨æˆ·ä¸€æ¬¡ä¼šè¯ä¸­åªèƒ½ä½¿ç”¨ä¸€ä¸ªsqlSessionï¼Œä¸€çº§ç¼“å­˜æ˜¯è‡ªåŠ¨å¼€å¯çš„ï¼Œä¸å…è®¸å…³é—­ã€‚ äºŒçº§ç¼“å­˜ï¼šä¹Ÿç§°ä¸ºå…¨å±€ç¼“å­˜ï¼Œæ˜¯mapperçº§åˆ«çš„ç¼“å­˜ï¼Œæ˜¯é’ˆå¯¹ä¸€ä¸ªè¡¨çš„æŸ¥ç»“æœçš„å­˜å‚¨ï¼Œå¯ä»¥å…±äº«ç»™æ‰€æœ‰é’ˆå¯¹è¿™å¼ è¡¨çš„æŸ¥è¯¢çš„ç”¨æˆ·ã€‚ä¹Ÿå°±æ˜¯è¯´å¯¹äºmapperçº§åˆ«çš„ç¼“å­˜ä¸åŒçš„sqlsessionæ˜¯å¯ä»¥å…±äº«çš„ã€‚ ä¸€çº§ç¼“å­˜ ä¸€çº§ç¼“å­˜æ˜¯åŸºäº PerpetualCacheï¼ˆMyBatisè‡ªå¸¦ï¼‰çš„ HashMap æœ¬åœ°ç¼“å­˜ï¼Œä½œç”¨èŒƒå›´ä¸º session åŸŸå†…,å®ƒå­˜å‚¨çš„SqlSessionä¸­çš„BaseExecutorä¹‹ä¸­ã€‚å½“ session flushï¼ˆåˆ·æ–°ï¼‰æˆ–è€… closeï¼ˆå…³é—­ï¼‰ä¹‹åï¼Œè¯¥ session ä¸­æ‰€æœ‰çš„ cacheï¼ˆç¼“å­˜ï¼‰å°±ä¼šè¢«æ¸…ç©ºã€‚\nåœ¨å‚æ•°å’Œ SQL å®Œå…¨ä¸€æ ·çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨åŒä¸€ä¸ª SqlSession å¯¹è±¡è°ƒç”¨åŒä¸€ä¸ª mapper çš„æ–¹æ³•ï¼Œå¾€å¾€åªæ‰§è¡Œä¸€æ¬¡ SQLã€‚å› ä¸ºä½¿ç”¨ SqlSession ç¬¬ä¸€æ¬¡æŸ¥è¯¢åï¼ŒMyBatis ä¼šå°†å…¶æ”¾åœ¨ç¼“å­˜ä¸­ï¼Œå†æ¬¡æŸ¥è¯¢æ—¶ï¼Œå¦‚æœæ²¡æœ‰åˆ·æ–°ï¼Œå¹¶ä¸”ç¼“å­˜æ²¡æœ‰è¶…æ—¶çš„æƒ…å†µä¸‹ï¼ŒSqlSession ä¼šå–å‡ºå½“å‰ç¼“å­˜çš„æ•°æ®ï¼Œè€Œä¸ä¼šå†æ¬¡å‘é€ SQL åˆ°æ•°æ®åº“ã€‚\nç”±äº SqlSession æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œæ‰€ä»¥å¦‚æœä½ ä½¿ç”¨ä¸åŒçš„ SqlSession å¯¹è±¡ï¼Œå³ä½¿è°ƒç”¨ç›¸åŒçš„ Mapperã€å‚æ•°å’Œæ–¹æ³•ï¼ŒMyBatis è¿˜æ˜¯ä¼šå†æ¬¡å‘é€ SQL åˆ°æ•°æ®åº“æ‰§è¡Œï¼Œè¿”å›ç»“æœã€‚\nç¤ºä¾‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 package net.biancheng.test; import java.io.IOException; import java.io.InputStream; import java.util.List; import org.apache.ibatis.io.Resources; import org.apache.ibatis.session.SqlSession; import org.apache.ibatis.session.SqlSessionFactory; import org.apache.ibatis.session.SqlSessionFactoryBuilder; import org.apache.log4j.Logger; import net.biancheng.po.Website; public class Test { public static Logger logger = Logger.getLogger(Test.class); public static void main(String[] args) throws IOException { InputStream config = Resources.getResourceAsStream(\"mybatis-config.xml\"); // æ ¹æ®é…ç½®æ–‡ä»¶æ„å»º SqlSessionFactory ssf = new SqlSessionFactoryBuilder().build(config); SqlSession ss = ssf.openSession(); Website site = ss.selectOne(\"net.biancheng.mapper.WebsiteMapper.selectWebsiteById\", 1); logger.debug(\"ä½¿ç”¨åŒä¸€ä¸ªsqlsessionå†æ‰§è¡Œä¸€æ¬¡\"); Website site2 = ss.selectOne(\"net.biancheng.mapper.WebsiteMapper.selectWebsiteById\", 1); // è¯·æ³¨æ„ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨äºŒçº§ç¼“å­˜çš„æ—¶å€™ï¼ŒsqlSessionè°ƒç”¨äº† commitæ–¹æ³•åæ‰ä¼šç”Ÿæ•ˆ ss.commit(); logger.debug(\"ç°åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„SqlSeesionå¯¹è±¡åœ¨æ‰§è¡Œä¸€æ¬¡\"); SqlSession ss2 = ssf.openSession(); Website site3 = ss2.selectOne(\"net.biancheng.mapper.WebsiteMapper.selectWebsiteById\", 1); // è¯·æ³¨æ„ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨äºŒçº§ç¼“å­˜çš„æ—¶å€™ï¼ŒsqlSessionè°ƒç”¨äº† commitæ–¹æ³•åæ‰ä¼šç”Ÿæ•ˆ ss2.commit(); } } ç»“æœå¦‚ä¸‹:\n1 2 3 4 5 6 7 8 DEBUG [main] - ==\u003e Preparing: SELECT * FROM website WHERE id=? DEBUG [main] - ==\u003e Parameters: 1(Integer) DEBUG [main] - \u003c== Total: 1 DEBUG [main] - ä½¿ç”¨åŒä¸€ä¸ªsqlsessionå†æ‰§è¡Œä¸€æ¬¡ DEBUG [main] - ç°åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„SqlSeesionå¯¹è±¡åœ¨æ‰§è¡Œä¸€æ¬¡ DEBUG [main] - ==\u003e Preparing: SELECT * FROM website WHERE id=? DEBUG [main] - ==\u003e Parameters: 1(Integer) DEBUG [main] - \u003c== Total: 1 ä»è¿è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼Œç¬¬ä¸€ä¸ª SqlSession å®é™…åªå‘ç”Ÿè¿‡ä¸€æ¬¡æŸ¥è¯¢ï¼Œè€Œç¬¬äºŒæ¬¡æŸ¥è¯¢å°±ä»ç¼“å­˜ä¸­å–å‡ºäº†ï¼Œä¹Ÿå°±æ˜¯ SqlSession å±‚é¢çš„ä¸€çº§ç¼“å­˜ã€‚ä¸ºäº†å…‹æœè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦é…ç½®äºŒçº§ç¼“å­˜ï¼Œä½¿å¾—ç¼“å­˜åœ¨ SqlSessionFactory å±‚é¢ä¸Šèƒ½å¤Ÿæä¾›ç»™å„ä¸ª SqlSession å¯¹è±¡å…±äº«ã€‚\nä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ sqlsessionå˜äº† ç¼“å­˜å¤±æ•ˆ sqlsessionä¸å˜,æŸ¥è¯¢æ¡ä»¶ä¸åŒï¼Œä¸€çº§ç¼“å­˜å¤±æ•ˆ sqlsessionä¸å˜,ä¸­é—´å‘ç”Ÿäº†å¢åˆ æ”¹æ“ä½œï¼Œä¸€çº§ç¼“å­˜å¤±è´¥ sqlsessionä¸å˜,æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜å¤±è´¥ springç»“åˆmybatisåï¼Œä¸€çº§ç¼“å­˜ä½œç”¨ï¼š\nåœ¨æœªå¼€å¯äº‹åŠ¡çš„æƒ…å†µä¹‹ä¸‹ï¼Œæ¯æ¬¡æŸ¥è¯¢ï¼Œspringéƒ½ä¼šå…³é—­æ—§çš„sqlSessionè€Œåˆ›å»ºæ–°çš„sqlSession,å› æ­¤æ­¤æ—¶çš„ä¸€çº§ç¼“å­˜æ˜¯ä¸èµ·ä½œç”¨çš„\nåœ¨å¼€å¯äº‹åŠ¡çš„æƒ…å†µä¹‹ä¸‹ï¼Œspringä½¿ç”¨ThreadLocalè·å–å½“å‰èµ„æºç»‘å®šåŒä¸€ä¸ªsqlSessionï¼Œå› æ­¤æ­¤æ—¶ä¸€çº§ç¼“å­˜æ˜¯æœ‰æ•ˆçš„ã€‚\nç”±äºspringä½¿ç”¨äº†ä»£ç†, æ‰€ä»¥åœ¨ä»£ç†ç»“æŸæ—¶å°±å…³é—­äº†sqlsession, å¯¼è‡´ä¸€çº§ç¼“å­˜å¤±æ•ˆ\nSpringæ•´åˆMyBatisæ—¶ä¸€çº§ç¼“å­˜å¤±æ•ˆé—®é¢˜_xingze_Wçš„åšå®¢-CSDNåšå®¢_springæ•´åˆmybatisä¸€çº§ç¼“å­˜ mybatisä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ - ç®€ä¹¦ (jianshu.com) ç¦ç”¨ä¸€çº§ç¼“å­˜ 1 2 3 4 mybatis: configuration: cache-enabled: false #ç¦ç”¨äºŒçº§ç¼“å­˜ local-cache-scope: statement #é»˜è®¤æŒ‡å®šä¸ºsessionçº§åˆ« æŒ‡å®šç¼“å­˜statementçº§åˆ«å, mybatisä¼šåˆ é™¤ç¼“å­˜\norg.apache.ibatis.executor.BaseExecutor#query(MappedStatement, Object, RowBounds, ResultHandler, CacheKey, BoundSql)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 public \u003cE\u003e List\u003cE\u003e query(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, CacheKey key, BoundSql boundSql) throws SQLException { ErrorContext.instance().resource(ms.getResource()).activity(\"executing a query\").object(ms.getId()); if (closed) throw new ExecutorException(\"Executor was closed.\"); if (queryStack == 0 \u0026\u0026 ms.isFlushCacheRequired()) { clearLocalCache(); } List\u003cE\u003e list; try { queryStack++; list = resultHandler == null ? (List\u003cE\u003e) localCache.getObject(key) : null; if (list != null) { handleLocallyCachedOutputParameters(ms, key, parameter, boundSql); } else { list = queryFromDatabase(ms, parameter, rowBounds, resultHandler, key, boundSql); } } finally { queryStack--; } if (queryStack == 0) { for (DeferredLoad deferredLoad : deferredLoads) { deferredLoad.load(); } // æ­¤å¤„åšäº†åˆ é™¤ if (configuration.getLocalCacheScope() == LocalCacheScope.STATEMENT) { clearLocalCache(); // issue #482 } } return list; } äºŒçº§ç¼“å­˜ äºŒçº§ç¼“å­˜æ˜¯å…¨å±€ç¼“å­˜ï¼Œä½œç”¨åŸŸè¶…å‡º session èŒƒå›´ä¹‹å¤–ï¼Œå¯ä»¥è¢«æ‰€æœ‰ SqlSession å…±äº«ã€‚äºŒçº§ç¼“å­˜çš„ä½œç”¨åŸŸæ˜¯namespaceï¼Œä¹Ÿå°±æ˜¯ä½œç”¨èŒƒå›´æ˜¯åŒä¸€ä¸ªå‘½åç©ºé—´\nå¼€å¯äºŒçº§ç¼“å­˜åï¼Œä¼šä½¿ç”¨CachingExecutorè£…é¥°Executorï¼Œè¿›å…¥ä¸€çº§ç¼“å­˜çš„æŸ¥è¯¢æµç¨‹å‰ï¼Œå…ˆåœ¨CachingExecutorè¿›è¡ŒäºŒçº§ç¼“å­˜çš„æŸ¥è¯¢ï¼Œå…·ä½“çš„å·¥ä½œæµç¨‹å¦‚ä¸‹æ‰€ç¤ºã€‚\näºŒçº§ç¼“å­˜å¼€å¯åï¼ŒåŒä¸€ä¸ªnamespaceä¸‹çš„æ‰€æœ‰æ“ä½œè¯­å¥ï¼Œéƒ½å½±å“ç€åŒä¸€ä¸ªCacheï¼Œå³äºŒçº§ç¼“å­˜è¢«å¤šä¸ªSqlSessionå…±äº«ï¼Œæ˜¯ä¸€ä¸ªå…¨å±€çš„å˜é‡ã€‚ å½“å¼€å¯ç¼“å­˜åï¼Œæ•°æ®çš„æŸ¥è¯¢æ‰§è¡Œçš„æµç¨‹å°±æ˜¯ äºŒçº§ç¼“å­˜ -\u003e ä¸€çº§ç¼“å­˜ -\u003e æ•°æ®åº“ã€‚\nç¦ç”¨äºŒçº§ç¼“å­˜ 1 2 3 mybatis: configuration: cache-enabled: false #ç¦ç”¨äºŒçº§ç¼“å­˜, é»˜è®¤ä¸ºtrue mybatisçš„äºŒçº§ç¼“å­˜æ˜¯æœ¬åœ°å®ç°çš„, åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­, å®¹æ˜“äº§ç”Ÿè„æ•°æ® , æ‰€ä»¥ä¸€èˆ¬ä¼šä½¿ç”¨redisè¿™ç§ç¬¬ä¸‰æ–¹å­˜å‚¨æ¥ä½¿ç”¨äºŒçº§ç¼“å­˜\nSpringBoot+Mybatisä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜è¯¦è§£ - éƒ‘æ™“é¾™ - åšå®¢å›­ (cnblogs.com) mybatis äºŒçº§ç¼“å­˜å¤±æ•ˆ_ç»™æˆ‘äº”åˆ†é’Ÿï¼Œå¸¦ä½ å½»åº•æŒæ¡MyBatisçš„ç¼“å­˜å·¥ä½œåŸç†_Tfiftheçš„åšå®¢-CSDNåšå®¢ MyBatisç¼“å­˜ï¼ˆä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼‰ (biancheng.net) MyBatis|ç¼“å­˜æœºåˆ¶ - ç®€ä¹¦ (jianshu.com) springboot+mybatisä¸€çº§ç¼“å­˜å¯ç”¨/ç¦ç”¨é—®é¢˜_NongYetingçš„åšå®¢-CSDNåšå®¢_springbootå…³é—­mybatisç¼“å­˜ ","wordCount":"2253","inLanguage":"zh","datePublished":"2023-08-22T00:00:00Z","dateModified":"2023-08-22T00:00:00Z","author":{"@type":"Person","name":"xkj"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xiaokunji.github.io/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/mybatis/%E7%BC%93%E5%AD%98/"},"publisher":{"@type":"Organization","name":"ç±³äºŒ","logo":{"@type":"ImageObject","url":"https://xiaokunji.github.io/img/Q.svg"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xiaokunji.github.io/zh/ accesskey=h title="ç±³äºŒ (Alt + H)"><img src=https://xiaokunji.github.io/img/Q.svg alt aria-label=logo height=35>ç±³äºŒ</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://xiaokunji.github.io/en/ title=English aria-label=English>English</a></li></ul></div></div><ul id=menu><li><a href=https://xiaokunji.github.io/zh/ title=ğŸ ä¸»é¡µ><span>ğŸ ä¸»é¡µ</span></a></li><li><a href=https://xiaokunji.github.io/zh/search title="ğŸ”æœç´¢ (Alt + /)" accesskey=/><span>ğŸ”æœç´¢</span></a></li><li><a href=https://xiaokunji.github.io/zh/post title=ğŸ“šæ–‡ç« ><span>ğŸ“šæ–‡ç« </span></a></li><li><a href=https://xiaokunji.github.io/zh/archives/ title=â±æ—¶é—´è½´><span>â±æ—¶é—´è½´</span></a></li><li><a href=https://xiaokunji.github.io/zh/tags title=ğŸ”–æ ‡ç­¾><span>ğŸ”–æ ‡ç­¾</span></a></li><li><a href=https://xiaokunji.github.io/zh/categories title=ğŸ“–åˆ†ç±»><span>ğŸ“–åˆ†ç±»</span></a></li><li><a href=https://xiaokunji.github.io/zh/links title=ğŸ¤å‹é“¾><span>ğŸ¤å‹é“¾</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><nav aria-label=breadcrumb><ul><a href=https://xiaokunji.github.io/zh/>ç±³äºŒ</a> <span>></span>
<a href=https://xiaokunji.github.io/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/>javaåŠå…¶æ¡†æ¶</a> <span>></span>
<a href=https://xiaokunji.github.io/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/mybatis/>Mybatis</a> <span>></span></ul></nav><h1 class=post-title>ç¼“å­˜</h1><div class=post-description></div><div class=post-meta><span title='2023-08-22 00:00:00 +0000 UTC'>2023-08-22</span>&nbsp;Â·&nbsp;5 åˆ†é’Ÿ&nbsp;Â·&nbsp;xkj
&nbsp;|&nbsp;åˆ†ç±»: &nbsp;<ul class=post-categories-meta><a href=https://xiaokunji.github.io/zh/categories/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/>javaåŠå…¶æ¡†æ¶</a></ul><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<span id=busuanzi_container_page_pv>&nbsp;| è®¿é—®: <span id=busuanzi_value_page_pv></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#%e5%89%8d%e8%a8%80 aria-label=å‰è¨€>å‰è¨€</a></li><li><a href=#%e4%b8%80%e7%ba%a7%e7%bc%93%e5%ad%98 aria-label=ä¸€çº§ç¼“å­˜>ä¸€çº§ç¼“å­˜</a><ul><li><a href=#%e4%b8%80%e7%ba%a7%e7%bc%93%e5%ad%98%e5%a4%b1%e6%95%88%e7%9a%84%e5%9b%9b%e7%a7%8d%e6%83%85%e5%86%b5 aria-label=ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ>ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ</a></li><li><a href=#%e7%a6%81%e7%94%a8%e4%b8%80%e7%ba%a7%e7%bc%93%e5%ad%98 aria-label=ç¦ç”¨ä¸€çº§ç¼“å­˜>ç¦ç”¨ä¸€çº§ç¼“å­˜</a></li></ul></li><li><a href=#%e4%ba%8c%e7%ba%a7%e7%bc%93%e5%ad%98 aria-label=äºŒçº§ç¼“å­˜>äºŒçº§ç¼“å­˜</a><ul><li><a href=#%e7%a6%81%e7%94%a8%e4%ba%8c%e7%ba%a7%e7%bc%93%e5%ad%98 aria-label=ç¦ç”¨äºŒçº§ç¼“å­˜>ç¦ç”¨äºŒçº§ç¼“å­˜</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>[TOC]</p><h1 id=å‰è¨€>å‰è¨€<a hidden class=anchor aria-hidden=true href=#å‰è¨€>#</a></h1><p>å’Œå¤§å¤šæ•°æŒä¹…åŒ–æ¡†æ¶ä¸€æ ·ï¼ŒMyBatis æä¾›äº†ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„æ”¯æŒã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒMyBatis åªå¼€å¯ä¸€çº§ç¼“å­˜ã€‚</p><p>MyBatisæä¾›äº†ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜</p><ul><li>ä¸€çº§ç¼“å­˜ï¼šä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼Œç”¨äºä¿å­˜ç”¨æˆ·åœ¨ä¸€æ¬¡ä¼šè¯è¿‡ç¨‹ä¸­æŸ¥è¯¢çš„ç»“æœï¼Œç”¨æˆ·ä¸€æ¬¡ä¼šè¯ä¸­åªèƒ½ä½¿ç”¨ä¸€ä¸ªsqlSessionï¼Œä¸€çº§ç¼“å­˜æ˜¯è‡ªåŠ¨å¼€å¯çš„ï¼Œä¸å…è®¸å…³é—­ã€‚</li><li>äºŒçº§ç¼“å­˜ï¼šä¹Ÿç§°ä¸ºå…¨å±€ç¼“å­˜ï¼Œæ˜¯mapperçº§åˆ«çš„ç¼“å­˜ï¼Œæ˜¯é’ˆå¯¹ä¸€ä¸ªè¡¨çš„æŸ¥ç»“æœçš„å­˜å‚¨ï¼Œå¯ä»¥å…±äº«ç»™æ‰€æœ‰é’ˆå¯¹è¿™å¼ è¡¨çš„æŸ¥è¯¢çš„ç”¨æˆ·ã€‚ä¹Ÿå°±æ˜¯è¯´å¯¹äºmapperçº§åˆ«çš„ç¼“å­˜ä¸åŒçš„sqlsessionæ˜¯å¯ä»¥å…±äº«çš„ã€‚</li></ul><h1 id=ä¸€çº§ç¼“å­˜>ä¸€çº§ç¼“å­˜<a hidden class=anchor aria-hidden=true href=#ä¸€çº§ç¼“å­˜>#</a></h1><p>ä¸€çº§ç¼“å­˜æ˜¯åŸºäº PerpetualCacheï¼ˆMyBatisè‡ªå¸¦ï¼‰çš„ HashMap æœ¬åœ°ç¼“å­˜ï¼Œä½œç”¨èŒƒå›´ä¸º session åŸŸå†…,å®ƒå­˜å‚¨çš„SqlSessionä¸­çš„BaseExecutorä¹‹ä¸­ã€‚å½“ session flushï¼ˆåˆ·æ–°ï¼‰æˆ–è€… closeï¼ˆå…³é—­ï¼‰ä¹‹åï¼Œè¯¥ session ä¸­æ‰€æœ‰çš„ cacheï¼ˆç¼“å­˜ï¼‰å°±ä¼šè¢«æ¸…ç©ºã€‚</p><p>åœ¨å‚æ•°å’Œ SQL å®Œå…¨ä¸€æ ·çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨åŒä¸€ä¸ª SqlSession å¯¹è±¡è°ƒç”¨åŒä¸€ä¸ª mapper çš„æ–¹æ³•ï¼Œå¾€å¾€åªæ‰§è¡Œä¸€æ¬¡ SQLã€‚å› ä¸ºä½¿ç”¨ SqlSession ç¬¬ä¸€æ¬¡æŸ¥è¯¢åï¼ŒMyBatis ä¼šå°†å…¶æ”¾åœ¨ç¼“å­˜ä¸­ï¼Œå†æ¬¡æŸ¥è¯¢æ—¶ï¼Œå¦‚æœæ²¡æœ‰åˆ·æ–°ï¼Œå¹¶ä¸”ç¼“å­˜æ²¡æœ‰è¶…æ—¶çš„æƒ…å†µä¸‹ï¼ŒSqlSession ä¼šå–å‡ºå½“å‰ç¼“å­˜çš„æ•°æ®ï¼Œè€Œä¸ä¼šå†æ¬¡å‘é€ SQL åˆ°æ•°æ®åº“ã€‚</p><p>ç”±äº SqlSession æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œæ‰€ä»¥å¦‚æœä½ ä½¿ç”¨ä¸åŒçš„ SqlSession å¯¹è±¡ï¼Œå³ä½¿è°ƒç”¨ç›¸åŒçš„ Mapperã€å‚æ•°å’Œæ–¹æ³•ï¼ŒMyBatis è¿˜æ˜¯ä¼šå†æ¬¡å‘é€ SQL åˆ°æ•°æ®åº“æ‰§è¡Œï¼Œè¿”å›ç»“æœã€‚</p><p>ç¤ºä¾‹:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> net.biancheng.test<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.IOException<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.InputStream<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.List<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.ibatis.io.Resources<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.ibatis.session.SqlSession<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.ibatis.session.SqlSessionFactory<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.log4j.Logger<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> net.biancheng.po.Website<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Test</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> Logger logger <span style=color:#f92672>=</span> Logger<span style=color:#f92672>.</span><span style=color:#a6e22e>getLogger</span><span style=color:#f92672>(</span>Test<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        InputStream config <span style=color:#f92672>=</span> Resources<span style=color:#f92672>.</span><span style=color:#a6e22e>getResourceAsStream</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;mybatis-config.xml&#34;</span><span style=color:#f92672>);</span> <span style=color:#75715e>// æ ¹æ®é…ç½®æ–‡ä»¶æ„å»º
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        SqlSessionFactory ssf <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SqlSessionFactoryBuilder<span style=color:#f92672>().</span><span style=color:#a6e22e>build</span><span style=color:#f92672>(</span>config<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        SqlSession ss <span style=color:#f92672>=</span> ssf<span style=color:#f92672>.</span><span style=color:#a6e22e>openSession</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Website site <span style=color:#f92672>=</span> ss<span style=color:#f92672>.</span><span style=color:#a6e22e>selectOne</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;net.biancheng.mapper.WebsiteMapper.selectWebsiteById&#34;</span><span style=color:#f92672>,</span> 1<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        logger<span style=color:#f92672>.</span><span style=color:#a6e22e>debug</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;ä½¿ç”¨åŒä¸€ä¸ªsqlsessionå†æ‰§è¡Œä¸€æ¬¡&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        Website site2 <span style=color:#f92672>=</span> ss<span style=color:#f92672>.</span><span style=color:#a6e22e>selectOne</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;net.biancheng.mapper.WebsiteMapper.selectWebsiteById&#34;</span><span style=color:#f92672>,</span> 1<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// è¯·æ³¨æ„ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨äºŒçº§ç¼“å­˜çš„æ—¶å€™ï¼ŒsqlSessionè°ƒç”¨äº† commitæ–¹æ³•åæ‰ä¼šç”Ÿæ•ˆ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        ss<span style=color:#f92672>.</span><span style=color:#a6e22e>commit</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        logger<span style=color:#f92672>.</span><span style=color:#a6e22e>debug</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;ç°åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„SqlSeesionå¯¹è±¡åœ¨æ‰§è¡Œä¸€æ¬¡&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        SqlSession ss2 <span style=color:#f92672>=</span> ssf<span style=color:#f92672>.</span><span style=color:#a6e22e>openSession</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        Website site3 <span style=color:#f92672>=</span> ss2<span style=color:#f92672>.</span><span style=color:#a6e22e>selectOne</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;net.biancheng.mapper.WebsiteMapper.selectWebsiteById&#34;</span><span style=color:#f92672>,</span> 1<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// è¯·æ³¨æ„ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨äºŒçº§ç¼“å­˜çš„æ—¶å€™ï¼ŒsqlSessionè°ƒç”¨äº† commitæ–¹æ³•åæ‰ä¼šç”Ÿæ•ˆ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        ss2<span style=color:#f92672>.</span><span style=color:#a6e22e>commit</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ç»“æœå¦‚ä¸‹:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>DEBUG [main] - ==&gt;  Preparing: SELECT * FROM website WHERE id=?
</span></span><span style=display:flex><span>DEBUG [main] - ==&gt; Parameters: 1(Integer)
</span></span><span style=display:flex><span>DEBUG [main] - &lt;==      Total: 1
</span></span><span style=display:flex><span>DEBUG [main] - ä½¿ç”¨åŒä¸€ä¸ªsqlsessionå†æ‰§è¡Œä¸€æ¬¡
</span></span><span style=display:flex><span>DEBUG [main] - ç°åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„SqlSeesionå¯¹è±¡åœ¨æ‰§è¡Œä¸€æ¬¡
</span></span><span style=display:flex><span>DEBUG [main] - ==&gt;  Preparing: SELECT * FROM website WHERE id=?
</span></span><span style=display:flex><span>DEBUG [main] - ==&gt; Parameters: 1(Integer)
</span></span><span style=display:flex><span>DEBUG [main] - &lt;==      Total: 1
</span></span></code></pre></td></tr></table></div></div><p>ä»è¿è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼Œç¬¬ä¸€ä¸ª SqlSession å®é™…åªå‘ç”Ÿè¿‡ä¸€æ¬¡æŸ¥è¯¢ï¼Œè€Œç¬¬äºŒæ¬¡æŸ¥è¯¢å°±ä»ç¼“å­˜ä¸­å–å‡ºäº†ï¼Œä¹Ÿå°±æ˜¯ SqlSession å±‚é¢çš„ä¸€çº§ç¼“å­˜ã€‚ä¸ºäº†å…‹æœè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦é…ç½®äºŒçº§ç¼“å­˜ï¼Œä½¿å¾—ç¼“å­˜åœ¨ SqlSessionFactory å±‚é¢ä¸Šèƒ½å¤Ÿæä¾›ç»™å„ä¸ª SqlSession å¯¹è±¡å…±äº«ã€‚</p><h2 id=ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ>ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ<a hidden class=anchor aria-hidden=true href=#ä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ>#</a></h2><ol><li>sqlsessionå˜äº† ç¼“å­˜å¤±æ•ˆ</li><li>sqlsessionä¸å˜,æŸ¥è¯¢æ¡ä»¶ä¸åŒï¼Œä¸€çº§ç¼“å­˜å¤±æ•ˆ</li><li>sqlsessionä¸å˜,ä¸­é—´å‘ç”Ÿäº†å¢åˆ æ”¹æ“ä½œï¼Œä¸€çº§ç¼“å­˜å¤±è´¥</li><li>sqlsessionä¸å˜,æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜å¤±è´¥</li></ol><blockquote><p>springç»“åˆmybatisåï¼Œä¸€çº§ç¼“å­˜ä½œç”¨ï¼š</p><ul><li><p>åœ¨æœªå¼€å¯äº‹åŠ¡çš„æƒ…å†µä¹‹ä¸‹ï¼Œæ¯æ¬¡æŸ¥è¯¢ï¼Œspringéƒ½ä¼šå…³é—­æ—§çš„sqlSessionè€Œåˆ›å»ºæ–°çš„sqlSession,å› æ­¤æ­¤æ—¶çš„ä¸€çº§ç¼“å­˜æ˜¯ä¸èµ·ä½œç”¨çš„</p></li><li><p>åœ¨å¼€å¯äº‹åŠ¡çš„æƒ…å†µä¹‹ä¸‹ï¼Œspringä½¿ç”¨ThreadLocalè·å–å½“å‰èµ„æºç»‘å®šåŒä¸€ä¸ªsqlSessionï¼Œå› æ­¤æ­¤æ—¶ä¸€çº§ç¼“å­˜æ˜¯æœ‰æ•ˆçš„ã€‚</p><p>ç”±äºspringä½¿ç”¨äº†ä»£ç†, æ‰€ä»¥åœ¨ä»£ç†ç»“æŸæ—¶å°±å…³é—­äº†sqlsession, å¯¼è‡´ä¸€çº§ç¼“å­˜å¤±æ•ˆ</p></li></ul></blockquote><p><a href=https://blog.csdn.net/qq_42220174/article/details/102993338 target=_blank rel=noopener>Springæ•´åˆMyBatisæ—¶ä¸€çº§ç¼“å­˜å¤±æ•ˆé—®é¢˜_xingze_Wçš„åšå®¢-CSDNåšå®¢_springæ•´åˆmybatisä¸€çº§ç¼“å­˜</a></p><p><a href=https://www.jianshu.com/p/2521ccc7a7df target=_blank rel=noopener>mybatisä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µ - ç®€ä¹¦ (jianshu.com)</a></p><h2 id=ç¦ç”¨ä¸€çº§ç¼“å­˜>ç¦ç”¨ä¸€çº§ç¼“å­˜<a hidden class=anchor aria-hidden=true href=#ç¦ç”¨ä¸€çº§ç¼“å­˜>#</a></h2><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>mybatis</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>configuration</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>cache-enabled</span>: <span style=color:#66d9ef>false</span>  <span style=color:#75715e>#ç¦ç”¨äºŒçº§ç¼“å­˜</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>local-cache-scope</span>: <span style=color:#ae81ff>statement </span> <span style=color:#75715e>#é»˜è®¤æŒ‡å®šä¸ºsessionçº§åˆ«</span>
</span></span></code></pre></td></tr></table></div></div><p>æŒ‡å®šç¼“å­˜statementçº§åˆ«å, mybatisä¼šåˆ é™¤ç¼“å­˜</p><p><code>org.apache.ibatis.executor.BaseExecutor#query(MappedStatement, Object, RowBounds, ResultHandler, CacheKey, BoundSql)</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> List<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>query</span><span style=color:#f92672>(</span>MappedStatement ms<span style=color:#f92672>,</span> Object parameter<span style=color:#f92672>,</span> RowBounds rowBounds<span style=color:#f92672>,</span> ResultHandler resultHandler<span style=color:#f92672>,</span> CacheKey key<span style=color:#f92672>,</span> BoundSql boundSql<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> SQLException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    ErrorContext<span style=color:#f92672>.</span><span style=color:#a6e22e>instance</span><span style=color:#f92672>().</span><span style=color:#a6e22e>resource</span><span style=color:#f92672>(</span>ms<span style=color:#f92672>.</span><span style=color:#a6e22e>getResource</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>activity</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;executing a query&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>object</span><span style=color:#f92672>(</span>ms<span style=color:#f92672>.</span><span style=color:#a6e22e>getId</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>closed<span style=color:#f92672>)</span> <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> ExecutorException<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Executor was closed.&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>queryStack <span style=color:#f92672>==</span> 0 <span style=color:#f92672>&amp;&amp;</span> ms<span style=color:#f92672>.</span><span style=color:#a6e22e>isFlushCacheRequired</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      clearLocalCache<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    List<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> list<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      queryStack<span style=color:#f92672>++;</span>
</span></span><span style=display:flex><span>      list <span style=color:#f92672>=</span> resultHandler <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>?</span> <span style=color:#f92672>(</span>List<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;)</span> localCache<span style=color:#f92672>.</span><span style=color:#a6e22e>getObject</span><span style=color:#f92672>(</span>key<span style=color:#f92672>)</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>list <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        handleLocallyCachedOutputParameters<span style=color:#f92672>(</span>ms<span style=color:#f92672>,</span> key<span style=color:#f92672>,</span> parameter<span style=color:#f92672>,</span> boundSql<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        list <span style=color:#f92672>=</span> queryFromDatabase<span style=color:#f92672>(</span>ms<span style=color:#f92672>,</span> parameter<span style=color:#f92672>,</span> rowBounds<span style=color:#f92672>,</span> resultHandler<span style=color:#f92672>,</span> key<span style=color:#f92672>,</span> boundSql<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span> <span style=color:#66d9ef>finally</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      queryStack<span style=color:#f92672>--;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>queryStack <span style=color:#f92672>==</span> 0<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>DeferredLoad deferredLoad <span style=color:#f92672>:</span> deferredLoads<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        deferredLoad<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// æ­¤å¤„åšäº†åˆ é™¤
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>configuration<span style=color:#f92672>.</span><span style=color:#a6e22e>getLocalCacheScope</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> LocalCacheScope<span style=color:#f92672>.</span><span style=color:#a6e22e>STATEMENT</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        clearLocalCache<span style=color:#f92672>();</span> <span style=color:#75715e>// issue #482
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> list<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h1 id=äºŒçº§ç¼“å­˜>äºŒçº§ç¼“å­˜<a hidden class=anchor aria-hidden=true href=#äºŒçº§ç¼“å­˜>#</a></h1><p>äºŒçº§ç¼“å­˜æ˜¯å…¨å±€ç¼“å­˜ï¼Œä½œç”¨åŸŸè¶…å‡º session èŒƒå›´ä¹‹å¤–ï¼Œå¯ä»¥è¢«æ‰€æœ‰ SqlSession å…±äº«ã€‚äºŒçº§ç¼“å­˜çš„ä½œç”¨åŸŸæ˜¯namespaceï¼Œä¹Ÿå°±æ˜¯ä½œç”¨èŒƒå›´æ˜¯åŒä¸€ä¸ªå‘½åç©ºé—´</p><p>å¼€å¯äºŒçº§ç¼“å­˜åï¼Œä¼šä½¿ç”¨CachingExecutorè£…é¥°Executorï¼Œè¿›å…¥ä¸€çº§ç¼“å­˜çš„æŸ¥è¯¢æµç¨‹å‰ï¼Œå…ˆåœ¨CachingExecutorè¿›è¡ŒäºŒçº§ç¼“å­˜çš„æŸ¥è¯¢ï¼Œå…·ä½“çš„å·¥ä½œæµç¨‹å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><img loading=lazy src=https://upload-images.jianshu.io/upload_images/15083002-cfdb77a351f8fc73.png?imageMogr2/auto-orient/strip%7cimageView2/2/w/966/format/webp alt=img></p><p>äºŒçº§ç¼“å­˜å¼€å¯åï¼ŒåŒä¸€ä¸ªnamespaceä¸‹çš„æ‰€æœ‰æ“ä½œè¯­å¥ï¼Œéƒ½å½±å“ç€åŒä¸€ä¸ªCacheï¼Œå³äºŒçº§ç¼“å­˜è¢«å¤šä¸ªSqlSessionå…±äº«ï¼Œæ˜¯ä¸€ä¸ªå…¨å±€çš„å˜é‡ã€‚
å½“å¼€å¯ç¼“å­˜åï¼Œæ•°æ®çš„æŸ¥è¯¢æ‰§è¡Œçš„æµç¨‹å°±æ˜¯ äºŒçº§ç¼“å­˜ -> ä¸€çº§ç¼“å­˜ -> æ•°æ®åº“ã€‚</p><h2 id=ç¦ç”¨äºŒçº§ç¼“å­˜>ç¦ç”¨äºŒçº§ç¼“å­˜<a hidden class=anchor aria-hidden=true href=#ç¦ç”¨äºŒçº§ç¼“å­˜>#</a></h2><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>mybatis</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>configuration</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>cache-enabled</span>: <span style=color:#66d9ef>false</span> <span style=color:#75715e>#ç¦ç”¨äºŒçº§ç¼“å­˜, é»˜è®¤ä¸ºtrue</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>mybatisçš„äºŒçº§ç¼“å­˜æ˜¯æœ¬åœ°å®ç°çš„, åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­, å®¹æ˜“äº§ç”Ÿè„æ•°æ® , æ‰€ä»¥ä¸€èˆ¬ä¼šä½¿ç”¨redisè¿™ç§ç¬¬ä¸‰æ–¹å­˜å‚¨æ¥ä½¿ç”¨äºŒçº§ç¼“å­˜</strong></p><p><a href=https://www.cnblogs.com/zhengxl5566/p/11868656.html target=_blank rel=noopener>SpringBoot+Mybatisä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜è¯¦è§£ - éƒ‘æ™“é¾™ - åšå®¢å›­ (cnblogs.com)</a></p><p><a href=https://blog.csdn.net/weixin_28689507/article/details/112337488 target=_blank rel=noopener>mybatis äºŒçº§ç¼“å­˜å¤±æ•ˆ_ç»™æˆ‘äº”åˆ†é’Ÿï¼Œå¸¦ä½ å½»åº•æŒæ¡MyBatisçš„ç¼“å­˜å·¥ä½œåŸç†_Tfiftheçš„åšå®¢-CSDNåšå®¢</a></p><p><a href=http://c.biancheng.net/mybatis/cache.html target=_blank rel=noopener>MyBatisç¼“å­˜ï¼ˆä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼‰ (biancheng.net)</a></p><p><a href=https://www.jianshu.com/p/b4522c9212fb target=_blank rel=noopener>MyBatis|ç¼“å­˜æœºåˆ¶ - ç®€ä¹¦ (jianshu.com)</a></p><p><a href=https://blog.csdn.net/NongYeting/article/details/106408985 target=_blank rel=noopener>springboot+mybatisä¸€çº§ç¼“å­˜å¯ç”¨/ç¦ç”¨é—®é¢˜_NongYetingçš„åšå®¢-CSDNåšå®¢_springbootå…³é—­mybatisç¼“å­˜</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://xiaokunji.github.io/zh/tags/mybatis/>Mybatis</a></li><li><a href=https://xiaokunji.github.io/zh/tags/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/>javaåŠå…¶æ¡†æ¶</a></li></ul><nav class=paginav><a class=prev href=https://xiaokunji.github.io/zh/%E7%BB%BC%E5%90%88/%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/><span class=title>Â« ä¸Šä¸€é¡µ</span><br><span>çº¢é»‘æ ‘</span></a>
<a class=next href=https://xiaokunji.github.io/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/java%E5%9F%BA%E7%A1%80/jvm/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/%E5%9B%9E%E6%94%B6%E5%89%8D%E6%8F%90/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>å›æ”¶å‰æ</span></a></nav></footer></article></main><footer class=footer><span>Copyright
&copy;
-2023
<a href=https://xiaokunji.github.io/zh/ style=color:#939393>ç±³äºŒ</a>
All Rights Reserved</span>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<span id=busuanzi_container><span class="fa fa-user">ç”¨æˆ·æ•°:</span><span id=busuanzi_value_site_uv></span>
<span class="fa fa-eye">è®¿é—®æ•°:</span><span id=busuanzi_value_site_pv></span></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="å¤åˆ¶";function s(){t.innerHTML="å·²å¤åˆ¶ï¼",setTimeout(()=>{t.innerHTML="å¤åˆ¶"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>