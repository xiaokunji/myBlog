<!DOCTYPE html>
<html dir="auto" lang="zh"><head><meta charset="utf-8"/><meta content="IE=edge" http-equiv="x-ua-compatible"/><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name="viewport"/><meta content="index, follow" name="robots"/><title>Config | ç±³äºŒ</title>
<meta content=" ä»‹ç», ä½¿ç”¨, 1. åŸºæœ¬ä½¿ç”¨,é…ç½®ä¸­å¿ƒ(æœåŠ¡ç«¯)åœ°å€+åå­—,æŸ¥è¯¢æ ¼å¼: name-profile.properties = jportal-jdbc.properties, 2. ä½¿ç”¨jdbcé…ç½®,åœ¨åŸºç¡€é…ç½®ä¸­å¢åŠ ,è¿™ä¸ªé…ç½®åœ¨åŸºç¡€é…ç½®ä¸­å¯ä»¥ä¸å†™, 3.å°†é…ç½®ä¸­å¿ƒåŠ åˆ°æ³¨å†Œä¸­å¿ƒ,æ³¨å†Œä¸­å¿ƒåœ°å€" name="keywords"/><meta content=" &amp;emsp;&amp;emsp;å¯ä»¥ç†è§£ä¸ºé…ç½®ä¸­å¿ƒ,æŠŠé…ç½®æ”¾åœ¨æŸä¸ªåœ°æ–¹(jdbc,git,svn,vault),ç»Ÿä¸€ç®¡ç†. - å’Œæ³¨å†Œä¸­å¿ƒç±»ä¼¼,åˆ†ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯,æœåŠ¡ç«¯å°±æ˜¯æä¾›é…ç½®çš„,å®¢æˆ·ç«¯å°±è·å–é…ç½®, - ä»…SpringCloudConfigä¸æ”¯æŒè‡ªåŠ¨åŠ¨æ€è·å–é…ç½®,éœ€è¦ç»“åˆbus(æ€»çº¿)æ¥å®ç°æ‰è¡Œ " name="description"/><meta content="xkj" name="author"/><link href="https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/springCloud/Config.html" rel="canonical"/><link as="style" crossorigin="anonymous" href="/assets/css/stylesheet.dc6bd2c841ee388e899e13872ae986c0e847e8b957d6714ad6ddc628ef2d17ff.css" integrity="sha256-3GvSyEHuOI6JnhOHKumGwOhH6LlX1nFK1t3GKO8tF/8=" rel="preload stylesheet"/><script crossorigin="anonymous" defer="" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload="hljs.initHighlightingOnLoad()" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js"></script><link href="https://xiaokunji.com/img/Q.svg" rel="icon"/><link href="https://xiaokunji.com/img/Q.svg" rel="icon" sizes="16x16" type="image/png"/><link href="https://xiaokunji.com/img/Q.svg" rel="icon" sizes="32x32" type="image/png"/><link href="https://xiaokunji.com/Q.svg" rel="apple-touch-icon"/><link href="https://xiaokunji.com/Q.svg" rel="mask-icon"/><meta content="#2e2e33" name="theme-color"/><meta content="#2e2e33" name="msapplication-TileColor"/><link href="https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/springCloud/Config.html" hreflang="zh" rel="alternate"/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta content="Config" property="og:title"/><meta content=" &amp;emsp;&amp;emsp;å¯ä»¥ç†è§£ä¸ºé…ç½®ä¸­å¿ƒ,æŠŠé…ç½®æ”¾åœ¨æŸä¸ªåœ°æ–¹(jdbc,git,svn,vault),ç»Ÿä¸€ç®¡ç†. - å’Œæ³¨å†Œä¸­å¿ƒç±»ä¼¼,åˆ†ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯,æœåŠ¡ç«¯å°±æ˜¯æä¾›é…ç½®çš„,å®¢æˆ·ç«¯å°±è·å–é…ç½®, - ä»…SpringCloudConfigä¸æ”¯æŒè‡ªåŠ¨åŠ¨æ€è·å–é…ç½®,éœ€è¦ç»“åˆbus(æ€»çº¿)æ¥å®ç°æ‰è¡Œ " property="og:description"/><meta content="article" property="og:type"/><meta content="https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/springCloud/Config.html" property="og:url"/><meta content="javaåŠå…¶æ¡†æ¶" property="article:section"/><meta content="2023-09-01T00:00:00+00:00" property="article:published_time"/><meta content="2023-11-01T17:59:53+08:00" property="article:modified_time"/><meta content="summary" name="twitter:card"/><meta content="Config" name="twitter:title"/><meta content=" &amp;emsp;&amp;emsp;å¯ä»¥ç†è§£ä¸ºé…ç½®ä¸­å¿ƒ,æŠŠé…ç½®æ”¾åœ¨æŸä¸ªåœ°æ–¹(jdbc,git,svn,vault),ç»Ÿä¸€ç®¡ç†. - å’Œæ³¨å†Œä¸­å¿ƒç±»ä¼¼,åˆ†ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯,æœåŠ¡ç«¯å°±æ˜¯æä¾›é…ç½®çš„,å®¢æˆ·ç«¯å°±è·å–é…ç½®, - ä»…SpringCloudConfigä¸æ”¯æŒè‡ªåŠ¨åŠ¨æ€è·å–é…ç½®,éœ€è¦ç»“åˆbus(æ€»çº¿)æ¥å®ç°æ‰è¡Œ " name="twitter:description"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":4,"name":"Config","item":"https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/springCloud/Config.html"}]}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Config","name":"Config","description":" \u0026emsp;\u0026emsp;å¯ä»¥ç†è§£ä¸ºé…ç½®ä¸­å¿ƒ,æŠŠé…ç½®æ”¾åœ¨æŸä¸ªåœ°æ–¹(jdbc,git,svn,vault),ç»Ÿä¸€ç®¡ç†. - å’Œæ³¨å†Œä¸­å¿ƒç±»ä¼¼,åˆ†ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯,æœåŠ¡ç«¯å°±æ˜¯æä¾›é…ç½®çš„,å®¢æˆ·ç«¯å°±è·å–é…ç½®, - ä»…SpringCloudConfigä¸æ”¯æŒè‡ªåŠ¨åŠ¨æ€è·å–é…ç½®,éœ€è¦ç»“åˆbus(æ€»çº¿)æ¥å®ç°æ‰è¡Œ ","keywords":[" ä»‹ç»"," ä½¿ç”¨"," 1. åŸºæœ¬ä½¿ç”¨","é…ç½®ä¸­å¿ƒ(æœåŠ¡ç«¯)åœ°å€+åå­—","æŸ¥è¯¢æ ¼å¼: name-profile.properties = jportal-jdbc.properties"," 2. ä½¿ç”¨jdbcé…ç½®","åœ¨åŸºç¡€é…ç½®ä¸­å¢åŠ ,è¿™ä¸ªé…ç½®åœ¨åŸºç¡€é…ç½®ä¸­å¯ä»¥ä¸å†™"," 3.å°†é…ç½®ä¸­å¿ƒåŠ åˆ°æ³¨å†Œä¸­å¿ƒ","æ³¨å†Œä¸­å¿ƒåœ°å€"],"articleBody":"[toc]\nä»‹ç» å¯ä»¥ç†è§£ä¸ºé…ç½®ä¸­å¿ƒ,æŠŠé…ç½®æ”¾åœ¨æŸä¸ªåœ°æ–¹(jdbc,git,svn,vault),ç»Ÿä¸€ç®¡ç†.\nå’Œæ³¨å†Œä¸­å¿ƒç±»ä¼¼,åˆ†ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯,æœåŠ¡ç«¯å°±æ˜¯æä¾›é…ç½®çš„,å®¢æˆ·ç«¯å°±è·å–é…ç½®, ä»…SpringCloudConfigä¸æ”¯æŒè‡ªåŠ¨åŠ¨æ€è·å–é…ç½®,éœ€è¦ç»“åˆbus(æ€»çº¿)æ¥å®ç°æ‰è¡Œ ä½¿ç”¨é…ç½®ä¸­å¿ƒå,ä¼šä¼˜å…ˆä½¿ç”¨é…ç½®ä¸­å¿ƒçš„åœ°å€,ä¸€æ—¦é…ç½®ä¸­å¿ƒè¿ä¸é€šæ‰ä¼šä½¿ç”¨æœ¬åœ°é…ç½®æ–‡ä»¶ ä»¥åå†è¡¥å……å§ ä½¿ç”¨ 1. åŸºæœ¬ä½¿ç”¨ ä»¥snvä¸ºä¾‹\næœåŠ¡ç«¯:\npom.xml\norg.springframework.boot spring-boot-starter-web org.springframework.cloud spring-cloud-config-server org.tmatesoft.svnkit svnkit å¯åŠ¨ä¸»ç±»:\n@SpringBootApplication @EnableConfigServer //è¡¨ç¤ºä½¿ç”¨é…ç½®ä¸­å¿ƒ public class SpringBootTestConfigApplication { public static void main(String[] args) { SpringApplication.run(SpringBootTestConfigApplication.class, args); } } application.properties\nserver.port=8999 server.servlet.context-path=/test spring.cloud.config.server.svn.uri=http://10.101.222.10/jht/æ ‡å‡†é¡¹ç›®/JSCP/code/trunk/jportal/jportal-server/src/main/ spring.cloud.config.server.svn.username=xiaokunqi spring.cloud.config.server.svn.password=xiaokunqi spring.cloud.config.server.default-label=resources # å…·ä½“æŸä¸ªæ–‡ä»¶å¤¹ä¸‹ spring.profiles.active=subversion ä½¿ç”¨ç½‘å€å¯ä»¥è®¿é—®åˆ°é…ç½®: http://localhost:8999/test/application/jdbc 2. å®¢æˆ·ç«¯ pom.xml\norg.springframework.cloud spring-cloud-starter-config å¢åŠ ä¸€ä¸ªæ–‡ä»¶ bootstrap.properties\n#é…ç½®ä¸­å¿ƒ(æœåŠ¡ç«¯)åœ°å€+åå­— spring.cloud.config.uri=http://localhost:8999/test spring.cloud.config.name=${spring.application.name} #å–å½“å‰åº”ç”¨çš„åå­— spring.cloud.config.profile=jdbc #æŸ¥è¯¢æ ¼å¼: name-profile.properties = jportal-jdbc.properties bootstrap.properties ä¼˜å…ˆçº§ä¼šå¤§äºapplication.properties,æˆ–è€…è¯´configåªä¼šè¯»bootstrap.properties,æˆ‘å†™åœ¨applicationä¸­æ²¡æœ‰ç”Ÿæ•ˆ\nå¯åŠ¨ å…ˆå¯åŠ¨é…ç½®ä¸­å¿ƒå†å¯åŠ¨å®¢æˆ·ç«¯\n2. ä½¿ç”¨jdbcé…ç½® åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨svnä¸å¤ªå¥½,ä½¿ç”¨jdbcæ›´å¥½,å°±æ˜¯æŠŠé…ç½®æ–‡ä»¶æ”¾åœ¨æ•°æ®åº“ä¸­,configä¼šé»˜è®¤ä½¿ç”¨\nSELECT KEY, VALUE from PROPERTIES where APPLICATION=? and PROFILE=? and LABEL=?\næŸ¥è¯¢æ•°æ®,ä½†æ˜¯keyå’Œvauleåœ¨mysqlä¸­æ˜¯å…³é”®å­—,å¦‚æœä½¿ç”¨é»˜è®¤sql,åˆ™å¦‚æ­¤:\nSELECT `KEY`, `VALUE` from PROPERTIES where APPLICATION=? and PROFILE=? and LABEL=? æœ‰application,profile,labelä¸‰ä¸ªå­—æ®µå”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ–‡ä»¶(æ–‡ä»¶ä¸­å°±å¯ä»¥æœ‰å¾ˆå¤šé…ç½®äº†)\nå®¢æˆ·ç«¯ bootstrap.properties #åœ¨åŸºç¡€é…ç½®ä¸­å¢åŠ ,è¿™ä¸ªé…ç½®åœ¨åŸºç¡€é…ç½®ä¸­å¯ä»¥ä¸å†™ spring.cloud.config.label=dev # å¯ä»¥ç†è§£ä¸ºåˆ†æ”¯,å…¶ä»–æ•°æ®ä¸€æ ·,å†™æˆtest,å°±èƒ½è¯»å–æ•°æ®åº“ä¸­testçš„é…ç½®æ–‡ä»¶,å°±å¯ä»¥åšåˆ°é…ç½®æ–‡ä»¶çš„åˆ‡æ¢äº† æœåŠ¡ç«¯ pom.xml mysql mysql-connector-java org.springframework.boot spring-boot-starter-jdbc application.properties\nspring.profiles.active=jdbc spring.cloud.config.server.jdbc.sql=select keye , valuee from config_info where application=? and profile = ? and lable = ? # æŒ‡å®šsql,è¿™é‡Œæ¢äº†ä¸ªåå­—,åŠ äº†e, spring.datasource.driver-class-name=com.mysql.jdbc.Driver spring.datasource.url=jdbc:mysql://10.10.203.10:3306/jplatdv?useUnicode=true\u0026characterEncoding=utf-8\u0026useSSL=false\u0026allowMultiQueries=true spring.datasource.username=test spring.datasource.password=Jht123456 spring.datasource.type=com.alibaba.druid.pool.DruidDataSource spring.datasource.initialSize=5 spring.datasource.minIdle=5 spring.datasource.maxActive=20 spring.datasource.maxWait=60000 spring.cloud.config.server.jdbc=true åœ¨æ•°æ®åº“ä¸­åˆ›å»ºè¡¨,ç”¨æ¥å­˜å‚¨é…ç½®\nCREATE TABLE config_info ( id varchar(255) NULL DEFAULT NULL, keye varchar(255) NULL DEFAULT NULL, valuee varchar(255) NULL DEFAULT NULL, application varchar(255) NULL DEFAULT NULL, profile varchar(255) NULL DEFAULT NULL, lable varchar(255) NULL DEFAULT NULL ) æ’å…¥ä¸€äº›ä¾‹å­\nINSERT INTO config_info VALUES ('1', 'spring.datasource.driver-class-name', 'com.mysql.jdbc.Driver', 'jportal-server-xkj', 'jdbc', 'resource'); INSERT INTO config_info VALUES ('2', 'spring.datasource.url', 'jdbc:mysql://10.10.203.10:3306/jplatdv?useUnicode=true\u0026characterEncoding=utf-8\u0026useSSL=false\u0026allowMultiQueries=true', 'jportal-server-xkj', 'jdbc', 'resource'); INSERT INTO config_info VALUES ('3', 'spring.datasource.username', 'test', 'jportal-server-xkj', 'jdbc', 'resource'); INSERT INTO config_info VALUES ('4', 'spring.datasource.password', 'Jht123456', 'jportal-server-xkj', 'jdbc', 'resource'); INSERT INTO config_info VALUES ('5', 'spring.datasource.type', 'com.alibaba.druid.pool.DruidDataSource', 'jportal-server-xkj', 'jdbc', 'resource'); INSERT INTO config_info VALUES ('6', 'spring.datasource.initialSize', '5', 'jportal-server-xkj', 'jdbc', 'resource'); INSERT INTO config_info VALUES ('7', 'spring.datasource.minIdle', '5', 'jportal-server-xkj', 'jdbc', 'resource'); INSERT INTO config_info VALUES ('8', 'spring.datasource.maxActive', '5', 'jportal-server-xkj', 'jdbc', 'resource'); INSERT INTO config_info VALUES ('9', 'mybatis.mapper-locations', 'classpath*:mapper/mysql/*Mapper.xml', 'jportal-server-xkj', 'jdbc', 'resource'); INSERT INTO config_info VALUES ('10', 'jportal.server.name', 'jportal-server-xkj', 'jportal', 'constants', 'dev'); INSERT INTO config_info VALUES ('11', 'business.server.name', 'business-server-xkj', 'jportal', 'constants', 'dev'); INSERT INTO config_info VALUES ('12', 'logger.server.name', 'logger-server-xkj', 'jportal', 'constants', 'dev'); INSERT INTO config_info VALUES ('13', 'RAND_CODE_STRING', '1', 'jportal', 'constants', 'dev'); è®¿é—®ç½‘å€:http://localhost:8999/test/jportal-server-xkj/jdbc/devå°±èƒ½çœ‹åˆ°é…ç½®äº†\n3.å°†é…ç½®ä¸­å¿ƒåŠ åˆ°æ³¨å†Œä¸­å¿ƒ å°†é…ç½®ä¸­å¿ƒåŠ åˆ°æ³¨å†Œä¸­å¿ƒ,è¿™æ ·å¯ä»¥å®ç°é…ç½®ä¸­å¿ƒé«˜å¯ç”¨,å®¢æˆ·ç«¯è¿˜ä¸ç”¨æ ¹æ®ipå’Œç«¯å£,å¯ä»¥é€šè¿‡æ³¨å†Œä¸­å¿ƒæ‰¾åˆ°æœåŠ¡\næœåŠ¡ç«¯ pom.xml org.springframework.cloud spring-cloud-starter-eureka 1.3.1.RELEASE application.properties\n#æ³¨å†Œä¸­å¿ƒåœ°å€ eureka.client.serviceUrl.defaultZone=http://10.101.90.171:10001/eureka/ å®¢æˆ·ç«¯ æ³¨é‡Šæ‰spring.cloud.config.uri,å› ä¸ºä¸éœ€è¦æŒ‡å®šäº†. æ·»åŠ å¦‚ä¸‹é…ç½®: spring.cloud.config.discovery.enabled=true spring.cloud.config.discovery.serviceId=test // é…ç½®ä¸­å¿ƒçš„åå­— eureka.client.serviceUrl.defaultZone=http://10.101.90.171:10001/eureka/ æœ‰æ‰¾åˆ°ç‰¹åˆ«é€‚ç”¨çš„åœºæ™¯,å³ä½¿å¯ä»¥åŠ¨æ€è·å–é…ç½®,æ„Ÿè§‰ä¹Ÿå¾ˆé¸¡è‚‹,å“ªä¼šè½»æ˜“åŠ¨é…ç½®,å…¬å¸æƒ³è¦çš„åœºæ™¯æ˜¯,å¼€å‘-æµ‹è¯•-è¿ç»´èƒ½å…±åŒä½¿ç”¨çš„é…ç½®ä¸­å¿ƒ,é…ç½®å¤§å®¶éƒ½èƒ½çœ‹åˆ°å¹¶ä½¿ç”¨,é—å¼ƒç›®å‰çš„äººå·¥äº¤æ¥é…ç½®\n","wordCount":"1336","inLanguage":"zh","datePublished":"2023-09-01T00:00:00Z","dateModified":"2023-11-01T17:59:53+08:00","author":{"@type":"Person","name":"xkj"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/springCloud/Config.html"},"publisher":{"@type":"Organization","name":"ç±³äºŒ","logo":{"@type":"ImageObject","url":"https://xiaokunji.com/img/Q.svg"}}}</script></head><body class="dark" id="top"><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class="header"><nav class="nav"><div class="logo"><a accesskey="h" href="https://xiaokunji.com/zh/" title="ç±³äºŒ (Alt + H)"><img alt="" aria-label="logo" height="35" src="https://xiaokunji.com/img/Q.svg"/>ç±³äºŒ</a><div class="logo-switches"><button accesskey="t" id="theme-toggle" title="(Alt + T)"><svg fill="none" height="18" id="moon" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path></svg><svg fill="none" height="18" id="sun" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="5"></circle><line x1="12" x2="12" y1="1" y2="3"></line><line x1="12" x2="12" y1="21" y2="23"></line><line x1="4.22" x2="5.64" y1="4.22" y2="5.64"></line><line x1="18.36" x2="19.78" y1="18.36" y2="19.78"></line><line x1="1" x2="3" y1="12" y2="12"></line><line x1="21" x2="23" y1="12" y2="12"></line><line x1="4.22" x2="5.64" y1="19.78" y2="18.36"></line><line x1="18.36" x2="19.78" y1="5.64" y2="4.22"></line></svg></button><ul class="lang-switch"><li>|</li><li><a aria-label="English" href="https://xiaokunji.com/en/" title="English">English</a></li></ul></div></div><ul id="menu"><li><a href="https://xiaokunji.com/zh/" title="ğŸ ä¸»é¡µ"><span>ğŸ ä¸»é¡µ</span></a></li><li><a accesskey="/" href="https://xiaokunji.com/zh/search" title="ğŸ”æœç´¢ (Alt + /)"><span>ğŸ”æœç´¢</span></a></li><li><a href="https://xiaokunji.com/zh/post.html" title="ğŸ“šæ–‡ç« "><span>ğŸ“šæ–‡ç« </span></a></li><li><a href="https://xiaokunji.com/zh/archives.html" title="â±æ—¶é—´è½´"><span>â±æ—¶é—´è½´</span></a></li><li><a href="https://xiaokunji.com/zh/tags.html" title="ğŸ”–æ ‡ç­¾"><span>ğŸ”–æ ‡ç­¾</span></a></li><li><a href="https://xiaokunji.com/zh/categories.html" title="ğŸ“–åˆ†ç±»"><span>ğŸ“–åˆ†ç±»</span></a></li><li><a href="https://xiaokunji.com/zh/links.html" title="ğŸ¤å‹é“¾"><span>ğŸ¤å‹é“¾</span></a></li></ul></nav></header><main class="main"><article class="post-single"><header class="post-header"><nav aria-label="breadcrumb"><ul><a href="https://xiaokunji.com/zh/">ğŸ </a> <span>&gt;</span>
<a href="https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6.html">javaåŠå…¶æ¡†æ¶</a> <span>&gt;</span>
<a href="https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/springCloud.html">SpringCloud</a> <span>&gt;</span></ul></nav><h1 class="post-title">Config</h1><div class="post-description">&amp;emsp;&amp;emsp;å¯ä»¥ç†è§£ä¸ºé…ç½®ä¸­å¿ƒ,æŠŠé…ç½®æ”¾åœ¨æŸä¸ªåœ°æ–¹(jdbc,git,svn,vault),ç»Ÿä¸€ç®¡ç†. - å’Œæ³¨å†Œä¸­å¿ƒç±»ä¼¼,åˆ†ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯,æœåŠ¡ç«¯å°±æ˜¯æä¾›é…ç½®çš„,å®¢æˆ·ç«¯å°±è·å–é…ç½®, - ä»…SpringCloudConfigä¸æ”¯æŒè‡ªåŠ¨åŠ¨æ€è·å–é…ç½®,éœ€è¦ç»“åˆbus(æ€»çº¿)æ¥å®ç°æ‰è¡Œ</div><div class="post-meta">åˆ›å»º:&amp;nbsp;&lt;span title='2023-09-01 00:00:00 +0000 UTC'&gt;2023-09-01&lt;/span&gt;&amp;nbsp;Â·&amp;nbsp;æ›´æ–°:&amp;nbsp;2023-11-01&amp;nbsp;Â·&amp;nbsp;xkj
Â |Â åˆ†ç±»: Â <ul class="post-categories-meta" style="display:inline"><a href="https://xiaokunji.com/zh/categories/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6.html">javaåŠå…¶æ¡†æ¶</a></ul><span id="busuanzi_container_page_pv">Â | è®¿é—®: <span id="busuanzi_value_page_pv">1</span></span></div></header><aside class="toc-container wide" id="toc-container"><div class="toc"><details open=""><summary accesskey="c" title="(Alt + C)"><span class="details">ç›®å½•</span></summary><div class="inner"><ul><li><a aria-label="ä»‹ç»" href="#%e4%bb%8b%e7%bb%8d">ä»‹ç»</a></li><li><a aria-label="ä½¿ç”¨" href="#%e4%bd%bf%e7%94%a8">ä½¿ç”¨</a><ul><li><a aria-label="1. åŸºæœ¬ä½¿ç”¨" href="#1-%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8">1. åŸºæœ¬ä½¿ç”¨</a></li><li><a aria-label="2. ä½¿ç”¨jdbcé…ç½®" href="#2-%e4%bd%bf%e7%94%a8jdbc%e9%85%8d%e7%bd%ae">2. ä½¿ç”¨jdbcé…ç½®</a></li><li><a aria-label="3.å°†é…ç½®ä¸­å¿ƒåŠ åˆ°æ³¨å†Œä¸­å¿ƒ" href="#3%e5%b0%86%e9%85%8d%e7%bd%ae%e4%b8%ad%e5%bf%83%e5%8a%a0%e5%88%b0%e6%b3%a8%e5%86%8c%e4%b8%ad%e5%bf%83">3.å°†é…ç½®ä¸­å¿ƒåŠ åˆ°æ³¨å†Œä¸­å¿ƒ</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class="post-content"><p>[toc]</p><h1 id="ä»‹ç»">ä»‹ç»<a aria-hidden="true" class="anchor" hidden="" href="#ä»‹ç»">#</a></h1><p>â€ƒâ€ƒå¯ä»¥ç†è§£ä¸ºé…ç½®ä¸­å¿ƒ,æŠŠé…ç½®æ”¾åœ¨æŸä¸ªåœ°æ–¹(jdbc,git,svn,vault),ç»Ÿä¸€ç®¡ç†.</p><ul><li>å’Œæ³¨å†Œä¸­å¿ƒç±»ä¼¼,åˆ†ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯,æœåŠ¡ç«¯å°±æ˜¯æä¾›é…ç½®çš„,å®¢æˆ·ç«¯å°±è·å–é…ç½®,</li><li>ä»…SpringCloudConfigä¸æ”¯æŒè‡ªåŠ¨åŠ¨æ€è·å–é…ç½®,éœ€è¦ç»“åˆbus(æ€»çº¿)æ¥å®ç°æ‰è¡Œ</li><li>ä½¿ç”¨é…ç½®ä¸­å¿ƒå,ä¼šä¼˜å…ˆä½¿ç”¨é…ç½®ä¸­å¿ƒçš„åœ°å€,ä¸€æ—¦é…ç½®ä¸­å¿ƒè¿ä¸é€šæ‰ä¼šä½¿ç”¨æœ¬åœ°é…ç½®æ–‡ä»¶
ä»¥åå†è¡¥å……å§</li></ul><h1 id="ä½¿ç”¨">ä½¿ç”¨<a aria-hidden="true" class="anchor" hidden="" href="#ä½¿ç”¨">#</a></h1><h2 id="1-åŸºæœ¬ä½¿ç”¨">1. åŸºæœ¬ä½¿ç”¨<a aria-hidden="true" class="anchor" hidden="" href="#1-åŸºæœ¬ä½¿ç”¨">#</a></h2><blockquote><p>ä»¥snvä¸ºä¾‹</p></blockquote><ol><li><p>æœåŠ¡ç«¯:</p><p><code>pom.xml</code></p></li></ol><div class="highlight"><pre style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#8b949e;font-style:italic">&lt;!-- åŸºç¡€é…ç½® --&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#7ee787">&lt;dependency&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#7ee787">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#7ee787">&lt;/groupId&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#7ee787">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="color:#7ee787">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#7ee787">&lt;/dependency&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#7ee787">&lt;dependency&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#7ee787">&lt;groupId&gt;</span>org.springframework.cloud<span style="color:#7ee787">&lt;/groupId&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#7ee787">&lt;artifactId&gt;</span>spring-cloud-config-server<span style="color:#7ee787">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#7ee787">&lt;/dependency&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#8b949e;font-style:italic">&lt;!-- svn --&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#7ee787">&lt;dependency&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#7ee787">&lt;groupId&gt;</span>org.tmatesoft.svnkit<span style="color:#7ee787">&lt;/groupId&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#7ee787">&lt;artifactId&gt;</span>svnkit<span style="color:#7ee787">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#7ee787">&lt;/dependency&gt;</span>
</span></span></code></pre></div><p>å¯åŠ¨ä¸»ç±»:</p><div class="highlight"><pre style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-java" data-lang="java"><span style="display:flex"><span><span style="color:#d2a8ff;font-weight:700">@SpringBootApplication</span><span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span><span style="color:#d2a8ff;font-weight:700">@EnableConfigServer</span><span style="color:#6e7681"> </span><span style="color:#8b949e;font-style:italic">//è¡¨ç¤ºä½¿ç”¨é…ç½®ä¸­å¿ƒ</span><span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span><span style="color:#ff7b72">public</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">class</span> <span style="color:#f0883e;font-weight:700">SpringBootTestConfigApplication</span><span style="color:#6e7681"> </span>{<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681">	</span><span style="color:#ff7b72">public</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">static</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">void</span><span style="color:#6e7681"> </span><span style="color:#d2a8ff;font-weight:700">main</span>(String<span style="color:#ff7b72;font-weight:700">[]</span><span style="color:#6e7681"> </span>args)<span style="color:#6e7681"> </span>{<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681">		</span>SpringApplication.run(SpringBootTestConfigApplication.class,<span style="color:#6e7681"> </span>args);<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681">	</span>}<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span>}<span style="color:#6e7681">
</span></span></span></code></pre></div><p>application.properties</p><div class="highlight"><pre style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-properties" data-lang="properties"><span style="display:flex"><span>server.port<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">8999</span>
</span></span><span style="display:flex"><span>server.servlet.context-path<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">/test</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span>spring.cloud.config.server.svn.uri<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">http://10.101.222.10/jht/æ ‡å‡†é¡¹ç›®/JSCP/code/trunk/jportal/jportal-server/src/main/</span>
</span></span><span style="display:flex"><span>spring.cloud.config.server.svn.username<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">xiaokunqi</span>
</span></span><span style="display:flex"><span>spring.cloud.config.server.svn.password<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">xiaokunqi</span>
</span></span><span style="display:flex"><span>spring.cloud.config.server.default-label<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">resources # å…·ä½“æŸä¸ªæ–‡ä»¶å¤¹ä¸‹</span>
</span></span><span style="display:flex"><span>spring.profiles.active<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">subversion</span>
</span></span></code></pre></div><p>ä½¿ç”¨ç½‘å€å¯ä»¥è®¿é—®åˆ°é…ç½®: <code>http://localhost:8999/test/application/jdbc</code>
2. å®¢æˆ·ç«¯
pom.xml</p><div class="highlight"><pre style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#7ee787">&lt;dependency&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#7ee787">&lt;groupId&gt;</span>org.springframework.cloud<span style="color:#7ee787">&lt;/groupId&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#7ee787">&lt;artifactId&gt;</span>spring-cloud-starter-config<span style="color:#7ee787">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#7ee787">&lt;/dependency&gt;</span>
</span></span></code></pre></div><p>å¢åŠ ä¸€ä¸ªæ–‡ä»¶ <code>bootstrap.properties</code></p><div class="highlight"><pre style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-properties" data-lang="properties"><span style="display:flex"><span><span style="color:#8b949e;font-style:italic">#é…ç½®ä¸­å¿ƒ(æœåŠ¡ç«¯)åœ°å€+åå­—</span>
</span></span><span style="display:flex"><span>spring.cloud.config.uri<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">http://localhost:8999/test</span>
</span></span><span style="display:flex"><span>spring.cloud.config.name<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">${spring.application.name} #å–å½“å‰åº”ç”¨çš„åå­—</span>
</span></span><span style="display:flex"><span>spring.cloud.config.profile<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">jdbc</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span><span style="color:#8b949e;font-style:italic">#æŸ¥è¯¢æ ¼å¼: name-profile.properties = jportal-jdbc.properties</span>
</span></span></code></pre></div><blockquote><p><u>bootstrap.properties ä¼˜å…ˆçº§ä¼šå¤§äºapplication.properties</u>,æˆ–è€…è¯´configåªä¼šè¯»bootstrap.properties,æˆ‘å†™åœ¨applicationä¸­æ²¡æœ‰ç”Ÿæ•ˆ</p></blockquote><ol start="3"><li>å¯åŠ¨</li></ol><p>å…ˆå¯åŠ¨é…ç½®ä¸­å¿ƒå†å¯åŠ¨å®¢æˆ·ç«¯</p><h2 id="2-ä½¿ç”¨jdbcé…ç½®">2. ä½¿ç”¨jdbcé…ç½®<a aria-hidden="true" class="anchor" hidden="" href="#2-ä½¿ç”¨jdbcé…ç½®">#</a></h2><p>åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨svnä¸å¤ªå¥½,ä½¿ç”¨jdbcæ›´å¥½,å°±æ˜¯æŠŠé…ç½®æ–‡ä»¶æ”¾åœ¨æ•°æ®åº“ä¸­,configä¼šé»˜è®¤ä½¿ç”¨</p><p><code>SELECT KEY, VALUE from PROPERTIES where APPLICATION=? and PROFILE=? and LABEL=?</code></p><p>æŸ¥è¯¢æ•°æ®,ä½†æ˜¯keyå’Œvauleåœ¨mysqlä¸­æ˜¯å…³é”®å­—,å¦‚æœä½¿ç”¨é»˜è®¤sql,åˆ™å¦‚æ­¤:</p><div class="highlight"><pre style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-sql" data-lang="sql"><span style="display:flex"><span><span style="color:#ff7b72">SELECT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72;font-weight:700">`</span><span style="color:#ff7b72">KEY</span><span style="color:#ff7b72;font-weight:700">`</span>,<span style="color:#6e7681"> </span><span style="color:#ff7b72;font-weight:700">`</span>VALUE<span style="color:#ff7b72;font-weight:700">`</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">from</span><span style="color:#6e7681"> </span>PROPERTIES<span style="color:#6e7681"> </span><span style="color:#ff7b72">where</span><span style="color:#6e7681"> </span>APPLICATION<span style="color:#ff7b72;font-weight:700">=?</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">and</span><span style="color:#6e7681"> </span>PROFILE<span style="color:#ff7b72;font-weight:700">=?</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">and</span><span style="color:#6e7681"> </span>LABEL<span style="color:#ff7b72;font-weight:700">=?</span><span style="color:#6e7681">
</span></span></span></code></pre></div><p>æœ‰application,profile,labelä¸‰ä¸ªå­—æ®µå”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ–‡ä»¶(æ–‡ä»¶ä¸­å°±å¯ä»¥æœ‰å¾ˆå¤šé…ç½®äº†)</p><ol><li>å®¢æˆ·ç«¯
<code>bootstrap.properties</code></li></ol><div class="highlight"><pre style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-properties" data-lang="properties"><span style="display:flex"><span><span style="color:#8b949e;font-style:italic">#åœ¨åŸºç¡€é…ç½®ä¸­å¢åŠ ,è¿™ä¸ªé…ç½®åœ¨åŸºç¡€é…ç½®ä¸­å¯ä»¥ä¸å†™</span>
</span></span><span style="display:flex"><span>spring.cloud.config.label<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">dev  # å¯ä»¥ç†è§£ä¸ºåˆ†æ”¯,å…¶ä»–æ•°æ®ä¸€æ ·,å†™æˆtest,å°±èƒ½è¯»å–æ•°æ®åº“ä¸­testçš„é…ç½®æ–‡ä»¶,å°±å¯ä»¥åšåˆ°é…ç½®æ–‡ä»¶çš„åˆ‡æ¢äº†</span>
</span></span></code></pre></div><ol start="2"><li>æœåŠ¡ç«¯
pom.xml</li></ol><div class="highlight"><pre style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-xml" data-lang="xml"><span style="display:flex"><span> <span style="color:#8b949e;font-style:italic">&lt;!-- MYSQL --&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#7ee787">&lt;dependency&gt;</span>
</span></span><span style="display:flex"><span>    <span style="color:#7ee787">&lt;groupId&gt;</span>mysql<span style="color:#7ee787">&lt;/groupId&gt;</span>
</span></span><span style="display:flex"><span>    <span style="color:#7ee787">&lt;artifactId&gt;</span>mysql-connector-java<span style="color:#7ee787">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#7ee787">&lt;/dependency&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#7ee787">&lt;dependency&gt;</span>
</span></span><span style="display:flex"><span>    <span style="color:#7ee787">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#7ee787">&lt;/groupId&gt;</span>
</span></span><span style="display:flex"><span>    <span style="color:#7ee787">&lt;artifactId&gt;</span>spring-boot-starter-jdbc<span style="color:#7ee787">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#7ee787">&lt;/dependency&gt;</span>
</span></span></code></pre></div><p><code>application.properties</code></p><div class="highlight"><pre style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-properties" data-lang="properties"><span style="display:flex"><span>spring.profiles.active<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">jdbc</span>
</span></span><span style="display:flex"><span>spring.cloud.config.server.jdbc.sql<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">select keye , valuee from config_info where application=? and profile = ? and lable = ? # æŒ‡å®šsql,è¿™é‡Œæ¢äº†ä¸ªåå­—,åŠ äº†e,</span>
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span>spring.datasource.driver-class-name<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">com.mysql.jdbc.Driver</span>
</span></span><span style="display:flex"><span>spring.datasource.url<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">jdbc:mysql://10.10.203.10:3306/jplatdv?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;allowMultiQueries=true</span>
</span></span><span style="display:flex"><span>spring.datasource.username<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">test</span>
</span></span><span style="display:flex"><span>spring.datasource.password<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">Jht123456</span>
</span></span><span style="display:flex"><span>spring.datasource.type<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">com.alibaba.druid.pool.DruidDataSource</span>
</span></span><span style="display:flex"><span>spring.datasource.initialSize<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">5    </span>
</span></span><span style="display:flex"><span>spring.datasource.minIdle<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">5    </span>
</span></span><span style="display:flex"><span>spring.datasource.maxActive<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">20       </span>
</span></span><span style="display:flex"><span>spring.datasource.maxWait<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">60000</span>
</span></span><span style="display:flex"><span>spring.cloud.config.server.jdbc<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">true</span>
</span></span></code></pre></div><p>åœ¨æ•°æ®åº“ä¸­åˆ›å»ºè¡¨,ç”¨æ¥å­˜å‚¨é…ç½®</p><div class="highlight"><pre style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-sql" data-lang="sql"><span style="display:flex"><span><span style="color:#ff7b72">CREATE</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">TABLE</span><span style="color:#6e7681"> </span>config_info<span style="color:#6e7681">  </span>(<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681">  </span>id<span style="color:#6e7681"> </span>varchar(<span style="color:#a5d6ff">255</span>)<span style="color:#6e7681">     </span><span style="color:#ff7b72">NULL</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">DEFAULT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">NULL</span>,<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681">  </span>keye<span style="color:#6e7681"> </span>varchar(<span style="color:#a5d6ff">255</span>)<span style="color:#6e7681">     </span><span style="color:#ff7b72">NULL</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">DEFAULT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">NULL</span>,<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681">  </span>valuee<span style="color:#6e7681"> </span>varchar(<span style="color:#a5d6ff">255</span>)<span style="color:#6e7681">     </span><span style="color:#ff7b72">NULL</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">DEFAULT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">NULL</span>,<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681">  </span>application<span style="color:#6e7681"> </span>varchar(<span style="color:#a5d6ff">255</span>)<span style="color:#6e7681">     </span><span style="color:#ff7b72">NULL</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">DEFAULT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">NULL</span>,<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681">  </span>profile<span style="color:#6e7681"> </span>varchar(<span style="color:#a5d6ff">255</span>)<span style="color:#6e7681">    </span><span style="color:#ff7b72">NULL</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">DEFAULT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">NULL</span>,<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681">  </span>lable<span style="color:#6e7681"> </span>varchar(<span style="color:#a5d6ff">255</span>)<span style="color:#6e7681">      </span><span style="color:#ff7b72">NULL</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">DEFAULT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">NULL</span><span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span>)<span style="color:#6e7681">
</span></span></span></code></pre></div><p>æ’å…¥ä¸€äº›ä¾‹å­</p><div class="highlight"><pre style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-sql" data-lang="sql"><span style="display:flex"><span><span style="color:#ff7b72">INSERT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">INTO</span><span style="color:#6e7681"> </span>config_info<span style="color:#6e7681"> </span><span style="color:#ff7b72">VALUES</span><span style="color:#6e7681"> </span>(<span style="color:#a5d6ff">'1'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'spring.datasource.driver-class-name'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'com.mysql.jdbc.Driver'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jportal-server-xkj'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jdbc'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'resource'</span>);<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span><span style="color:#ff7b72">INSERT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">INTO</span><span style="color:#6e7681"> </span>config_info<span style="color:#6e7681"> </span><span style="color:#ff7b72">VALUES</span><span style="color:#6e7681"> </span>(<span style="color:#a5d6ff">'2'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'spring.datasource.url'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jdbc:mysql://10.10.203.10:3306/jplatdv?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;allowMultiQueries=true'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jportal-server-xkj'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jdbc'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'resource'</span>);<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span><span style="color:#ff7b72">INSERT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">INTO</span><span style="color:#6e7681"> </span>config_info<span style="color:#6e7681"> </span><span style="color:#ff7b72">VALUES</span><span style="color:#6e7681"> </span>(<span style="color:#a5d6ff">'3'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'spring.datasource.username'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'test'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jportal-server-xkj'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jdbc'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'resource'</span>);<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span><span style="color:#ff7b72">INSERT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">INTO</span><span style="color:#6e7681"> </span>config_info<span style="color:#6e7681"> </span><span style="color:#ff7b72">VALUES</span><span style="color:#6e7681"> </span>(<span style="color:#a5d6ff">'4'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'spring.datasource.password'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'Jht123456'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jportal-server-xkj'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jdbc'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'resource'</span>);<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span><span style="color:#ff7b72">INSERT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">INTO</span><span style="color:#6e7681"> </span>config_info<span style="color:#6e7681"> </span><span style="color:#ff7b72">VALUES</span><span style="color:#6e7681"> </span>(<span style="color:#a5d6ff">'5'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'spring.datasource.type'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'com.alibaba.druid.pool.DruidDataSource'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jportal-server-xkj'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jdbc'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'resource'</span>);<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span><span style="color:#ff7b72">INSERT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">INTO</span><span style="color:#6e7681"> </span>config_info<span style="color:#6e7681"> </span><span style="color:#ff7b72">VALUES</span><span style="color:#6e7681"> </span>(<span style="color:#a5d6ff">'6'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'spring.datasource.initialSize'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'5'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jportal-server-xkj'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jdbc'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'resource'</span>);<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span><span style="color:#ff7b72">INSERT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">INTO</span><span style="color:#6e7681"> </span>config_info<span style="color:#6e7681"> </span><span style="color:#ff7b72">VALUES</span><span style="color:#6e7681"> </span>(<span style="color:#a5d6ff">'7'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'spring.datasource.minIdle'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'5'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jportal-server-xkj'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jdbc'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'resource'</span>);<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span><span style="color:#ff7b72">INSERT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">INTO</span><span style="color:#6e7681"> </span>config_info<span style="color:#6e7681"> </span><span style="color:#ff7b72">VALUES</span><span style="color:#6e7681"> </span>(<span style="color:#a5d6ff">'8'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'spring.datasource.maxActive'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'5'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jportal-server-xkj'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jdbc'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'resource'</span>);<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span><span style="color:#ff7b72">INSERT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">INTO</span><span style="color:#6e7681"> </span>config_info<span style="color:#6e7681"> </span><span style="color:#ff7b72">VALUES</span><span style="color:#6e7681"> </span>(<span style="color:#a5d6ff">'9'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'mybatis.mapper-locations'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'classpath*:mapper/mysql/*Mapper.xml'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jportal-server-xkj'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jdbc'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'resource'</span>);<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span><span style="color:#ff7b72">INSERT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">INTO</span><span style="color:#6e7681"> </span>config_info<span style="color:#6e7681"> </span><span style="color:#ff7b72">VALUES</span><span style="color:#6e7681"> </span>(<span style="color:#a5d6ff">'10'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jportal.server.name'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jportal-server-xkj'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jportal'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'constants'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'dev'</span>);<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span><span style="color:#ff7b72">INSERT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">INTO</span><span style="color:#6e7681"> </span>config_info<span style="color:#6e7681"> </span><span style="color:#ff7b72">VALUES</span><span style="color:#6e7681"> </span>(<span style="color:#a5d6ff">'11'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'business.server.name'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'business-server-xkj'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jportal'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'constants'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'dev'</span>);<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span><span style="color:#ff7b72">INSERT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">INTO</span><span style="color:#6e7681"> </span>config_info<span style="color:#6e7681"> </span><span style="color:#ff7b72">VALUES</span><span style="color:#6e7681"> </span>(<span style="color:#a5d6ff">'12'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'logger.server.name'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'logger-server-xkj'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jportal'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'constants'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'dev'</span>);<span style="color:#6e7681">
</span></span></span><span style="display:flex"><span><span style="color:#6e7681"></span><span style="color:#ff7b72">INSERT</span><span style="color:#6e7681"> </span><span style="color:#ff7b72">INTO</span><span style="color:#6e7681"> </span>config_info<span style="color:#6e7681"> </span><span style="color:#ff7b72">VALUES</span><span style="color:#6e7681"> </span>(<span style="color:#a5d6ff">'13'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'RAND_CODE_STRING'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'1'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'jportal'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'constants'</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">'dev'</span>);<span style="color:#6e7681">
</span></span></span></code></pre></div><p>è®¿é—®ç½‘å€:<code>http://localhost:8999/test/jportal-server-xkj/jdbc/dev</code>å°±èƒ½çœ‹åˆ°é…ç½®äº†</p><h2 id="3å°†é…ç½®ä¸­å¿ƒåŠ åˆ°æ³¨å†Œä¸­å¿ƒ">3.å°†é…ç½®ä¸­å¿ƒåŠ åˆ°æ³¨å†Œä¸­å¿ƒ<a aria-hidden="true" class="anchor" hidden="" href="#3å°†é…ç½®ä¸­å¿ƒåŠ åˆ°æ³¨å†Œä¸­å¿ƒ">#</a></h2><p>å°†é…ç½®ä¸­å¿ƒåŠ åˆ°æ³¨å†Œä¸­å¿ƒ,è¿™æ ·å¯ä»¥å®ç°é…ç½®ä¸­å¿ƒé«˜å¯ç”¨,å®¢æˆ·ç«¯è¿˜ä¸ç”¨æ ¹æ®ipå’Œç«¯å£,å¯ä»¥é€šè¿‡æ³¨å†Œä¸­å¿ƒæ‰¾åˆ°æœåŠ¡</p><ol><li>æœåŠ¡ç«¯
pom.xml</li></ol><div class="highlight"><pre style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-xml" data-lang="xml"><span style="display:flex"><span><span style="color:#7ee787">&lt;dependency&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#7ee787">&lt;groupId&gt;</span>org.springframework.cloud<span style="color:#7ee787">&lt;/groupId&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#7ee787">&lt;artifactId&gt;</span>spring-cloud-starter-eureka<span style="color:#7ee787">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex"><span>	<span style="color:#7ee787">&lt;version&gt;</span>1.3.1.RELEASE<span style="color:#7ee787">&lt;/version&gt;</span>
</span></span><span style="display:flex"><span><span style="color:#7ee787">&lt;/dependency&gt;</span>
</span></span></code></pre></div><p><code>application.properties</code></p><div class="highlight"><pre style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-properties" data-lang="properties"><span style="display:flex"><span><span style="color:#8b949e;font-style:italic">#æ³¨å†Œä¸­å¿ƒåœ°å€</span>
</span></span><span style="display:flex"><span>eureka.client.serviceUrl.defaultZone<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">http://10.101.90.171:10001/eureka/</span>
</span></span></code></pre></div><ol start="2"><li>å®¢æˆ·ç«¯
æ³¨é‡Šæ‰<code>spring.cloud.config.uri</code>,å› ä¸ºä¸éœ€è¦æŒ‡å®šäº†.
æ·»åŠ å¦‚ä¸‹é…ç½®:</li></ol><div class="highlight"><pre style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-properties" data-lang="properties"><span style="display:flex"><span>spring.cloud.config.discovery.enabled<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">true</span>
</span></span><span style="display:flex"><span>spring.cloud.config.discovery.serviceId<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">test // é…ç½®ä¸­å¿ƒçš„åå­—</span>
</span></span><span style="display:flex"><span>eureka.client.serviceUrl.defaultZone<span style="color:#ff7b72;font-weight:700">=</span><span style="color:#a5d6ff">http://10.101.90.171:10001/eureka/</span>
</span></span></code></pre></div><blockquote><p>æœ‰æ‰¾åˆ°ç‰¹åˆ«é€‚ç”¨çš„åœºæ™¯,å³ä½¿å¯ä»¥åŠ¨æ€è·å–é…ç½®,æ„Ÿè§‰ä¹Ÿå¾ˆé¸¡è‚‹,å“ªä¼šè½»æ˜“åŠ¨é…ç½®,å…¬å¸æƒ³è¦çš„åœºæ™¯æ˜¯,å¼€å‘-æµ‹è¯•-è¿ç»´èƒ½å…±åŒä½¿ç”¨çš„é…ç½®ä¸­å¿ƒ,é…ç½®å¤§å®¶éƒ½èƒ½çœ‹åˆ°å¹¶ä½¿ç”¨,é—å¼ƒç›®å‰çš„äººå·¥äº¤æ¥é…ç½®</p></blockquote></div><footer class="post-footer"><ul class="post-tags"><li><a href="https://xiaokunji.com/zh/tags/spring_cloud.html">spring_cloud</a></li><li><a href="https://xiaokunji.com/zh/tags/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6.html">javaåŠå…¶æ¡†æ¶</a></li></ul><nav class="paginav"><a class="prev" href="https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/springCloud/Bus.html"><span class="title">Â« ä¸Šä¸€é¡µ</span><br/><span>Bus</span>
</a><a class="next" href="https://xiaokunji.com/zh/java%E5%8F%8A%E5%85%B6%E6%A1%86%E6%9E%B6/springCloud/Eureka.html"><span class="title">ä¸‹ä¸€é¡µ Â»</span><br/><span>Eureka</span></a></nav></footer></article></main><script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><footer class="footer"><span>Copyright
Â©
-2023
<a href="https://xiaokunji.com/zh/" style="color:#939393">ç±³äºŒ</a>
All Rights Reserved
</span><span id="busuanzi_container"><span class="fa fa-user">ç”¨æˆ·æ•°:</span><span id="busuanzi_value_site_uv"></span>
<span class="fa fa-eye">è®¿é—®æ•°:</span><span id="busuanzi_value_site_pv"></span></span></footer><a accesskey="g" aria-label="go to top" class="top-link" href="#top" id="top-link" title="Go to Top (Alt + G)"><svg fill="currentcolor" viewbox="0 0 12 6" xmlns="http://www.w3.org/2000/svg"><path d="M12 6H0l6-6z"></path></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="å¤åˆ¶";function s(){t.innerHTML="å·²å¤åˆ¶ï¼",setTimeout(()=>{t.innerHTML="å¤åˆ¶"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>